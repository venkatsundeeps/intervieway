exports.id=512,exports.ids=[512],exports.modules={958:function(y){y.exports=function(){var y={7:function(y){"use strict";var _,b="object"==typeof Reflect?Reflect:null,E=b&&"function"==typeof b.apply?b.apply:function(y,_,b){return Function.prototype.apply.call(y,_,b)};_=b&&"function"==typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:function(y){return Object.getOwnPropertyNames(y)};var k=Number.isNaN||function(y){return y!=y};function o(){o.init.call(this)}y.exports=o,y.exports.once=function(y,_){return new Promise(function(b,E){var k;function i(b){y.removeListener(_,o),E(b)}function o(){"function"==typeof y.removeListener&&y.removeListener("error",i),b([].slice.call(arguments))}v(y,_,o,{once:!0}),"error"!==_&&(k=i,"function"==typeof y.on&&v(y,"error",k,{once:!0}))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var P=10;function s(y){if("function"!=typeof y)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}function c(y){return void 0===y._maxListeners?o.defaultMaxListeners:y._maxListeners}function u(y,_,b,E){var k,P,I;if(s(b),void 0===(P=y._events)?(P=y._events=Object.create(null),y._eventsCount=0):(void 0!==P.newListener&&(y.emit("newListener",_,b.listener?b.listener:b),P=y._events),I=P[_]),void 0===I)I=P[_]=b,++y._eventsCount;else if("function"==typeof I?I=P[_]=E?[b,I]:[I,b]:E?I.unshift(b):I.push(b),(k=c(y))>0&&I.length>k&&!I.warned){I.warned=!0;var D=Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=y,D.type=_,D.count=I.length,console&&console.warn&&console.warn(D)}return y}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(y,_,b){var E={fired:!1,wrapFn:void 0,target:y,type:_,listener:b},k=l.bind(E);return k.listener=b,E.wrapFn=k,k}function f(y,_,b){var E=y._events;if(void 0===E)return[];var k=E[_];return void 0===k?[]:"function"==typeof k?b?[k.listener||k]:[k]:b?function(y){for(var _=Array(y.length),b=0;b<_.length;++b)_[b]=y[b].listener||y[b];return _}(k):h(k,k.length)}function p(y){var _=this._events;if(void 0!==_){var b=_[y];if("function"==typeof b)return 1;if(void 0!==b)return b.length}return 0}function h(y,_){for(var b=Array(_),E=0;E<_;++E)b[E]=y[E];return b}function v(y,_,b,E){if("function"==typeof y.on)E.once?y.once(_,b):y.on(_,b);else{if("function"!=typeof y.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y);y.addEventListener(_,function i(k){E.once&&y.removeEventListener(_,i),b(k)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return P},set:function(y){if("number"!=typeof y||y<0||k(y))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");P=y}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(y){if("number"!=typeof y||y<0||k(y))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(y){for(var _=[],b=1;b<arguments.length;b++)_.push(arguments[b]);var k="error"===y,P=this._events;if(void 0!==P)k=k&&void 0===P.error;else if(!k)return!1;if(k){if(_.length>0&&(I=_[0]),I instanceof Error)throw I;var I,D=Error("Unhandled error."+(I?" ("+I.message+")":""));throw D.context=I,D}var j=P[y];if(void 0===j)return!1;if("function"==typeof j)E(j,this,_);else{var L=j.length,R=h(j,L);for(b=0;b<L;++b)E(R[b],this,_)}return!0},o.prototype.addListener=function(y,_){return u(this,y,_,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(y,_){return u(this,y,_,!0)},o.prototype.once=function(y,_){return s(_),this.on(y,d(this,y,_)),this},o.prototype.prependOnceListener=function(y,_){return s(_),this.prependListener(y,d(this,y,_)),this},o.prototype.removeListener=function(y,_){var b,E,k,P,I;if(s(_),void 0===(E=this._events)||void 0===(b=E[y]))return this;if(b===_||b.listener===_)0==--this._eventsCount?this._events=Object.create(null):(delete E[y],E.removeListener&&this.emit("removeListener",y,b.listener||_));else if("function"!=typeof b){for(k=-1,P=b.length-1;P>=0;P--)if(b[P]===_||b[P].listener===_){I=b[P].listener,k=P;break}if(k<0)return this;0===k?b.shift():function(y,_){for(;_+1<y.length;_++)y[_]=y[_+1];y.pop()}(b,k),1===b.length&&(E[y]=b[0]),void 0!==E.removeListener&&this.emit("removeListener",y,I||_)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(y){var _,b,E;if(void 0===(b=this._events))return this;if(void 0===b.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==b[y]&&(0==--this._eventsCount?this._events=Object.create(null):delete b[y]),this;if(0==arguments.length){var k,P=Object.keys(b);for(E=0;E<P.length;++E)"removeListener"!==(k=P[E])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(_=b[y]))this.removeListener(y,_);else if(void 0!==_)for(E=_.length-1;E>=0;E--)this.removeListener(y,_[E]);return this},o.prototype.listeners=function(y){return f(this,y,!0)},o.prototype.rawListeners=function(y){return f(this,y,!1)},o.listenerCount=function(y,_){return"function"==typeof y.listenerCount?y.listenerCount(_):p.call(y,_)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},781:function(y,_,b){var E=b(948);y.exports=E.default},880:function(y){y.exports=function(y){var _={};function n(b){if(_[b])return _[b].exports;var E=_[b]={i:b,l:!1,exports:{}};return y[b].call(E.exports,E,E.exports,n),E.l=!0,E.exports}return n.m=y,n.c=_,n.d=function(y,_,b){n.o(y,_)||Object.defineProperty(y,_,{enumerable:!0,get:b})},n.r=function(y){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},n.t=function(y,_){if(1&_&&(y=n(y)),8&_||4&_&&"object"==typeof y&&y&&y.__esModule)return y;var b=Object.create(null);if(n.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:y}),2&_&&"string"!=typeof y)for(var E in y)n.d(b,E,(function(_){return y[_]}).bind(null,E));return b},n.n=function(y){var _=y&&y.__esModule?function(){return y.default}:function(){return y};return n.d(_,"a",_),_},n.o=function(y,_){return Object.prototype.hasOwnProperty.call(y,_)},n.p="",n(n.s=90)}({17:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E=b(18),k=function(){function e(){}return e.getFirstMatch=function(y,_){var b=_.match(y);return b&&b.length>0&&b[1]||""},e.getSecondMatch=function(y,_){var b=_.match(y);return b&&b.length>1&&b[2]||""},e.matchAndReturnConst=function(y,_,b){if(y.test(_))return b},e.getWindowsVersionName=function(y){switch(y){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(y){var _=y.split(".").splice(0,2).map(function(y){return parseInt(y,10)||0});if(_.push(0),10===_[0])switch(_[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(y){var _=y.split(".").splice(0,2).map(function(y){return parseInt(y,10)||0});if(_.push(0),!(1===_[0]&&_[1]<5))return 1===_[0]&&_[1]<6?"Cupcake":1===_[0]&&_[1]>=6?"Donut":2===_[0]&&_[1]<2?"Eclair":2===_[0]&&2===_[1]?"Froyo":2===_[0]&&_[1]>2?"Gingerbread":3===_[0]?"Honeycomb":4===_[0]&&_[1]<1?"Ice Cream Sandwich":4===_[0]&&_[1]<4?"Jelly Bean":4===_[0]&&_[1]>=4?"KitKat":5===_[0]?"Lollipop":6===_[0]?"Marshmallow":7===_[0]?"Nougat":8===_[0]?"Oreo":9===_[0]?"Pie":void 0},e.getVersionPrecision=function(y){return y.split(".").length},e.compareVersions=function(y,_,b){void 0===b&&(b=!1);var E=e.getVersionPrecision(y),k=e.getVersionPrecision(_),P=Math.max(E,k),I=0,D=e.map([y,_],function(y){var _=P-e.getVersionPrecision(y),b=y+Array(_+1).join(".0");return e.map(b.split("."),function(y){return Array(20-y.length).join("0")+y}).reverse()});for(b&&(I=P-Math.min(E,k)),P-=1;P>=I;){if(D[0][P]>D[1][P])return 1;if(D[0][P]===D[1][P]){if(P===I)return 0;P-=1}else if(D[0][P]<D[1][P])return -1}},e.map=function(y,_){var b,E=[];if(Array.prototype.map)return Array.prototype.map.call(y,_);for(b=0;b<y.length;b+=1)E.push(_(y[b]));return E},e.find=function(y,_){var b,E;if(Array.prototype.find)return Array.prototype.find.call(y,_);for(b=0,E=y.length;b<E;b+=1){var k=y[b];if(_(k,b))return k}},e.assign=function(y){for(var _,b,E=arguments.length,k=Array(E>1?E-1:0),P=1;P<E;P++)k[P-1]=arguments[P];if(Object.assign)return Object.assign.apply(Object,[y].concat(k));for(_=0,b=k.length;_<b;_+=1)(function(){var b=k[_];"object"==typeof b&&null!==b&&Object.keys(b).forEach(function(_){y[_]=b[_]})})();return y},e.getBrowserAlias=function(y){return E.BROWSER_ALIASES_MAP[y]},e.getBrowserTypeByAlias=function(y){return E.BROWSER_MAP[y]||""},e}();_.default=k,y.exports=_.default},18:function(y,_,b){"use strict";_.__esModule=!0,_.ENGINE_MAP=_.OS_MAP=_.PLATFORMS_MAP=_.BROWSER_MAP=_.BROWSER_ALIASES_MAP=void 0,_.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},_.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},_.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},_.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},_.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E,k=(E=b(91))&&E.__esModule?E:{default:E},P=b(18);function a(y,_){for(var b=0;b<_.length;b++){var E=_[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var I=function(){function e(){}return e.getParser=function(y,_){if(void 0===_&&(_=!1),"string"!=typeof y)throw Error("UserAgent should be a string");return new k.default(y,_)},e.parse=function(y){return new k.default(y).getResult()},a(e,[{key:"BROWSER_MAP",get:function(){return P.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return P.ENGINE_MAP}},{key:"OS_MAP",get:function(){return P.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return P.PLATFORMS_MAP}}]),e}();_.default=I,y.exports=_.default},91:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E=c(b(92)),k=c(b(93)),P=c(b(94)),I=c(b(95)),D=c(b(17));function c(y){return y&&y.__esModule?y:{default:y}}var j=function(){function e(y,_){if(void 0===_&&(_=!1),null==y||""===y)throw Error("UserAgent parameter can't be empty");this._ua=y,this.parsedResult={},!0!==_&&this.parse()}var y=e.prototype;return y.getUA=function(){return this._ua},y.test=function(y){return y.test(this._ua)},y.parseBrowser=function(){var y=this;this.parsedResult.browser={};var _=D.default.find(E.default,function(_){if("function"==typeof _.test)return _.test(y);if(_.test instanceof Array)return _.test.some(function(_){return y.test(_)});throw Error("Browser's test function is not valid")});return _&&(this.parsedResult.browser=_.describe(this.getUA())),this.parsedResult.browser},y.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},y.getBrowserName=function(y){return y?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},y.getBrowserVersion=function(){return this.getBrowser().version},y.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},y.parseOS=function(){var y=this;this.parsedResult.os={};var _=D.default.find(k.default,function(_){if("function"==typeof _.test)return _.test(y);if(_.test instanceof Array)return _.test.some(function(_){return y.test(_)});throw Error("Browser's test function is not valid")});return _&&(this.parsedResult.os=_.describe(this.getUA())),this.parsedResult.os},y.getOSName=function(y){var _=this.getOS().name;return y?String(_).toLowerCase()||"":_||""},y.getOSVersion=function(){return this.getOS().version},y.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},y.getPlatformType=function(y){void 0===y&&(y=!1);var _=this.getPlatform().type;return y?String(_).toLowerCase()||"":_||""},y.parsePlatform=function(){var y=this;this.parsedResult.platform={};var _=D.default.find(P.default,function(_){if("function"==typeof _.test)return _.test(y);if(_.test instanceof Array)return _.test.some(function(_){return y.test(_)});throw Error("Browser's test function is not valid")});return _&&(this.parsedResult.platform=_.describe(this.getUA())),this.parsedResult.platform},y.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},y.getEngineName=function(y){return y?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},y.parseEngine=function(){var y=this;this.parsedResult.engine={};var _=D.default.find(I.default,function(_){if("function"==typeof _.test)return _.test(y);if(_.test instanceof Array)return _.test.some(function(_){return y.test(_)});throw Error("Browser's test function is not valid")});return _&&(this.parsedResult.engine=_.describe(this.getUA())),this.parsedResult.engine},y.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},y.getResult=function(){return D.default.assign({},this.parsedResult)},y.satisfies=function(y){var _=this,b={},E=0,k={},P=0;if(Object.keys(y).forEach(function(_){var I=y[_];"string"==typeof I?(k[_]=I,P+=1):"object"==typeof I&&(b[_]=I,E+=1)}),E>0){var I=Object.keys(b),j=D.default.find(I,function(y){return _.isOS(y)});if(j){var L=this.satisfies(b[j]);if(void 0!==L)return L}var R=D.default.find(I,function(y){return _.isPlatform(y)});if(R){var F=this.satisfies(b[R]);if(void 0!==F)return F}}if(P>0){var V=Object.keys(k),J=D.default.find(V,function(y){return _.isBrowser(y,!0)});if(void 0!==J)return this.compareVersion(k[J])}},y.isBrowser=function(y,_){void 0===_&&(_=!1);var b=this.getBrowserName().toLowerCase(),E=y.toLowerCase(),k=D.default.getBrowserTypeByAlias(E);return _&&k&&(E=k.toLowerCase()),E===b},y.compareVersion=function(y){var _=[0],b=y,E=!1,k=this.getBrowserVersion();if("string"==typeof k)return">"===y[0]||"<"===y[0]?(b=y.substr(1),"="===y[1]?(E=!0,b=y.substr(2)):_=[],">"===y[0]?_.push(1):_.push(-1)):"="===y[0]?b=y.substr(1):"~"===y[0]&&(E=!0,b=y.substr(1)),_.indexOf(D.default.compareVersions(k,b,E))>-1},y.isOS=function(y){return this.getOSName(!0)===String(y).toLowerCase()},y.isPlatform=function(y){return this.getPlatformType(!0)===String(y).toLowerCase()},y.isEngine=function(y){return this.getEngineName(!0)===String(y).toLowerCase()},y.is=function(y,_){return void 0===_&&(_=!1),this.isBrowser(y,_)||this.isOS(y)||this.isPlatform(y)},y.some=function(y){var _=this;return void 0===y&&(y=[]),y.some(function(y){return _.is(y)})},e}();_.default=j,y.exports=_.default},92:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E,k=(E=b(17))&&E.__esModule?E:{default:E},P=/version\/(\d+(\.?_?\d+)+)/i,I=[{test:[/googlebot/i],describe:function(y){var _={name:"Googlebot"},b=k.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/opera/i],describe:function(y){var _={name:"Opera"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/opr\/|opios/i],describe:function(y){var _={name:"Opera"},b=k.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/SamsungBrowser/i],describe:function(y){var _={name:"Samsung Internet for Android"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/Whale/i],describe:function(y){var _={name:"NAVER Whale Browser"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/MZBrowser/i],describe:function(y){var _={name:"MZ Browser"},b=k.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/focus/i],describe:function(y){var _={name:"Focus"},b=k.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/swing/i],describe:function(y){var _={name:"Swing"},b=k.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/coast/i],describe:function(y){var _={name:"Opera Coast"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(y){var _={name:"Opera Touch"},b=k.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/yabrowser/i],describe:function(y){var _={name:"Yandex Browser"},b=k.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/ucbrowser/i],describe:function(y){var _={name:"UC Browser"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/Maxthon|mxios/i],describe:function(y){var _={name:"Maxthon"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/epiphany/i],describe:function(y){var _={name:"Epiphany"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/puffin/i],describe:function(y){var _={name:"Puffin"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/sleipnir/i],describe:function(y){var _={name:"Sleipnir"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/k-meleon/i],describe:function(y){var _={name:"K-Meleon"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/micromessenger/i],describe:function(y){var _={name:"WeChat"},b=k.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/qqbrowser/i],describe:function(y){var _={name:/qqbrowserlite/i.test(y)?"QQ Browser Lite":"QQ Browser"},b=k.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/msie|trident/i],describe:function(y){var _={name:"Internet Explorer"},b=k.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/\sedg\//i],describe:function(y){var _={name:"Microsoft Edge"},b=k.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/edg([ea]|ios)/i],describe:function(y){var _={name:"Microsoft Edge"},b=k.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/vivaldi/i],describe:function(y){var _={name:"Vivaldi"},b=k.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/seamonkey/i],describe:function(y){var _={name:"SeaMonkey"},b=k.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/sailfish/i],describe:function(y){var _={name:"Sailfish"},b=k.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,y);return b&&(_.version=b),_}},{test:[/silk/i],describe:function(y){var _={name:"Amazon Silk"},b=k.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/phantom/i],describe:function(y){var _={name:"PhantomJS"},b=k.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/slimerjs/i],describe:function(y){var _={name:"SlimerJS"},b=k.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(y){var _={name:"BlackBerry"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/(web|hpw)[o0]s/i],describe:function(y){var _={name:"WebOS Browser"},b=k.default.getFirstMatch(P,y)||k.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/bada/i],describe:function(y){var _={name:"Bada"},b=k.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/tizen/i],describe:function(y){var _={name:"Tizen"},b=k.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/qupzilla/i],describe:function(y){var _={name:"QupZilla"},b=k.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/firefox|iceweasel|fxios/i],describe:function(y){var _={name:"Firefox"},b=k.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/electron/i],describe:function(y){var _={name:"Electron"},b=k.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/MiuiBrowser/i],describe:function(y){var _={name:"Miui"},b=k.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/chromium/i],describe:function(y){var _={name:"Chromium"},b=k.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,y)||k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/chrome|crios|crmo/i],describe:function(y){var _={name:"Chrome"},b=k.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/GSA/i],describe:function(y){var _={name:"Google Search"},b=k.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:function(y){var _=!y.test(/like android/i),b=y.test(/android/i);return _&&b},describe:function(y){var _={name:"Android Browser"},b=k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/playstation 4/i],describe:function(y){var _={name:"PlayStation 4"},b=k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/safari|applewebkit/i],describe:function(y){var _={name:"Safari"},b=k.default.getFirstMatch(P,y);return b&&(_.version=b),_}},{test:[/.*/i],describe:function(y){var _=-1!==y.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:k.default.getFirstMatch(_,y),version:k.default.getSecondMatch(_,y)}}}];_.default=I,y.exports=_.default},93:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E,k=(E=b(17))&&E.__esModule?E:{default:E},P=b(18),I=[{test:[/Roku\/DVP/],describe:function(y){var _=k.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,y);return{name:P.OS_MAP.Roku,version:_}}},{test:[/windows phone/i],describe:function(y){var _=k.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,y);return{name:P.OS_MAP.WindowsPhone,version:_}}},{test:[/windows /i],describe:function(y){var _=k.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,y),b=k.default.getWindowsVersionName(_);return{name:P.OS_MAP.Windows,version:_,versionName:b}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(y){var _={name:P.OS_MAP.iOS},b=k.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,y);return b&&(_.version=b),_}},{test:[/macintosh/i],describe:function(y){var _=k.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,y).replace(/[_\s]/g,"."),b=k.default.getMacOSVersionName(_),E={name:P.OS_MAP.MacOS,version:_};return b&&(E.versionName=b),E}},{test:[/(ipod|iphone|ipad)/i],describe:function(y){var _=k.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,y).replace(/[_\s]/g,".");return{name:P.OS_MAP.iOS,version:_}}},{test:function(y){var _=!y.test(/like android/i),b=y.test(/android/i);return _&&b},describe:function(y){var _=k.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,y),b=k.default.getAndroidVersionName(_),E={name:P.OS_MAP.Android,version:_};return b&&(E.versionName=b),E}},{test:[/(web|hpw)[o0]s/i],describe:function(y){var _=k.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,y),b={name:P.OS_MAP.WebOS};return _&&_.length&&(b.version=_),b}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(y){var _=k.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,y)||k.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,y)||k.default.getFirstMatch(/\bbb(\d+)/i,y);return{name:P.OS_MAP.BlackBerry,version:_}}},{test:[/bada/i],describe:function(y){var _=k.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,y);return{name:P.OS_MAP.Bada,version:_}}},{test:[/tizen/i],describe:function(y){var _=k.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,y);return{name:P.OS_MAP.Tizen,version:_}}},{test:[/linux/i],describe:function(){return{name:P.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:P.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(y){var _=k.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,y);return{name:P.OS_MAP.PlayStation4,version:_}}}];_.default=I,y.exports=_.default},94:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E,k=(E=b(17))&&E.__esModule?E:{default:E},P=b(18),I=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(y){var _=k.default.getFirstMatch(/(can-l01)/i,y)&&"Nova",b={type:P.PLATFORMS_MAP.mobile,vendor:"Huawei"};return _&&(b.model=_),b}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:P.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:P.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:P.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:P.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:P.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:P.PLATFORMS_MAP.tablet}}},{test:function(y){var _=y.test(/ipod|iphone/i),b=y.test(/like (ipod|iphone)/i);return _&&!b},describe:function(y){var _=k.default.getFirstMatch(/(ipod|iphone)/i,y);return{type:P.PLATFORMS_MAP.mobile,vendor:"Apple",model:_}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:P.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:P.PLATFORMS_MAP.mobile}}},{test:function(y){return"blackberry"===y.getBrowserName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(y){return"bada"===y.getBrowserName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.mobile}}},{test:function(y){return"windows phone"===y.getBrowserName()},describe:function(){return{type:P.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(y){var _=Number(String(y.getOSVersion()).split(".")[0]);return"android"===y.getOSName(!0)&&_>=3},describe:function(){return{type:P.PLATFORMS_MAP.tablet}}},{test:function(y){return"android"===y.getOSName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.mobile}}},{test:function(y){return"macos"===y.getOSName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(y){return"windows"===y.getOSName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.desktop}}},{test:function(y){return"linux"===y.getOSName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.desktop}}},{test:function(y){return"playstation 4"===y.getOSName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.tv}}},{test:function(y){return"roku"===y.getOSName(!0)},describe:function(){return{type:P.PLATFORMS_MAP.tv}}}];_.default=I,y.exports=_.default},95:function(y,_,b){"use strict";_.__esModule=!0,_.default=void 0;var E,k=(E=b(17))&&E.__esModule?E:{default:E},P=b(18),I=[{test:function(y){return"microsoft edge"===y.getBrowserName(!0)},describe:function(y){if(/\sedg\//i.test(y))return{name:P.ENGINE_MAP.Blink};var _=k.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,y);return{name:P.ENGINE_MAP.EdgeHTML,version:_}}},{test:[/trident/i],describe:function(y){var _={name:P.ENGINE_MAP.Trident},b=k.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:function(y){return y.test(/presto/i)},describe:function(y){var _={name:P.ENGINE_MAP.Presto},b=k.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:function(y){var _=y.test(/gecko/i),b=y.test(/like gecko/i);return _&&!b},describe:function(y){var _={name:P.ENGINE_MAP.Gecko},b=k.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:P.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(y){var _={name:P.ENGINE_MAP.WebKit},b=k.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,y);return b&&(_.version=b),_}}];_.default=I,y.exports=_.default}})},948:function(y,_,b){"use strict";let E,k,P,I,D,j,L,R;function r(y,_){if(null==y)return{};var b,E,k=function(y,_){if(null==y)return{};var b={};for(var E in y)if(({}).hasOwnProperty.call(y,E)){if(-1!==_.indexOf(E))continue;b[E]=y[E]}return b}(y,_);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(y);for(E=0;E<P.length;E++)b=P[E],-1===_.indexOf(b)&&({}).propertyIsEnumerable.call(y,b)&&(k[b]=y[b])}return k}function i(y,_){if(!(y instanceof _))throw TypeError("Cannot call a class as a function")}function o(y){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(y)}function a(y){var _=function(y){if("object"!=o(y)||!y)return y;var _=y[Symbol.toPrimitive];if(void 0!==_){var b=_.call(y,"string");if("object"!=o(b))return b;throw TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(y);return"symbol"==o(_)?_:_+""}function s(y,_){for(var b=0;b<_.length;b++){var E=_[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,a(E.key),E)}}function c(y,_,b){return _&&s(y.prototype,_),b&&s(y,b),Object.defineProperty(y,"prototype",{writable:!1}),y}function u(y,_){if(_&&("object"==o(_)||"function"==typeof _))return _;if(void 0!==_)throw TypeError("Derived constructors may only return object or undefined");return function(y){if(void 0===y)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(y)}function l(y){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(y)}function d(y,_){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,_){return y.__proto__=_,y})(y,_)}function f(y,_){if("function"!=typeof _&&null!==_)throw TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),_&&d(y,_)}function p(y,_,b){return(_=a(_))in y?Object.defineProperty(y,_,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[_]=b,y}function h(y,_,b,E,k,P,I){try{var D=y[P](I),j=D.value}catch(y){return void b(y)}D.done?_(j):Promise.resolve(j).then(E,k)}function v(y){return function(){var _=this,b=arguments;return new Promise(function(E,k){var P=y.apply(_,b);function a(y){h(P,E,k,a,s,"next",y)}function s(y){h(P,E,k,a,s,"throw",y)}a(void 0)})}}function g(y,_){(null==_||_>y.length)&&(_=y.length);for(var b=0,E=Array(_);b<_;b++)E[b]=y[b];return E}function m(y,_){return function(y){if(Array.isArray(y))return y}(y)||function(y,_){var b=null==y?null:"undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(null!=b){var E,k,P,I,D=[],j=!0,L=!1;try{if(P=(b=b.call(y)).next,0===_){if(Object(b)!==b)return;j=!1}else for(;!(j=(E=P.call(b)).done)&&(D.push(E.value),D.length!==_);j=!0);}catch(y){L=!0,k=y}finally{try{if(!j&&null!=b.return&&(I=b.return(),Object(I)!==I))return}finally{if(L)throw k}}return D}}(y,_)||function(y,_){if(y){if("string"==typeof y)return g(y,_);var b=({}).toString.call(y).slice(8,-1);return"Object"===b&&y.constructor&&(b=y.constructor.name),"Map"===b||"Set"===b?Array.from(y):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?g(y,_):void 0}}(y,_)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}b.r(_),b.d(_,{DAILY_ACCESS_LEVEL_FULL:function(){return ts},DAILY_ACCESS_LEVEL_LOBBY:function(){return tc},DAILY_ACCESS_LEVEL_NONE:function(){return tl},DAILY_ACCESS_UNKNOWN:function(){return to},DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:function(){return tk},DAILY_CAMERA_ERROR_CAM_IN_USE:function(){return tw},DAILY_CAMERA_ERROR_CONSTRAINTS:function(){return tO},DAILY_CAMERA_ERROR_MIC_IN_USE:function(){return tE},DAILY_CAMERA_ERROR_NOT_FOUND:function(){return tA},DAILY_CAMERA_ERROR_PERMISSIONS:function(){return tC},DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:function(){return tT},DAILY_CAMERA_ERROR_UNKNOWN:function(){return tM},DAILY_EVENT_ACCESS_STATE_UPDATED:function(){return tG},DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:function(){return rd},DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:function(){return rh},DAILY_EVENT_APP_MSG:function(){return t7},DAILY_EVENT_CAMERA_ERROR:function(){return tx},DAILY_EVENT_CPU_LOAD_CHANGE:function(){return rm},DAILY_EVENT_ERROR:function(){return rA},DAILY_EVENT_EXIT_FULLSCREEN:function(){return ry},DAILY_EVENT_FACE_COUNTS_UPDATED:function(){return rv},DAILY_EVENT_FULLSCREEN:function(){return rg},DAILY_EVENT_IFRAME_LAUNCH_CONFIG:function(){return tI},DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:function(){return tP},DAILY_EVENT_INPUT_SETTINGS_UPDATED:function(){return rC},DAILY_EVENT_JOINED_MEETING:function(){return tq},DAILY_EVENT_JOINING_MEETING:function(){return tF},DAILY_EVENT_LANG_UPDATED:function(){return rE},DAILY_EVENT_LEFT_MEETING:function(){return tU},DAILY_EVENT_LIVE_STREAMING_ERROR:function(){return rw},DAILY_EVENT_LIVE_STREAMING_STARTED:function(){return r_},DAILY_EVENT_LIVE_STREAMING_STOPPED:function(){return rS},DAILY_EVENT_LIVE_STREAMING_UPDATED:function(){return rb},DAILY_EVENT_LOADED:function(){return tR},DAILY_EVENT_LOADING:function(){return tj},DAILY_EVENT_LOAD_ATTEMPT_FAILED:function(){return tL},DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:function(){return ru},DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:function(){return rc},DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:function(){return rl},DAILY_EVENT_MEETING_SESSION_DATA_ERROR:function(){return tY},DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:function(){return tW},DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:function(){return tH},DAILY_EVENT_NETWORK_CONNECTION:function(){return rf},DAILY_EVENT_NETWORK_QUALITY_CHANGE:function(){return rp},DAILY_EVENT_NONFATAL_ERROR:function(){return rT},DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:function(){return tJ},DAILY_EVENT_PARTICIPANT_JOINED:function(){return tV},DAILY_EVENT_PARTICIPANT_LEFT:function(){return tB},DAILY_EVENT_PARTICIPANT_UPDATED:function(){return t$},DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:function(){return rk},DAILY_EVENT_RECORDING_DATA:function(){return t6},DAILY_EVENT_RECORDING_ERROR:function(){return t5},DAILY_EVENT_RECORDING_STARTED:function(){return t3},DAILY_EVENT_RECORDING_STATS:function(){return t9},DAILY_EVENT_RECORDING_STOPPED:function(){return t4},DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:function(){return t8},DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:function(){return ra},DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:function(){return rs},DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:function(){return ro},DAILY_EVENT_STARTED_CAMERA:function(){return tN},DAILY_EVENT_THEME_UPDATED:function(){return tD},DAILY_EVENT_TRACK_STARTED:function(){return tZ},DAILY_EVENT_TRACK_STOPPED:function(){return tX},DAILY_EVENT_TRANSCRIPTION_ERROR:function(){return t2},DAILY_EVENT_TRANSCRIPTION_MSG:function(){return ri},DAILY_EVENT_TRANSCRIPTION_STARTED:function(){return t0},DAILY_EVENT_TRANSCRIPTION_STOPPED:function(){return t1},DAILY_EVENT_WAITING_PARTICIPANT_ADDED:function(){return tz},DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:function(){return tK},DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:function(){return tQ},DAILY_FATAL_ERROR_CONNECTION:function(){return tS},DAILY_FATAL_ERROR_EJECTED:function(){return th},DAILY_FATAL_ERROR_EOL:function(){return t_},DAILY_FATAL_ERROR_EXP_ROOM:function(){return tm},DAILY_FATAL_ERROR_EXP_TOKEN:function(){return tv},DAILY_FATAL_ERROR_MEETING_FULL:function(){return ty},DAILY_FATAL_ERROR_NBF_ROOM:function(){return tp},DAILY_FATAL_ERROR_NBF_TOKEN:function(){return tf},DAILY_FATAL_ERROR_NOT_ALLOWED:function(){return tb},DAILY_FATAL_ERROR_NO_ROOM:function(){return tg},DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:function(){return td},DAILY_RECEIVE_SETTINGS_BASE_KEY:function(){return tu},DAILY_STATE_ERROR:function(){return e5},DAILY_STATE_JOINED:function(){return e4},DAILY_STATE_JOINING:function(){return e3},DAILY_STATE_LEFT:function(){return e9},DAILY_STATE_NEW:function(){return e0},DAILY_TRACK_STATE_BLOCKED:function(){return e8},DAILY_TRACK_STATE_INTERRUPTED:function(){return ti},DAILY_TRACK_STATE_LOADING:function(){return te},DAILY_TRACK_STATE_OFF:function(){return e6},DAILY_TRACK_STATE_PLAYABLE:function(){return ta},DAILY_TRACK_STATE_SENDABLE:function(){return e7},default:function(){return nb}});var F,V,J,et,ei,ea,eo,es,ec=b(7),el=b.n(ec),eu=Object.prototype.hasOwnProperty;function S(y,_,b){for(b of y.keys())if(w(b,_))return b}function w(y,_){var b,E,k;if(y===_)return!0;if(y&&_&&(b=y.constructor)===_.constructor){if(b===Date)return y.getTime()===_.getTime();if(b===RegExp)return y.toString()===_.toString();if(b===Array){if((E=y.length)===_.length)for(;E--&&w(y[E],_[E]););return -1===E}if(b===Set){if(y.size!==_.size)return!1;for(E of y)if((k=E)&&"object"==typeof k&&!(k=S(_,k))||!_.has(k))return!1;return!0}if(b===Map){if(y.size!==_.size)return!1;for(E of y)if((k=E[0])&&"object"==typeof k&&!(k=S(_,k))||!w(E[1],_.get(k)))return!1;return!0}if(b===ArrayBuffer)y=new Uint8Array(y),_=new Uint8Array(_);else if(b===DataView){if((E=y.byteLength)===_.byteLength)for(;E--&&y.getInt8(E)===_.getInt8(E););return -1===E}if(ArrayBuffer.isView(y)){if((E=y.byteLength)===_.byteLength)for(;E--&&y[E]===_[E];);return -1===E}if(!b||"object"==typeof y){for(b in E=0,y)if(eu.call(y,b)&&++E&&!eu.call(_,b)||!(b in _)||!w(y[b],_[b]))return!1;return Object.keys(_).length===E}}return y!=y&&_!=_}var ed=b(880),eh=b.n(ed);function T(){return Date.now()+Math.random().toString()}function M(){throw Error("Method must be implemented in subclass")}function A(y,_){return null!=_&&_.proxyUrl?_.proxyUrl+("/"===_.proxyUrl.slice(-1)?"":"/")+y.substring(8):y}function C(y){return null!=y&&y.callObjectBundleUrlOverride?y.callObjectBundleUrlOverride:A("https://c.daily.co/call-machine/versioned/".concat("0.85.0","/static/call-machine-object-bundle.js"),y)}function O(y){try{new URL(y)}catch(y){return!1}return!0}let ep="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ef="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,em="8.55.0",ev=globalThis;function N(y,_,b){let E=b||ev,k=E.__SENTRY__=E.__SENTRY__||{},P=k[em]=k[em]||{};return P[y]||(P[y]=_())}let eg=["debug","info","warn","error","log","assert","trace"],ey={};function x(y){if(!("console"in ev))return y();let _=ev.console,b={},E=Object.keys(ey);E.forEach(y=>{let E=ey[y];b[y]=_[y],_[y]=E});try{return y()}finally{E.forEach(y=>{_[y]=b[y]})}}let e_=N("logger",function(){let y=!1,_={enable:()=>{y=!0},disable:()=>{y=!1},isEnabled:()=>y};return ef?eg.forEach(b=>{_[b]=(..._)=>{y&&x(()=>{ev.console[b](`Sentry Logger [${b}]:`,..._)})}}):eg.forEach(y=>{_[y]=()=>{}}),_}),eb=[];function U(y,_){for(let b of _)b&&b.afterAllSetup&&b.afterAllSetup(y)}function B(y,_,b){if(b[_.name])ep&&e_.log(`Integration skipped because it was already installed: ${_.name}`);else{if(b[_.name]=_,-1===eb.indexOf(_.name)&&"function"==typeof _.setupOnce&&(_.setupOnce(),eb.push(_.name)),_.setup&&"function"==typeof _.setup&&_.setup(y),"function"==typeof _.preprocessEvent){let b=_.preprocessEvent.bind(_);y.on("preprocessEvent",(_,E)=>b(_,E,y))}if("function"==typeof _.processEvent){let b=_.processEvent.bind(_),E=Object.assign((_,E)=>b(_,E,y),{id:_.name});y.addEventProcessor(E)}ep&&e_.log(`Integration installed: ${_.name}`)}}let eS=Object.prototype.toString;function Y(y){switch(eS.call(y)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Z(y,Error)}}function $(y,_){return eS.call(y)===`[object ${_}]`}function q(y){return $(y,"ErrorEvent")}function W(y){return $(y,"DOMError")}function G(y){return $(y,"String")}function z(y){return"object"==typeof y&&null!==y&&"__sentry_template_string__"in y&&"__sentry_template_values__"in y}function H(y){return null===y||z(y)||"object"!=typeof y&&"function"!=typeof y}function K(y){return $(y,"Object")}function Q(y){return"undefined"!=typeof Event&&Z(y,Event)}function X(y){return!!(y&&y.then&&"function"==typeof y.then)}function Z(y,_){try{return y instanceof _}catch(y){return!1}}function ee(y){return!("object"!=typeof y||null===y||!y.__isVue&&!y._isVue)}function ne(y,_={}){if(!y)return"<unknown>";try{let b,E=y,k=[],P=0,I=0,D=Array.isArray(_)?_:_.keyAttrs,j=!Array.isArray(_)&&_.maxStringLength||80;for(;E&&P++<5&&(b=re(E,D),!("html"===b||P>1&&I+3*k.length+b.length>=j));)k.push(b),I+=b.length,E=E.parentNode;return k.reverse().join(" > ")}catch(y){return"<unknown>"}}function re(y,_){let b=[];if(!y||!y.tagName)return"";if(ev.HTMLElement&&y instanceof HTMLElement&&y.dataset){if(y.dataset.sentryComponent)return y.dataset.sentryComponent;if(y.dataset.sentryElement)return y.dataset.sentryElement}b.push(y.tagName.toLowerCase());let E=_&&_.length?_.filter(_=>y.getAttribute(_)).map(_=>[_,y.getAttribute(_)]):null;if(E&&E.length)E.forEach(y=>{b.push(`[${y[0]}="${y[1]}"]`)});else{y.id&&b.push(`#${y.id}`);let _=y.className;if(_&&G(_)){let y=_.split(/\s+/);for(let _ of y)b.push(`.${_}`)}}for(let _ of["aria-label","type","name","title","alt"]){let E=y.getAttribute(_);E&&b.push(`[${_}="${E}"]`)}return b.join("")}function ie(y,_=0){return"string"!=typeof y||0===_||y.length<=_?y:`${y.slice(0,_)}...`}function oe(y,_){if(!Array.isArray(y))return"";let b=[];for(let _=0;_<y.length;_++){let E=y[_];try{ee(E)?b.push("[VueViewModel]"):b.push(String(E))}catch(y){b.push("[value cannot be serialized]")}}return b.join(_)}function ae(y,_=[],b=!1){return _.some(_=>(function(y,_,b=!1){return!!G(y)&&($(_,"RegExp")?_.test(y):!!G(_)&&(b?y===_:y.includes(_)))})(y,_,b))}function se(y,_,b){if(!(_ in y))return;let E=y[_],k=b(E);"function"==typeof k&&ue(k,E);try{y[_]=k}catch(b){ef&&e_.log(`Failed to replace method "${_}" in object`,y)}}function ce(y,_,b){try{Object.defineProperty(y,_,{value:b,writable:!0,configurable:!0})}catch(b){ef&&e_.log(`Failed to add non-enumerable property "${_}" to object`,y)}}function ue(y,_){try{let b=_.prototype||{};y.prototype=_.prototype=b,ce(y,"__sentry_original__",_)}catch(y){}}function le(y){return y.__sentry_original__}function de(y){if(Y(y))return{message:y.message,name:y.name,stack:y.stack,...pe(y)};if(Q(y)){let _={type:y.type,target:fe(y.target),currentTarget:fe(y.currentTarget),...pe(y)};return"undefined"!=typeof CustomEvent&&Z(y,CustomEvent)&&(_.detail=y.detail),_}return y}function fe(y){try{return"undefined"!=typeof Element&&Z(y,Element)?ne(y):Object.prototype.toString.call(y)}catch(y){return"<unknown>"}}function pe(y){if("object"==typeof y&&null!==y){let _={};for(let b in y)Object.prototype.hasOwnProperty.call(y,b)&&(_[b]=y[b]);return _}return{}}function he(y){return ve(y,new Map)}function ve(y,_){if(function(y){if(!K(y))return!1;try{let _=Object.getPrototypeOf(y).constructor.name;return!_||"Object"===_}catch(y){return!0}}(y)){let b=_.get(y);if(void 0!==b)return b;let E={};for(let b of(_.set(y,E),Object.getOwnPropertyNames(y)))void 0!==y[b]&&(E[b]=ve(y[b],_));return E}if(Array.isArray(y)){let b=_.get(y);if(void 0!==b)return b;let E=[];return _.set(y,E),y.forEach(y=>{E.push(ve(y,_))}),E}return y}function ge(){let y=ev.crypto||ev.msCrypto,n=()=>16*Math.random();try{if(y&&y.randomUUID)return y.randomUUID().replace(/-/g,"");y&&y.getRandomValues&&(n=()=>{let _=new Uint8Array(1);return y.getRandomValues(_),_[0]})}catch(y){}return"10000000100040008000100000000000".replace(/[018]/g,y=>(y^(15&n())>>y/4).toString(16))}function me(y){return y.exception&&y.exception.values?y.exception.values[0]:void 0}function ye(y){let{message:_,event_id:b}=y;if(_)return _;let E=me(y);return E?E.type&&E.value?`${E.type}: ${E.value}`:E.type||E.value||b||"<unknown>":b||"<unknown>"}function _e(y,_,b){let E=y.exception=y.exception||{},k=E.values=E.values||[],P=k[0]=k[0]||{};P.value||(P.value=_||""),P.type||(P.type=b||"Error")}function be(y,_){let b=me(y);if(!b)return;let E=b.mechanism;if(b.mechanism={type:"generic",handled:!0,...E,..._},_&&"data"in _){let y={...E&&E.data,..._.data};b.mechanism.data=y}}function Se(y){if(function(y){try{return y.__sentry_captured__}catch(y){}}(y))return!0;try{ce(y,"__sentry_captured__",!0)}catch(y){}return!1}let ew=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],ke=(y={})=>({name:"InboundFilters",processEvent(_,b,E){var k;let P=E.getOptions(),I=function(y={},_={}){return{allowUrls:[...y.allowUrls||[],..._.allowUrls||[]],denyUrls:[...y.denyUrls||[],..._.denyUrls||[]],ignoreErrors:[...y.ignoreErrors||[],..._.ignoreErrors||[],...y.disableErrorDefaults?[]:ew],ignoreTransactions:[...y.ignoreTransactions||[],..._.ignoreTransactions||[]],ignoreInternal:void 0===y.ignoreInternal||y.ignoreInternal}}(y,P);return(I.ignoreInternal&&function(y){try{return"SentryError"===y.exception.values[0].type}catch(y){}return!1}(_)?(ep&&e_.warn(`Event dropped due to being internal Sentry Error.
Event: ${ye(_)}`),0):(k=I.ignoreErrors,!(_.type||!k||!k.length)&&(function(y){let _;let b=[];y.message&&b.push(y.message);try{_=y.exception.values[y.exception.values.length-1]}catch(y){}return _&&_.value&&(b.push(_.value),_.type&&b.push(`${_.type}: ${_.value}`)),b})(_).some(y=>ae(y,k)))?(ep&&e_.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ye(_)}`),0):_.type||!_.exception||!_.exception.values||0===_.exception.values.length||_.message||_.exception.values.some(y=>y.stacktrace||y.type&&"Error"!==y.type||y.value)?!function(y,_){if("transaction"!==y.type||!_||!_.length)return!1;let b=y.transaction;return!!b&&ae(b,_)}(_,I.ignoreTransactions)?!function(y,_){if(!_||!_.length)return!1;let b=Ee(y);return!!b&&ae(b,_)}(_,I.denyUrls)?function(y,_){if(!_||!_.length)return!0;let b=Ee(y);return!b||ae(b,_)}(_,I.allowUrls)||(ep&&e_.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ye(_)}.
Url: ${Ee(_)}`),0):(ep&&e_.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ye(_)}.
Url: ${Ee(_)}`),0):(ep&&e_.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ye(_)}`),0):(ep&&e_.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${ye(_)}`),0))?_:null}});function Ee(y){try{let _;try{_=y.exception.values[0].stacktrace.frames}catch(y){}return _?function(y=[]){for(let _=y.length-1;_>=0;_--){let b=y[_];if(b&&"<anonymous>"!==b.filename&&"[native code]"!==b.filename)return b.filename||null}return null}(_):null}catch(_){return ep&&e_.error(`Cannot extract url for event ${ye(y)}`),null}}function Te(){return Me(ev),ev}function Me(y){let _=y.__SENTRY__=y.__SENTRY__||{};return _.version=_.version||em,_[em]=_[em]||{}}function Ae(){return Date.now()/1e3}let eE=function(){let{performance:y}=ev;if(!y||!y.now)return Ae;let _=Date.now()-y.now(),b=null==y.timeOrigin?_:y.timeOrigin;return()=>(b+y.now())/1e3}();function Pe(y,_={}){if(_.user&&(!y.ipAddress&&_.user.ip_address&&(y.ipAddress=_.user.ip_address),y.did||_.did||(y.did=_.user.id||_.user.email||_.user.username)),y.timestamp=_.timestamp||eE(),_.abnormal_mechanism&&(y.abnormal_mechanism=_.abnormal_mechanism),_.ignoreDuration&&(y.ignoreDuration=_.ignoreDuration),_.sid&&(y.sid=32===_.sid.length?_.sid:ge()),void 0!==_.init&&(y.init=_.init),!y.did&&_.did&&(y.did=`${_.did}`),"number"==typeof _.started&&(y.started=_.started),y.ignoreDuration)y.duration=void 0;else if("number"==typeof _.duration)y.duration=_.duration;else{let _=y.timestamp-y.started;y.duration=_>=0?_:0}_.release&&(y.release=_.release),_.environment&&(y.environment=_.environment),!y.ipAddress&&_.ipAddress&&(y.ipAddress=_.ipAddress),!y.userAgent&&_.userAgent&&(y.userAgent=_.userAgent),"number"==typeof _.errors&&(y.errors=_.errors),_.status&&(y.status=_.status)}function Le(){return ge().substring(16)}function De(y,_,b=2){if(!_||"object"!=typeof _||b<=0)return _;if(y&&_&&0===Object.keys(_).length)return y;let E={...y};for(let y in _)Object.prototype.hasOwnProperty.call(_,y)&&(E[y]=De(E[y],_[y],b-1));return E}(()=>{let{performance:y}=ev;if(!y||!y.now)return;let _=y.now(),b=Date.now(),E=y.timeOrigin?Math.abs(y.timeOrigin+_-b):36e5,k=y.timing&&y.timing.navigationStart,P="number"==typeof k?Math.abs(k+_-b):36e5;(E<36e5||P<36e5)&&E<=P&&y.timeOrigin})();let ek="_sentrySpan";function je(y,_){_?ce(y,ek,_):delete y[ek]}let xe=class xe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ge(),spanId:Le()}}clone(){let y=new xe;return y._breadcrumbs=[...this._breadcrumbs],y._tags={...this._tags},y._extra={...this._extra},y._contexts={...this._contexts},this._contexts.flags&&(y._contexts.flags={values:[...this._contexts.flags.values]}),y._user=this._user,y._level=this._level,y._session=this._session,y._transactionName=this._transactionName,y._fingerprint=this._fingerprint,y._eventProcessors=[...this._eventProcessors],y._requestSession=this._requestSession,y._attachments=[...this._attachments],y._sdkProcessingMetadata={...this._sdkProcessingMetadata},y._propagationContext={...this._propagationContext},y._client=this._client,y._lastEventId=this._lastEventId,je(y,this[ek]),y}setClient(y){this._client=y}setLastEventId(y){this._lastEventId=y}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(y){this._scopeListeners.push(y)}addEventProcessor(y){return this._eventProcessors.push(y),this}setUser(y){return this._user=y||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Pe(this._session,{user:y}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(y){return this._requestSession=y,this}setTags(y){return this._tags={...this._tags,...y},this._notifyScopeListeners(),this}setTag(y,_){return this._tags={...this._tags,[y]:_},this._notifyScopeListeners(),this}setExtras(y){return this._extra={...this._extra,...y},this._notifyScopeListeners(),this}setExtra(y,_){return this._extra={...this._extra,[y]:_},this._notifyScopeListeners(),this}setFingerprint(y){return this._fingerprint=y,this._notifyScopeListeners(),this}setLevel(y){return this._level=y,this._notifyScopeListeners(),this}setTransactionName(y){return this._transactionName=y,this._notifyScopeListeners(),this}setContext(y,_){return null===_?delete this._contexts[y]:this._contexts[y]=_,this._notifyScopeListeners(),this}setSession(y){return y?this._session=y:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(y){if(!y)return this;let _="function"==typeof y?y(this):y,[b,E]=_ instanceof eC?[_.getScopeData(),_.getRequestSession()]:K(_)?[y,y.requestSession]:[],{tags:k,extra:P,user:I,contexts:D,level:j,fingerprint:L=[],propagationContext:R}=b||{};return this._tags={...this._tags,...k},this._extra={...this._extra,...P},this._contexts={...this._contexts,...D},I&&Object.keys(I).length&&(this._user=I),j&&(this._level=j),L.length&&(this._fingerprint=L),R&&(this._propagationContext=R),E&&(this._requestSession=E),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,je(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ge()}),this._notifyScopeListeners(),this}addBreadcrumb(y,_){let b="number"==typeof _?_:100;if(b<=0)return this;let E={timestamp:Ae(),...y};return this._breadcrumbs.push(E),this._breadcrumbs.length>b&&(this._breadcrumbs=this._breadcrumbs.slice(-b),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(y){return this._attachments.push(y),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[ek]}}setSDKProcessingMetadata(y){return this._sdkProcessingMetadata=De(this._sdkProcessingMetadata,y,2),this}setPropagationContext(y){return this._propagationContext={spanId:Le(),...y},this}getPropagationContext(){return this._propagationContext}captureException(y,_){let b=_&&_.event_id?_.event_id:ge();if(!this._client)return e_.warn("No client configured on scope - will not capture exception!"),b;let E=Error("Sentry syntheticException");return this._client.captureException(y,{originalException:y,syntheticException:E,..._,event_id:b},this),b}captureMessage(y,_,b){let E=b&&b.event_id?b.event_id:ge();if(!this._client)return e_.warn("No client configured on scope - will not capture message!"),E;let k=Error(y);return this._client.captureMessage(y,_,{originalException:y,syntheticException:k,...b,event_id:E},this),E}captureEvent(y,_){let b=_&&_.event_id?_.event_id:ge();return this._client?this._client.captureEvent(y,{..._,event_id:b},this):e_.warn("No client configured on scope - will not capture event!"),b}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(y=>{y(this)}),this._notifyingListeners=!1)}};let eC=xe;let Ve=class Ve{constructor(y,_){let b,E;b=y||new eC,E=_||new eC,this._stack=[{scope:b}],this._isolationScope=E}withScope(y){let _;let b=this._pushScope();try{_=y(b)}catch(y){throw this._popScope(),y}return X(_)?_.then(y=>(this._popScope(),y),y=>{throw this._popScope(),y}):(this._popScope(),_)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let y=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:y}),y}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}};function Ue(){let y=Me(Te());return y.stack=y.stack||new Ve(N("defaultCurrentScope",()=>new eC),N("defaultIsolationScope",()=>new eC))}function Be(y){return Ue().withScope(y)}function Je(y,_){let b=Ue();return b.withScope(()=>(b.getStackTop().scope=y,_(y)))}function Ye(y){return Ue().withScope(()=>y(Ue().getIsolationScope()))}function $e(y){let _=Me(y);return _.acs?_.acs:{withIsolationScope:Ye,withScope:Be,withSetScope:Je,withSetIsolationScope:(y,_)=>Ye(_),getCurrentScope:()=>Ue().getScope(),getIsolationScope:()=>Ue().getIsolationScope()}}function qe(){return $e(Te()).getCurrentScope()}function We(){return $e(Te()).getIsolationScope()}function Ge(){return qe().getClient()}function ze(y){let _=y.getPropagationContext(),{traceId:b,spanId:E,parentSpanId:k}=_;return he({trace_id:b,span_id:E,parent_span_id:k})}let eT=new WeakMap,Qe=()=>({name:"FunctionToString",setupOnce(){E=Function.prototype.toString;try{Function.prototype.toString=function(...y){let _=le(this),b=eT.has(Ge())&&void 0!==_?_:this;return E.apply(b,y)}}catch(y){}},setup(y){eT.set(y,!0)}}),eA=/\(error: (.*)\)/,eO=/captureMessage|captureException/;function tt(y){return y[y.length-1]||{}}let eM="<anonymous>";function rt(y){try{return y&&"function"==typeof y&&y.name||eM}catch(y){return eM}}function it(y){let _=y.exception;if(_){let y=[];try{return _.values.forEach(_=>{_.stacktrace.frames&&y.push(..._.stacktrace.frames)}),y}catch(y){return}}}let ot=()=>{let y;return{name:"Dedupe",processEvent(_){if(_.type)return _;try{var b;if((b=y)&&(function(y,_){let b=y.message,E=_.message;return!(!b&&!E)&&!(b&&!E||!b&&E)&&b===E&&!!st(y,_)&&!!at(y,_)}(_,b)||function(y,_){let b=ct(_),E=ct(y);return!(!b||!E)&&b.type===E.type&&b.value===E.value&&!!st(y,_)&&!!at(y,_)}(_,b)))return ep&&e_.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(y){}return y=_}}};function at(y,_){let b=it(y),E=it(_);if(!b&&!E)return!0;if(b&&!E||!b&&E||E.length!==b.length)return!1;for(let y=0;y<E.length;y++){let _=E[y],k=b[y];if(_.filename!==k.filename||_.lineno!==k.lineno||_.colno!==k.colno||_.function!==k.function)return!1}return!0}function st(y,_){let b=y.fingerprint,E=_.fingerprint;if(!b&&!E)return!0;if(b&&!E||!b&&E)return!1;try{return!(b.join("")!==E.join(""))}catch(y){return!1}}function ct(y){return y.exception&&y.exception.values&&y.exception.values[0]}let eP={},eI={};function dt(y,_){eP[y]=eP[y]||[],eP[y].push(_)}function ft(y,_){if(!eI[y]){eI[y]=!0;try{_()}catch(_){ef&&e_.error(`Error while instrumenting ${y}`,_)}}}function pt(y,_){let b=y&&eP[y];if(b)for(let E of b)try{E(_)}catch(_){ef&&e_.error(`Error while triggering instrumentation handler.
Type: ${y}
Name: ${rt(E)}
Error:`,_)}}function yt(){if(!ev.document)return;let y=pt.bind(null,"dom"),_=_t(y,!0);ev.document.addEventListener("click",_,!1),ev.document.addEventListener("keypress",_,!1),["EventTarget","Node"].forEach(_=>{let b=ev[_],E=b&&b.prototype;E&&E.hasOwnProperty&&E.hasOwnProperty("addEventListener")&&(se(E,"addEventListener",function(_){return function(b,E,k){if("click"===b||"keypress"==b)try{let E=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},P=E[b]=E[b]||{refCount:0};if(!P.handler){let E=_t(y);P.handler=E,_.call(this,b,E,k)}P.refCount++}catch(y){}return _.call(this,b,E,k)}}),se(E,"removeEventListener",function(y){return function(_,b,E){if("click"===_||"keypress"==_)try{let b=this.__sentry_instrumentation_handlers__||{},k=b[_];k&&(k.refCount--,k.refCount<=0&&(y.call(this,_,k.handler,E),k.handler=void 0,delete b[_]),0===Object.keys(b).length&&delete this.__sentry_instrumentation_handlers__)}catch(y){}return y.call(this,_,b,E)}}))})}function _t(y,_=!1){return b=>{if(!b||b._sentryCaptured)return;let E=function(y){try{return y.target}catch(y){return null}}(b);if("keypress"===b.type&&(!E||!E.tagName||"INPUT"!==E.tagName&&"TEXTAREA"!==E.tagName&&!E.isContentEditable))return;ce(b,"_sentryCaptured",!0),E&&!E._sentryId&&ce(E,"_sentryId",ge());let D="keypress"===b.type?"input":b.type;(function(y){if(y.type!==P)return!1;try{if(!y.target||y.target._sentryId!==I)return!1}catch(y){}return!0})(b)||(y({event:b,name:D,global:_}),P=b.type,I=E?E._sentryId:void 0),clearTimeout(k),k=ev.setTimeout(()=>{I=void 0,P=void 0},1e3)}}let eD="__sentry_xhr_v3__";function St(){if(!ev.XMLHttpRequest)return;let y=XMLHttpRequest.prototype;y.open=new Proxy(y.open,{apply(y,_,b){let E=Error(),k=1e3*eE(),P=G(b[0])?b[0].toUpperCase():void 0,I=function(y){if(G(y))return y;try{return y.toString()}catch(y){}}(b[1]);if(!P||!I)return y.apply(_,b);_[eD]={method:P,url:I,request_headers:{}},"POST"===P&&I.match(/sentry_key/)&&(_.__sentry_own_request__=!0);let s=()=>{let y=_[eD];if(y&&4===_.readyState){try{y.status_code=_.status}catch(y){}pt("xhr",{endTimestamp:1e3*eE(),startTimestamp:k,xhr:_,virtualError:E})}};return"onreadystatechange"in _&&"function"==typeof _.onreadystatechange?_.onreadystatechange=new Proxy(_.onreadystatechange,{apply:(y,_,b)=>(s(),y.apply(_,b))}):_.addEventListener("readystatechange",s),_.setRequestHeader=new Proxy(_.setRequestHeader,{apply(y,_,b){let[E,k]=b,P=_[eD];return P&&G(E)&&G(k)&&(P.request_headers[E.toLowerCase()]=k),y.apply(_,b)}}),y.apply(_,b)}}),y.send=new Proxy(y.send,{apply(y,_,b){let E=_[eD];return E&&(void 0!==b[0]&&(E.body=b[0]),pt("xhr",{startTimestamp:1e3*eE(),xhr:_})),y.apply(_,b)}})}function Et(y){let _="history";dt(_,y),ft(_,Tt)}function Tt(){if(!function(){let y=ev.chrome,_=y&&y.app&&y.app.runtime,b="history"in ev&&!!ev.history.pushState&&!!ev.history.replaceState;return!_&&b}())return;let y=ev.onpopstate;function t(y){return function(..._){let b=_.length>2?_[2]:void 0;if(b){let y=D,_=String(b);D=_,pt("history",{from:y,to:_})}return y.apply(this,_)}}ev.onpopstate=function(..._){let b=ev.location.href,E=D;if(D=b,pt("history",{from:E,to:b}),y)try{return y.apply(this,_)}catch(y){}},se(ev.history,"pushState",t),se(ev.history,"replaceState",t)}function Mt(){"console"in ev&&eg.forEach(function(y){y in ev.console&&se(ev.console,y,function(_){return ey[y]=_,function(..._){pt("console",{args:_,level:y});let b=ey[y];b&&b.apply(ev.console,_)}})})}function Ct(y){return y&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(y.toString())}function Ot(y,_=!1){_&&!function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in ev))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(y){return!1}}())return!1;if(Ct(ev.fetch))return!0;let y=!1,_=ev.document;if(_&&"function"==typeof _.createElement)try{let b=_.createElement("iframe");b.hidden=!0,_.head.appendChild(b),b.contentWindow&&b.contentWindow.fetch&&(y=Ct(b.contentWindow.fetch)),_.head.removeChild(b)}catch(y){ef&&e_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",y)}return y}()||se(ev,"fetch",function(_){return function(...b){let E=Error(),{method:k,url:P}=function(y){if(0===y.length)return{method:"GET",url:""};if(2===y.length){let[_,b]=y;return{url:It(_),method:Pt(b,"method")?String(b.method).toUpperCase():"GET"}}let _=y[0];return{url:It(_),method:Pt(_,"method")?String(_.method).toUpperCase():"GET"}}(b),I={args:b,fetchData:{method:k,url:P},startTimestamp:1e3*eE(),virtualError:E};return y||pt("fetch",{...I}),_.apply(ev,b).then(async _=>(y?y(_):pt("fetch",{...I,endTimestamp:1e3*eE(),response:_}),_),y=>{throw pt("fetch",{...I,endTimestamp:1e3*eE(),error:y}),Y(y)&&void 0===y.stack&&(y.stack=E.stack,ce(y,"framesToPop",1)),y})}})}function Pt(y,_){return!!y&&"object"==typeof y&&!!y[_]}function It(y){return"string"==typeof y?y:y?Pt(y,"url")?y.url:y.toString?y.toString():"":""}function Dt(y,_){let b=Ge(),E=We();if(!b)return;let{beforeBreadcrumb:k=null,maxBreadcrumbs:P=100}=b.getOptions();if(P<=0)return;let I={timestamp:Ae(),...y},D=k?x(()=>k(I,_)):I;null!==D&&(b.emit&&b.emit("beforeAddBreadcrumb",D,_),E.addBreadcrumb(D,P))}function Nt(y){return void 0===y?void 0:y>=400&&y<500?"warning":y>=500?"error":void 0}function jt(y){if(!y)return{};let _=y.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!_)return{};let b=_[6]||"",E=_[8]||"";return{host:_[4],path:_[5],protocol:_[2],search:b,hash:E,relative:_[5]+b+E}}let ej="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,eL="production";function Vt(y){return new Bt(_=>{_(y)})}function Ut(y){return new Bt((_,b)=>{b(y)})}(F=es||(es={}))[F.PENDING=0]="PENDING",F[F.RESOLVED=1]="RESOLVED",F[F.REJECTED=2]="REJECTED";let Bt=class Bt{constructor(y){Bt.prototype.__init.call(this),Bt.prototype.__init2.call(this),Bt.prototype.__init3.call(this),Bt.prototype.__init4.call(this),this._state=es.PENDING,this._handlers=[];try{y(this._resolve,this._reject)}catch(y){this._reject(y)}}then(y,_){return new Bt((b,E)=>{this._handlers.push([!1,_=>{if(y)try{b(y(_))}catch(y){E(y)}else b(_)},y=>{if(_)try{b(_(y))}catch(y){E(y)}else E(y)}]),this._executeHandlers()})}catch(y){return this.then(y=>y,y)}finally(y){return new Bt((_,b)=>{let E,k;return this.then(_=>{k=!1,E=_,y&&y()},_=>{k=!0,E=_,y&&y()}).then(()=>{k?b(E):_(E)})})}__init(){this._resolve=y=>{this._setResult(es.RESOLVED,y)}}__init2(){this._reject=y=>{this._setResult(es.REJECTED,y)}}__init3(){this._setResult=(y,_)=>{this._state===es.PENDING&&(X(_)?_.then(this._resolve,this._reject):(this._state=y,this._value=_,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===es.PENDING)return;let y=this._handlers.slice();this._handlers=[],y.forEach(y=>{y[0]||(this._state===es.RESOLVED&&y[1](this._value),this._state===es.REJECTED&&y[2](this._value),y[0]=!0)})}}};function Jt(y,_,b,E=0){return new Bt((k,P)=>{let I=y[E];if(null===_||"function"!=typeof I)k(_);else{let D=I({..._},b);ep&&I.id&&null===D&&e_.log(`Event processor "${I.id}" dropped event`),X(D)?D.then(_=>Jt(y,_,b,E+1).then(k)).then(null,P):Jt(y,D,b,E+1).then(k).then(null,P)}})}function Wt(y,_=100,b=1/0){try{return zt("",y,_,b)}catch(y){return{ERROR:`**non-serializable** (${y})`}}}function Gt(y,_=3,b=102400){let E=Wt(y,_);return~-encodeURI(JSON.stringify(E)).split(/%..|./).length>b?Gt(y,_-1,b):E}function zt(y,_,b=1/0,E=1/0,k=function(){let y="function"==typeof WeakSet,_=y?new WeakSet:[];return[function(b){if(y)return!!_.has(b)||(_.add(b),!1);for(let y=0;y<_.length;y++)if(_[y]===b)return!0;return _.push(b),!1},function(b){if(y)_.delete(b);else for(let y=0;y<_.length;y++)if(_[y]===b){_.splice(y,1);break}}]}()){let[P,I]=k;if(null==_||["boolean","string"].includes(typeof _)||"number"==typeof _&&Number.isFinite(_))return _;let D=function(y,_){try{if("domain"===y&&_&&"object"==typeof _&&_._events)return"[Domain]";if("domainEmitter"===y)return"[DomainEmitter]";if("undefined"!=typeof window&&_===window)return"[Global]";if("undefined"!=typeof window&&_===window)return"[Window]";if("undefined"!=typeof document&&_===document)return"[Document]";if(ee(_))return"[VueViewModel]";if(K(_)&&"nativeEvent"in _&&"preventDefault"in _&&"stopPropagation"in _)return"[SyntheticEvent]";if("number"==typeof _&&!Number.isFinite(_))return`[${_}]`;if("function"==typeof _)return`[Function: ${rt(_)}]`;if("symbol"==typeof _)return`[${String(_)}]`;if("bigint"==typeof _)return`[BigInt: ${String(_)}]`;let b=function(y){let _=Object.getPrototypeOf(y);return _?_.constructor.name:"null prototype"}(_);return/^HTML(\w*)Element$/.test(b)?`[HTMLElement: ${b}]`:`[object ${b}]`}catch(y){return`**non-serializable** (${y})`}}(y,_);if(!D.startsWith("[object "))return D;if(_.__sentry_skip_normalization__)return _;let j="number"==typeof _.__sentry_override_normalization_depth__?_.__sentry_override_normalization_depth__:b;if(0===j)return D.replace("object ","");if(P(_))return"[Circular ~]";if(_&&"function"==typeof _.toJSON)try{return zt("",_.toJSON(),j-1,E,k)}catch(y){}let L=Array.isArray(_)?[]:{},R=0,F=de(_);for(let y in F){if(!Object.prototype.hasOwnProperty.call(F,y))continue;if(R>=E){L[y]="[MaxProperties ~]";break}let _=F[y];L[y]=zt(y,_,j-1,E,k),R++}return I(_),L}let eR=/^sentry-/;function Kt(y){return y.split(",").map(y=>y.split("=").map(y=>decodeURIComponent(y.trim()))).reduce((y,[_,b])=>(_&&b&&(y[_]=b),y),{})}function Qt(y){let _=y._sentryMetrics;if(!_)return;let b={};for(let[,[y,E]]of _)(b[y]||(b[y]=[])).push(he(E));return b}let eN=!1;function Zt(y){let{spanId:_,traceId:b,isRemote:E}=y.spanContext();return he({parent_span_id:E?_:nn(y).parent_span_id,span_id:E?Le():_,trace_id:b})}function en(y){return"number"==typeof y?tn(y):Array.isArray(y)?y[0]+y[1]/1e9:y instanceof Date?tn(y.getTime()):eE()}function tn(y){return y>9999999999?y/1e3:y}function nn(y){if("function"==typeof y.getSpanJSON)return y.getSpanJSON();try{let{spanId:_,traceId:b}=y.spanContext();if(y.attributes&&y.startTime&&y.name&&y.endTime&&y.status){let{attributes:E,startTime:k,name:P,endTime:I,parentSpanId:D,status:j}=y;return he({span_id:_,trace_id:b,data:E,description:P,parent_span_id:D,start_timestamp:en(k),timestamp:en(I)||void 0,status:rn(j),op:E["sentry.op"],origin:E["sentry.origin"],_metrics_summary:Qt(y)})}return{span_id:_,trace_id:b}}catch(y){return{}}}function rn(y){if(y&&0!==y.code)return 1===y.code?"ok":y.message||"unknown_error"}function on(y){return y._sentryRootSpan||y}function an(y,_){let b=_.getOptions(),{publicKey:E}=_.getDsn()||{},k=he({environment:b.environment||eL,release:b.release,public_key:E,trace_id:y});return _.emit("createDsc",k),k}function sn(y){let _=Ge();if(!_)return{};let b=on(y),E=b._frozenDsc;if(E)return E;let k=b.spanContext().traceState,P=k&&k.get("sentry.dsc"),I=P&&function(y){let _=function(y){if(y&&(G(y)||Array.isArray(y)))return Array.isArray(y)?y.reduce((y,_)=>{let b=Kt(_);return Object.entries(b).forEach(([_,b])=>{y[_]=b}),y},{}):Kt(y)}(y);if(!_)return;let b=Object.entries(_).reduce((y,[_,b])=>(_.match(eR)&&(y[_.slice(7)]=b),y),{});return Object.keys(b).length>0?b:void 0}(P);if(I)return I;let D=an(y.spanContext().traceId,_),j=nn(b),L=j.data||{},R=L["sentry.sample_rate"];null!=R&&(D.sample_rate=`${R}`);let F=L["sentry.source"],V=j.description;return"url"!==F&&V&&(D.transaction=V),function(){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let y=Ge(),_=y&&y.getOptions();return!!_&&(_.enableTracing||"tracesSampleRate"in _||"tracesSampler"in _)}()&&(D.sampled=String(function(y){let{traceFlags:_}=y.spanContext();return 1===_}(b))),_.emit("createDsc",D,b),D}function cn(y,_){let{extra:b,tags:E,user:k,contexts:P,level:I,sdkProcessingMetadata:D,breadcrumbs:j,fingerprint:L,eventProcessors:R,attachments:F,propagationContext:V,transactionName:J,span:et}=_;un(y,"extra",b),un(y,"tags",E),un(y,"user",k),un(y,"contexts",P),y.sdkProcessingMetadata=De(y.sdkProcessingMetadata,D,2),I&&(y.level=I),J&&(y.transactionName=J),et&&(y.span=et),j.length&&(y.breadcrumbs=[...y.breadcrumbs,...j]),L.length&&(y.fingerprint=[...y.fingerprint,...L]),R.length&&(y.eventProcessors=[...y.eventProcessors,...R]),F.length&&(y.attachments=[...y.attachments,...F]),y.propagationContext={...y.propagationContext,...V}}function un(y,_,b){y[_]=De(y[_],b,1)}function ln(y,_,b,E,k,P){let{normalizeDepth:I=3,normalizeMaxBreadth:D=1e3}=y,F={..._,event_id:_.event_id||b.event_id||ge(),timestamp:_.timestamp||Ae()},V=b.integrations||y.integrations.map(y=>y.name);(function(y,_){let{environment:b,release:E,dist:k,maxValueLength:P=250}=_;y.environment=y.environment||b||eL,!y.release&&E&&(y.release=E),!y.dist&&k&&(y.dist=k),y.message&&(y.message=ie(y.message,P));let I=y.exception&&y.exception.values&&y.exception.values[0];I&&I.value&&(I.value=ie(I.value,P));let D=y.request;D&&D.url&&(D.url=ie(D.url,P))})(F,y),V.length>0&&(F.sdk=F.sdk||{},F.sdk.integrations=[...F.sdk.integrations||[],...V]),k&&k.emit("applyFrameMetadata",_),void 0===_.type&&function(y,_){let b=function(y){let _=ev._sentryDebugIds;if(!_)return{};let b=Object.keys(_);return R&&b.length===L||(L=b.length,R=b.reduce((b,E)=>{j||(j={});let k=j[E];if(k)b[k[0]]=k[1];else{let k=y(E);for(let y=k.length-1;y>=0;y--){let P=k[y],I=P&&P.filename,D=_[E];if(I&&D){b[I]=D,j[E]=[I,D];break}}}return b},{})),R}(_);try{y.exception.values.forEach(y=>{y.stacktrace.frames.forEach(y=>{b&&y.filename&&(y.debug_id=b[y.filename])})})}catch(y){}}(F,y.stackParser);let J=function(y,_){if(!_)return y;let b=y?y.clone():new eC;return b.update(_),b}(E,b.captureContext);b.mechanism&&be(F,b.mechanism);let et=k?k.getEventProcessors():[],ei=N("globalScope",()=>new eC).getScopeData();P&&cn(ei,P.getScopeData()),J&&cn(ei,J.getScopeData());let ea=[...b.attachments||[],...ei.attachments];return ea.length&&(b.attachments=ea),function(y,_){let{fingerprint:b,span:E,breadcrumbs:k,sdkProcessingMetadata:P}=_;(function(y,_){let{extra:b,tags:E,user:k,contexts:P,level:I,transactionName:D}=_,j=he(b);j&&Object.keys(j).length&&(y.extra={...j,...y.extra});let L=he(E);L&&Object.keys(L).length&&(y.tags={...L,...y.tags});let R=he(k);R&&Object.keys(R).length&&(y.user={...R,...y.user});let F=he(P);F&&Object.keys(F).length&&(y.contexts={...F,...y.contexts}),I&&(y.level=I),D&&"transaction"!==y.type&&(y.transaction=D)})(y,_),E&&function(y,_){y.contexts={trace:Zt(_),...y.contexts},y.sdkProcessingMetadata={dynamicSamplingContext:sn(_),...y.sdkProcessingMetadata};let b=nn(on(_)).description;b&&!y.transaction&&"transaction"===y.type&&(y.transaction=b)}(y,E),y.fingerprint=y.fingerprint?Array.isArray(y.fingerprint)?y.fingerprint:[y.fingerprint]:[],b&&(y.fingerprint=y.fingerprint.concat(b)),y.fingerprint&&!y.fingerprint.length&&delete y.fingerprint,function(y,_){let b=[...y.breadcrumbs||[],..._];y.breadcrumbs=b.length?b:void 0}(y,k),y.sdkProcessingMetadata={...y.sdkProcessingMetadata,...P}}(F,ei),Jt([...et,...ei.eventProcessors],F,b).then(y=>(y&&function(y){let _={};try{y.exception.values.forEach(y=>{y.stacktrace.frames.forEach(y=>{y.debug_id&&(y.abs_path?_[y.abs_path]=y.debug_id:y.filename&&(_[y.filename]=y.debug_id),delete y.debug_id)})})}catch(y){}if(0===Object.keys(_).length)return;y.debug_meta=y.debug_meta||{},y.debug_meta.images=y.debug_meta.images||[];let b=y.debug_meta.images;Object.entries(_).forEach(([y,_])=>{b.push({type:"sourcemap",code_file:y,debug_id:_})})}(y),"number"==typeof I&&I>0?function(y,_,b){if(!y)return null;let E={...y,...y.breadcrumbs&&{breadcrumbs:y.breadcrumbs.map(y=>({...y,...y.data&&{data:Wt(y.data,_,b)}}))},...y.user&&{user:Wt(y.user,_,b)},...y.contexts&&{contexts:Wt(y.contexts,_,b)},...y.extra&&{extra:Wt(y.extra,_,b)}};return y.contexts&&y.contexts.trace&&E.contexts&&(E.contexts.trace=y.contexts.trace,y.contexts.trace.data&&(E.contexts.trace.data=Wt(y.contexts.trace.data,_,b))),y.spans&&(E.spans=y.spans.map(y=>({...y,...y.data&&{data:Wt(y.data,_,b)}}))),y.contexts&&y.contexts.flags&&E.contexts&&(E.contexts.flags=Wt(y.contexts.flags,3,b)),E}(y,I,D):y))}let ex=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function fn(y,_){return qe().captureEvent(y,_)}function pn(y){let _=Ge(),b=We(),E=qe(),{release:k,environment:P=eL}=_&&_.getOptions()||{},{userAgent:I}=ev.navigator||{},D=function(y){let _=eE(),b={sid:ge(),init:!0,timestamp:_,started:_,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>he({sid:`${b.sid}`,init:b.init,started:new Date(1e3*b.started).toISOString(),timestamp:new Date(1e3*b.timestamp).toISOString(),status:b.status,errors:b.errors,did:"number"==typeof b.did||"string"==typeof b.did?`${b.did}`:void 0,duration:b.duration,abnormal_mechanism:b.abnormal_mechanism,attrs:{release:b.release,environment:b.environment,ip_address:b.ipAddress,user_agent:b.userAgent}})};return y&&Pe(b,y),b}({release:k,environment:P,user:E.getUser()||b.getUser(),...I&&{userAgent:I},...y}),j=b.getSession();return j&&"ok"===j.status&&Pe(j,{status:"exited"}),hn(),b.setSession(D),E.setSession(D),D}function hn(){let y;let _=We(),b=qe(),E=b.getSession()||_.getSession();E&&(y={},"ok"===E.status&&(y={status:"exited"}),Pe(E,y)),vn(),_.setSession(),b.setSession()}function vn(){let y=We(),_=qe(),b=Ge(),E=_.getSession()||y.getSession();E&&b&&b.captureSession(E)}function gn(y=!1){y?hn():vn()}let eF=0;function bn(y,_={}){if("function"!=typeof y)return y;try{let _=y.__sentry_wrapped__;if(_)return"function"==typeof _?_:y;if(le(y))return y}catch(_){return y}let n=function(...b){try{let E=b.map(y=>bn(y,_));return y.apply(this,E)}catch(y){throw eF++,setTimeout(()=>{eF--}),function(...y){let _=$e(Te());if(2===y.length){let[b,E]=y;return b?_.withSetScope(b,E):_.withScope(E)}_.withScope(y[0])}(E=>{E.addEventProcessor(y=>(_.mechanism&&(_e(y,void 0,void 0),be(y,_.mechanism)),y.extra={...y.extra,arguments:b},y)),qe().captureException(y,function(y){if(y)return y instanceof eC||"function"==typeof y||Object.keys(y).some(y=>ex.includes(y))?{captureContext:y}:y}(void 0))}),y}};try{for(let _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(n[_]=y[_])}catch(y){}ue(n,y),ce(y,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>y.name})}catch(y){}return n}let Sn=(y={})=>{let _={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...y};return{name:"Breadcrumbs",setup(y){var b;_.console&&function(y){let _="console";dt(_,y),ft(_,Mt)}(function(_){var b;if(Ge()!==y)return;let E={category:"console",data:{arguments:_.args,logger:"console"},level:"warn"===(b=_.level)?"warning":["fatal","error","warning","log","info","debug"].includes(b)?b:"log",message:oe(_.args," ")};if("assert"===_.level){if(!1!==_.args[0])return;E.message=`Assertion failed: ${oe(_.args.slice(1)," ")||"console.assert"}`,E.data.arguments=_.args.slice(1)}Dt(E,{input:_.args,level:_.level})}),_.dom&&(b=_.dom,dt("dom",function(_){if(Ge()!==y)return;let E,k,P="object"==typeof b?b.serializeAttribute:void 0,I="object"==typeof b&&"number"==typeof b.maxStringLength?b.maxStringLength:void 0;I&&I>1024&&(ej&&e_.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${I} was configured. Sentry will use 1024 instead.`),I=1024),"string"==typeof P&&(P=[P]);try{let y=_.event,b=y&&y.target?y.target:y;E=ne(b,{keyAttrs:P,maxStringLength:I}),k=function(y){if(!ev.HTMLElement)return null;let _=y;for(let y=0;y<5&&_;y++){if(_ instanceof HTMLElement){if(_.dataset.sentryComponent)return _.dataset.sentryComponent;if(_.dataset.sentryElement)return _.dataset.sentryElement}_=_.parentNode}return null}(b)}catch(y){E="<unknown>"}if(0===E.length)return;let D={category:`ui.${_.name}`,message:E};k&&(D.data={"ui.component_name":k}),Dt(D,{event:_.event,name:_.name,global:_.global})}),ft("dom",yt)),_.xhr&&(dt("xhr",function(_){if(Ge()!==y)return;let{startTimestamp:b,endTimestamp:E}=_,k=_.xhr[eD];if(!b||!E||!k)return;let{method:P,url:I,status_code:D,body:j}=k,L={xhr:_.xhr,input:j,startTimestamp:b,endTimestamp:E};Dt({category:"xhr",data:{method:P,url:I,status_code:D},type:"http",level:Nt(D)},L)}),ft("xhr",St)),_.fetch&&function(y){let _="fetch";dt(_,y),ft(_,()=>Ot(void 0,void 0))}(function(_){if(Ge()!==y)return;let{startTimestamp:b,endTimestamp:E}=_;if(E&&(!_.fetchData.url.match(/sentry_key/)||"POST"!==_.fetchData.method)){if(_.error)Dt({category:"fetch",data:_.fetchData,level:"error",type:"http"},{data:_.error,input:_.args,startTimestamp:b,endTimestamp:E});else{let y=_.response,k={..._.fetchData,status_code:y&&y.status},P={input:_.args,response:y,startTimestamp:b,endTimestamp:E};Dt({category:"fetch",data:k,type:"http",level:Nt(k.status_code)},P)}}}),_.history&&Et(function(_){if(Ge()!==y)return;let b=_.from,E=_.to,k=jt(ev.location.href),P=b?jt(b):void 0,I=jt(E);P&&P.path||(P=k),k.protocol===I.protocol&&k.host===I.host&&(E=I.relative),k.protocol===P.protocol&&k.host===P.host&&(b=P.relative),Dt({category:"navigation",data:{from:b,to:E}})}),_.sentry&&y.on("beforeSendEvent",function(_){Ge()===y&&Dt({category:"sentry."+("transaction"===_.type?"transaction":"event"),event_id:_.event_id,level:_.level,message:ye(_)},{event:_})})}}},eq=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],kn=(y={})=>{let _={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...y};return{name:"BrowserApiErrors",setupOnce(){_.setTimeout&&se(ev,"setTimeout",En),_.setInterval&&se(ev,"setInterval",En),_.requestAnimationFrame&&se(ev,"requestAnimationFrame",Tn),_.XMLHttpRequest&&"XMLHttpRequest"in ev&&se(XMLHttpRequest.prototype,"send",Mn);let y=_.eventTarget;y&&(Array.isArray(y)?y:eq).forEach(An)}}};function En(y){return function(..._){let b=_[0];return _[0]=bn(b,{mechanism:{data:{function:rt(y)},handled:!1,type:"instrument"}}),y.apply(this,_)}}function Tn(y){return function(_){return y.apply(this,[bn(_,{mechanism:{data:{function:"requestAnimationFrame",handler:rt(y)},handled:!1,type:"instrument"}})])}}function Mn(y){return function(..._){let b=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(y=>{y in b&&"function"==typeof b[y]&&se(b,y,function(_){let b={mechanism:{data:{function:y,handler:rt(_)},handled:!1,type:"instrument"}},E=le(_);return E&&(b.mechanism.data.handler=rt(E)),bn(_,b)})}),y.apply(this,_)}}function An(y){let _=ev[y],b=_&&_.prototype;b&&b.hasOwnProperty&&b.hasOwnProperty("addEventListener")&&(se(b,"addEventListener",function(_){return function(b,E,k){try{"function"==typeof E.handleEvent&&(E.handleEvent=bn(E.handleEvent,{mechanism:{data:{function:"handleEvent",handler:rt(E),target:y},handled:!1,type:"instrument"}}))}catch(y){}return _.apply(this,[b,bn(E,{mechanism:{data:{function:"addEventListener",handler:rt(E),target:y},handled:!1,type:"instrument"}}),k])}}),se(b,"removeEventListener",function(y){return function(_,b,E){try{let k=b.__sentry_wrapped__;k&&y.call(this,_,k,E)}catch(y){}return y.call(this,_,b,E)}}))}let eU=null;function On(){eU=ev.onerror,ev.onerror=function(y,_,b,E,k){return pt("error",{column:E,error:k,line:b,msg:y,url:_}),!!eU&&eU.apply(this,arguments)},ev.onerror.__SENTRY_INSTRUMENTED__=!0}let eV=null;function In(){eV=ev.onunhandledrejection,ev.onunhandledrejection=function(y){return pt("unhandledrejection",y),!eV||eV.apply(this,arguments)},ev.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Ln(y,_){let b=Nn(y,_),E={type:xn(_),value:Fn(_)};return b.length&&(E.stacktrace={frames:b}),void 0===E.type&&""===E.value&&(E.value="Unrecoverable error caught"),E}function Dn(y,_){return{exception:{values:[Ln(y,_)]}}}function Nn(y,_){let b=_.stacktrace||_.stack||"",E=_&&e$.test(_.message)?1:0,k="number"==typeof _.framesToPop?_.framesToPop:0;try{return y(b,E,k)}catch(y){}return[]}let e$=/Minified React error #\d+;/i;function Rn(y){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&y instanceof WebAssembly.Exception}function xn(y){let _=y&&y.name;return!_&&Rn(y)?y.message&&Array.isArray(y.message)&&2==y.message.length?y.message[0]:"WebAssembly.Exception":_}function Fn(y){let _=y&&y.message;return _?_.error&&"string"==typeof _.error.message?_.error.message:Rn(y)&&Array.isArray(y.message)&&2==y.message.length?y.message[1]:_:"No error message"}function Vn(y,_,b,E,k){let P;if(q(_)&&_.error)return Dn(y,_.error);if(W(_)||$(_,"DOMException")){if("stack"in _)P=Dn(y,_);else{let k=_.name||(W(_)?"DOMError":"DOMException"),I=_.message?`${k}: ${_.message}`:k;_e(P=Un(y,I,b,E),I)}return"code"in _&&(P.tags={...P.tags,"DOMException.code":`${_.code}`}),P}return Y(_)?Dn(y,_):(K(_)||Q(_)?be(P=function(y,_,b,E){let k=Ge(),P=k&&k.getOptions().normalizeDepth,I=function(y){for(let _ in y)if(Object.prototype.hasOwnProperty.call(y,_)){let b=y[_];if(b instanceof Error)return b}}(_),D={__serialized__:Gt(_,P)};if(I)return{exception:{values:[Ln(y,I)]},extra:D};let j={exception:{values:[{type:Q(_)?_.constructor.name:E?"UnhandledRejection":"Error",value:Bn(_,{isUnhandledRejection:E})}]},extra:D};if(b){let _=Nn(y,b);_.length&&(j.exception.values[0].stacktrace={frames:_})}return j}(y,_,b,k),{synthetic:!0}):(_e(P=Un(y,_,b,E),`${_}`,void 0),be(P,{synthetic:!0})),P)}function Un(y,_,b,E){let k={};if(E&&b){let E=Nn(y,b);E.length&&(k.exception={values:[{value:_,stacktrace:{frames:E}}]}),be(k,{synthetic:!0})}if(z(_)){let{__sentry_template_string__:y,__sentry_template_values__:b}=_;return k.logentry={message:y,params:b},k}return k.message=_,k}function Bn(y,{isUnhandledRejection:_}){let b=function(y,_=40){let b=Object.keys(de(y));b.sort();let E=b[0];if(!E)return"[object has no keys]";if(E.length>=_)return ie(E,_);for(let y=b.length;y>0;y--){let E=b.slice(0,y).join(", ");if(!(E.length>_))return y===b.length?E:ie(E,_)}return""}(y),E=_?"promise rejection":"exception";return q(y)?`Event \`ErrorEvent\` captured as ${E} with message \`${y.message}\``:Q(y)?`Event \`${function(y){try{let _=Object.getPrototypeOf(y);return _?_.constructor.name:void 0}catch(y){}}(y)}\` (type=${y.type}) captured as ${E}`:`Object captured as ${E} with keys: ${b}`}let Jn=(y={})=>{let _={onerror:!0,onunhandledrejection:!0,...y};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(y){_.onerror&&(function(){let _="error";dt(_,_=>{let{stackParser:b,attachStacktrace:E}=$n();if(Ge()!==y||eF>0)return;let{msg:k,url:P,line:I,column:D,error:j}=_,L=function(y,_,b,E){let k=y.exception=y.exception||{},P=k.values=k.values||[],I=P[0]=P[0]||{},D=I.stacktrace=I.stacktrace||{},j=D.frames=D.frames||[],L=G(_)&&_.length>0?_:function(){try{return ev.document.location.href}catch(y){return""}}();return 0===j.length&&j.push({colno:E,filename:L,function:"?",in_app:!0,lineno:b}),y}(Vn(b,j||k,void 0,E,!1),P,I,D);L.level="error",fn(L,{originalException:j,mechanism:{handled:!1,type:"onerror"}})}),ft(_,On)}(),Yn("onerror")),_.onunhandledrejection&&(function(){let _="unhandledrejection";dt(_,_=>{let{stackParser:b,attachStacktrace:E}=$n();if(Ge()!==y||eF>0)return;let k=function(y){if(H(y))return y;try{if("reason"in y)return y.reason;if("detail"in y&&"reason"in y.detail)return y.detail.reason}catch(y){}return y}(_),P=H(k)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(k)}`}]}}:Vn(b,k,void 0,E,!0);P.level="error",fn(P,{originalException:k,mechanism:{handled:!1,type:"onunhandledrejection"}})}),ft(_,In)}(),Yn("onunhandledrejection"))}}};function Yn(y){ej&&e_.log(`Global Handler attached: ${y}`)}function $n(){let y=Ge();return y&&y.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function qn(y,_,b=250,E,k,P,I){if(!(P.exception&&P.exception.values&&I&&Z(I.originalException,Error)))return;let D=P.exception.values.length>0?P.exception.values[P.exception.values.length-1]:void 0;D&&(P.exception.values=Wn(y,_,k,I.originalException,E,P.exception.values,D,0).map(y=>(y.value&&(y.value=ie(y.value,b)),y)))}function Wn(y,_,b,E,k,P,I,D){if(P.length>=b+1)return P;let j=[...P];if(Z(E[k],Error)){Gn(I,D);let P=y(_,E[k]),L=j.length;zn(P,k,L,D),j=Wn(y,_,b,E[k],k,[P,...j],P,L)}return Array.isArray(E.errors)&&E.errors.forEach((E,P)=>{if(Z(E,Error)){Gn(I,D);let L=y(_,E),R=j.length;zn(L,`errors[${P}]`,R,D),j=Wn(y,_,b,E,k,[L,...j],L,R)}}),j}function Gn(y,_){y.mechanism=y.mechanism||{type:"generic",handled:!0},y.mechanism={...y.mechanism,..."AggregateError"===y.type&&{is_exception_group:!0},exception_id:_}}function zn(y,_,b,E){y.mechanism=y.mechanism||{type:"generic",handled:!0},y.mechanism={...y.mechanism,type:"chained",source:_,exception_id:b,parent_id:E}}let Hn=(y={})=>{let _=y.limit||5,b=y.key||"cause";return{name:"LinkedErrors",preprocessEvent(y,E,k){let P=k.getOptions();qn(Ln,P.stackParser,P.maxValueLength,b,_,y,E)}}};function Kn(y){let _=[ke(),Qe(),kn(),Sn(),Jn(),Hn(),ot(),{name:"HttpContext",preprocessEvent(y){if(!ev.navigator&&!ev.location&&!ev.document)return;let _=y.request&&y.request.url||ev.location&&ev.location.href,{referrer:b}=ev.document||{},{userAgent:E}=ev.navigator||{},k={...y.request&&y.request.headers,...b&&{Referer:b},...E&&{"User-Agent":E}},P={...y.request,..._&&{url:_},headers:k};y.request=P}}];return!1!==y.autoSessionTracking&&_.push({name:"BrowserSession",setupOnce(){void 0!==ev.document?(pn({ignoreDuration:!0}),gn(),Et(({from:y,to:_})=>{void 0!==y&&y!==_&&(pn({ignoreDuration:!0}),gn())})):ej&&e_.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),_}let eB=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Xn(y,_=!1){let{host:b,path:E,pass:k,port:P,projectId:I,protocol:D,publicKey:j}=y;return`${D}://${j}${_&&k?`:${k}`:""}@${b}${P?`:${P}`:""}/${E?`${E}/`:E}${I}`}function Zn(y){return{protocol:y.protocol,publicKey:y.publicKey||"",pass:y.pass||"",host:y.host,port:y.port||"",path:y.path||"",projectId:y.projectId}}function er(y,_=[]){return[y,_]}function tr(y,_){let[b,E]=y;return[b,[...E,_]]}function nr(y,_){let b=y[1];for(let y of b)if(_(y,y[0].type))return!0;return!1}function rr(y){return ev.__SENTRY__&&ev.__SENTRY__.encodePolyfill?ev.__SENTRY__.encodePolyfill(y):(new TextEncoder).encode(y)}function ir(y){let[_,b]=y,E=JSON.stringify(_);function i(y){"string"==typeof E?E="string"==typeof y?E+y:[rr(E),y]:E.push("string"==typeof y?rr(y):y)}for(let y of b){let[_,b]=y;if(i(`
${JSON.stringify(_)}
`),"string"==typeof b||b instanceof Uint8Array)i(b);else{let y;try{y=JSON.stringify(b)}catch(_){y=JSON.stringify(Wt(b))}i(y)}}return"string"==typeof E?E:function(y){let _=y.reduce((y,_)=>y+_.length,0),b=new Uint8Array(_),E=0;for(let _ of y)b.set(_,E),E+=_.length;return b}(E)}function or(y){let _="string"==typeof y.data?rr(y.data):y.data;return[he({type:"attachment",length:_.length,filename:y.filename,content_type:y.contentType,attachment_type:y.attachmentType}),_]}let eJ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function cr(y){if(!y||!y.sdk)return;let{name:_,version:b}=y.sdk;return{name:_,version:b}}let ur=class ur extends Error{constructor(y,_="warn"){super(y),this.message=y,this.logLevel=_}};let eG="Not capturing exception because it's already been captured.";let dr=class dr{constructor(y){var _,b,E;if(this._options=y,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],y.dsn?this._dsn=function(y){let _="string"==typeof y?function(y){let _=eB.exec(y);if(!_)return void x(()=>{console.error(`Invalid Sentry Dsn: ${y}`)});let[b,E,k="",P="",I="",D=""]=_.slice(1),j="",L=D,R=L.split("/");if(R.length>1&&(j=R.slice(0,-1).join("/"),L=R.pop()),L){let y=L.match(/^\d+/);y&&(L=y[0])}return Zn({host:P,pass:k,path:j,projectId:L,port:I,protocol:b,publicKey:E})}(y):Zn(y);if(_&&function(y){if(!ef)return!0;let{port:_,projectId:b,protocol:E}=y;return!(["protocol","publicKey","host","projectId"].find(_=>!y[_]&&(e_.error(`Invalid Sentry Dsn: ${_} missing`),!0))||(b.match(/^\d+$/)?"http"===E||"https"===E?_&&isNaN(parseInt(_,10))&&(e_.error(`Invalid Sentry Dsn: Invalid port ${_}`),1):(e_.error(`Invalid Sentry Dsn: Invalid protocol ${E}`),1):(e_.error(`Invalid Sentry Dsn: Invalid projectId ${b}`),1)))}(_))return _}(y.dsn):ep&&e_.warn("No DSN provided, client will not send events."),this._dsn){let k=(_=this._dsn,b=y.tunnel,E=y._metadata?y._metadata.sdk:void 0,b||`${function(y){let _=y.protocol?`${y.protocol}:`:"",b=y.port?`:${y.port}`:"";return`${_}//${y.host}${b}${y.path?`/${y.path}`:""}/api/`}(_)}${_.projectId}/envelope/?${function(y,_){let b={sentry_version:"7"};return y.publicKey&&(b.sentry_key=y.publicKey),_&&(b.sentry_client=`${_.name}/${_.version}`),new URLSearchParams(b).toString()}(_,E)}`);this._transport=y.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...y.transportOptions,url:k})}let k=["enableTracing","tracesSampleRate","tracesSampler"].find(_=>_ in y&&null==y[_]);k&&x(()=>{console.warn(`[Sentry] Deprecation warning: \`${k}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(y,_,b){let E=ge();if(Se(y))return ep&&e_.log(eG),E;let k={event_id:E,..._};return this._process(this.eventFromException(y,k).then(y=>this._captureEvent(y,k,b))),k.event_id}captureMessage(y,_,b,E){let k={event_id:ge(),...b},P=z(y)?y:String(y),I=H(y)?this.eventFromMessage(P,_,k):this.eventFromException(y,k);return this._process(I.then(y=>this._captureEvent(y,k,E))),k.event_id}captureEvent(y,_,b){let E=ge();if(_&&_.originalException&&Se(_.originalException))return ep&&e_.log(eG),E;let k={event_id:E,..._},P=(y.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(y,k,P||b)),k.event_id}captureSession(y){"string"!=typeof y.release?ep&&e_.warn("Discarded session because of missing or non-string release"):(this.sendSession(y),Pe(y,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(y){let _=this._transport;return _?(this.emit("flush"),this._isClientDoneProcessing(y).then(b=>_.flush(y).then(y=>b&&y))):Vt(!0)}close(y){return this.flush(y).then(y=>(this.getOptions().enabled=!1,this.emit("close"),y))}getEventProcessors(){return this._eventProcessors}addEventProcessor(y){this._eventProcessors.push(y)}init(){(this._isEnabled()||this._options.integrations.some(({name:y})=>y.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(y){return this._integrations[y]}addIntegration(y){let _=this._integrations[y.name];B(this,y,this._integrations),_||U(this,[y])}sendEvent(y,_={}){this.emit("beforeSendEvent",y,_);let b=function(y,_,b,E){var k;let P=cr(b),I=y.type&&"replay_event"!==y.type?y.type:"event";(k=b&&b.sdk)&&(y.sdk=y.sdk||{},y.sdk.name=y.sdk.name||k.name,y.sdk.version=y.sdk.version||k.version,y.sdk.integrations=[...y.sdk.integrations||[],...k.integrations||[]],y.sdk.packages=[...y.sdk.packages||[],...k.packages||[]]);let D=function(y,_,b,E){let k=y.sdkProcessingMetadata&&y.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:y.event_id,sent_at:(new Date).toISOString(),..._&&{sdk:_},...!!b&&E&&{dsn:Xn(E)},...k&&{trace:he({...k})}}}(y,P,E,_);return delete y.sdkProcessingMetadata,er(D,[[{type:I},y]])}(y,this._dsn,this._options._metadata,this._options.tunnel);for(let y of _.attachments||[])b=tr(b,or(y));let E=this.sendEnvelope(b);E&&E.then(_=>this.emit("afterSendEvent",y,_),null)}sendSession(y){let _=function(y,_,b,E){let k=cr(b);return er({sent_at:(new Date).toISOString(),...k&&{sdk:k},...!!E&&_&&{dsn:Xn(_)}},["aggregates"in y?[{type:"sessions"},y]:[{type:"session"},y.toJSON()]])}(y,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(_)}recordDroppedEvent(y,_,b){if(this._options.sendClientReports){let E="number"==typeof b?b:1,k=`${y}:${_}`;ep&&e_.log(`Recording outcome: "${k}"${E>1?` (${E} times)`:""}`),this._outcomes[k]=(this._outcomes[k]||0)+E}}on(y,_){let b=this._hooks[y]=this._hooks[y]||[];return b.push(_),()=>{let y=b.indexOf(_);y>-1&&b.splice(y,1)}}emit(y,..._){let b=this._hooks[y];b&&b.forEach(y=>y(..._))}sendEnvelope(y){return this.emit("beforeEnvelope",y),this._isEnabled()&&this._transport?this._transport.send(y).then(null,y=>(ep&&e_.error("Error while sending envelope:",y),y)):(ep&&e_.error("Transport disabled"),Vt({}))}_setupIntegrations(){let{integrations:y}=this._options;this._integrations=function(y,_){let b={};return _.forEach(_=>{_&&B(y,_,b)}),b}(this,y),U(this,y)}_updateSessionFromEvent(y,_){let b="fatal"===_.level,E=!1,k=_.exception&&_.exception.values;if(k)for(let y of(E=!0,k)){let _=y.mechanism;if(_&&!1===_.handled){b=!0;break}}let P="ok"===y.status;(P&&0===y.errors||P&&b)&&(Pe(y,{...b&&{status:"crashed"},errors:y.errors||Number(E||b)}),this.captureSession(y))}_isClientDoneProcessing(y){return new Bt(_=>{let b=0,E=setInterval(()=>{0==this._numProcessing?(clearInterval(E),_(!0)):(b+=1,y&&b>=y&&(clearInterval(E),_(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(y,_,b=qe(),E=We()){let k=this.getOptions(),P=Object.keys(this._integrations);return!_.integrations&&P.length>0&&(_.integrations=P),this.emit("preprocessEvent",y,_),y.type||E.setLastEventId(y.event_id||_.event_id),ln(k,y,_,b,this,E).then(y=>{if(null===y)return y;y.contexts={trace:ze(b),...y.contexts};let _=function(y,_){let b=_.getPropagationContext();return b.dsc||an(b.traceId,y)}(this,b);return y.sdkProcessingMetadata={dynamicSamplingContext:_,...y.sdkProcessingMetadata},y})}_captureEvent(y,_={},b){return this._processEvent(y,_,b).then(y=>y.event_id,y=>{ep&&(y instanceof ur&&"log"===y.logLevel?e_.log(y.message):e_.warn(y))})}_processEvent(y,_,b){let E=this.getOptions(),{sampleRate:k}=E,P=pr(y),I=fr(y),D=y.type||"error",j=`before send for type \`${D}\``,L=void 0===k?void 0:function(y){if("boolean"==typeof y)return Number(y);let _="string"==typeof y?parseFloat(y):y;if(!("number"!=typeof _||isNaN(_)||_<0||_>1))return _;ep&&e_.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(y)} of type ${JSON.stringify(typeof y)}.`)}(k);if(I&&"number"==typeof L&&Math.random()>L)return this.recordDroppedEvent("sample_rate","error",y),Ut(new ur(`Discarding event because it's not included in the random sample (sampling rate = ${k})`,"log"));let R="replay_event"===D?"replay":D,F=(y.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(y,_,b,F).then(b=>{if(null===b)throw this.recordDroppedEvent("event_processor",R,y),new ur("An event processor returned `null`, will not send event.","log");if(_.data&&!0===_.data.__sentry__)return b;let k=function(y,_,b,E){let{beforeSend:k,beforeSendTransaction:P,beforeSendSpan:I}=_;if(fr(b)&&k)return k(b,E);if(pr(b)){if(b.spans&&I){let _=[];for(let E of b.spans){let b=I(E);b?_.push(b):(eN||(x(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),eN=!0),y.recordDroppedEvent("before_send","span"))}b.spans=_}if(P){if(b.spans){let y=b.spans.length;b.sdkProcessingMetadata={...b.sdkProcessingMetadata,spanCountBeforeProcessing:y}}return P(b,E)}}return b}(this,E,b,_);return function(y,_){let b=`${_} must return \`null\` or a valid event.`;if(X(y))return y.then(y=>{if(!K(y)&&null!==y)throw new ur(b);return y},y=>{throw new ur(`${_} rejected with ${y}`)});if(!K(y)&&null!==y)throw new ur(b);return y}(k,j)}).then(E=>{if(null===E){if(this.recordDroppedEvent("before_send",R,y),P){let _=1+(y.spans||[]).length;this.recordDroppedEvent("before_send","span",_)}throw new ur(`${j} returned \`null\`, will not send event.`,"log")}let k=b&&b.getSession();if(!P&&k&&this._updateSessionFromEvent(k,E),P){let y=(E.sdkProcessingMetadata&&E.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(E.spans?E.spans.length:0);y>0&&this.recordDroppedEvent("before_send","span",y)}let I=E.transaction_info;return P&&I&&E.transaction!==y.transaction&&(E.transaction_info={...I,source:"custom"}),this.sendEvent(E,_),E}).then(null,y=>{if(y instanceof ur)throw y;throw this.captureException(y,{data:{__sentry__:!0},originalException:y}),new ur(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`)})}_process(y){this._numProcessing++,y.then(y=>(this._numProcessing--,y),y=>(this._numProcessing--,y))}_clearOutcomes(){let y=this._outcomes;return this._outcomes={},Object.entries(y).map(([y,_])=>{let[b,E]=y.split(":");return{reason:b,category:E,quantity:_}})}_flushOutcomes(){var y;ep&&e_.log("Flushing outcomes...");let _=this._clearOutcomes();if(0===_.length)return void(ep&&e_.log("No outcomes to send"));if(!this._dsn)return void(ep&&e_.log("No dsn provided, will not send outcomes"));ep&&e_.log("Sending outcomes:",_);let b=er((y=this._options.tunnel&&Xn(this._dsn))?{dsn:y}:{},[[{type:"client_report"},{timestamp:Ae(),discarded_events:_}]]);this.sendEnvelope(b)}};function fr(y){return void 0===y.type}function pr(y){return"transaction"===y.type}let hr=class hr extends dr{constructor(y){let _={parentSpanIsAlwaysRootSpan:!0,...y};(function(y,_,b=[_],E="npm"){let k=y._metadata||{};k.sdk||(k.sdk={name:`sentry.javascript.${_}`,packages:b.map(y=>({name:`${E}:@sentry/${y}`,version:em})),version:em}),y._metadata=k})(_,"browser",["browser"],ev.SENTRY_SDK_SOURCE||"npm"),super(_),_.sendClientReports&&ev.document&&ev.document.addEventListener("visibilitychange",()=>{"hidden"===ev.document.visibilityState&&this._flushOutcomes()})}eventFromException(y,_){return function(y,_,b,E){let k=Vn(y,_,b&&b.syntheticException||void 0,E);return be(k),k.level="error",b&&b.event_id&&(k.event_id=b.event_id),Vt(k)}(this._options.stackParser,y,_,this._options.attachStacktrace)}eventFromMessage(y,_="info",b){return function(y,_,b="info",E,k){let P=Un(y,_,E&&E.syntheticException||void 0,k);return P.level=b,E&&E.event_id&&(P.event_id=E.event_id),Vt(P)}(this._options.stackParser,y,_,b,this._options.attachStacktrace)}captureUserFeedback(y){if(!this._isEnabled())return void(ej&&e_.warn("SDK not enabled, will not capture user feedback."));let _=function(y,{metadata:_,tunnel:b,dsn:E}){let k={event_id:y.event_id,sent_at:(new Date).toISOString(),..._&&_.sdk&&{sdk:{name:_.sdk.name,version:_.sdk.version}},...!!b&&!!E&&{dsn:Xn(E)}},P=[{type:"user_report"},y];return er(k,[P])}(y,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(_)}_prepareEvent(y,_,b){return y.platform=y.platform||"javascript",super._prepareEvent(y,_,b)}};let eH="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,eW={};function yr(y,_,b=function(y){let _=[];function n(y){return _.splice(_.indexOf(y),1)[0]||Promise.resolve(void 0)}return{$:_,add:function(b){if(!(void 0===y||_.length<y))return Ut(new ur("Not adding Promise because buffer limit was reached."));let E=b();return -1===_.indexOf(E)&&_.push(E),E.then(()=>n(E)).then(null,()=>n(E).then(null,()=>{})),E},drain:function(y){return new Bt((b,E)=>{let k=_.length;if(!k)return b(!0);let P=setTimeout(()=>{y&&y>0&&b(!1)},y);_.forEach(y=>{Vt(y).then(()=>{--k||(clearTimeout(P),b(!0))},E)})})}}}(y.bufferSize||64)){let E={};return{send:function(k){let P=[];if(nr(k,(_,b)=>{let k=eJ[b];if(function(y,_,b=Date.now()){return(y[_]||y.all||0)>b}(E,k)){let E=_r(_,b);y.recordDroppedEvent("ratelimit_backoff",k,E)}else P.push(_)}),0===P.length)return Vt({});let I=er(k[0],P),s=_=>{nr(I,(b,E)=>{let k=_r(b,E);y.recordDroppedEvent(_,eJ[E],k)})};return b.add(()=>_({body:ir(I)}).then(y=>(void 0!==y.statusCode&&(y.statusCode<200||y.statusCode>=300)&&ep&&e_.warn(`Sentry responded with status code ${y.statusCode} to sent event.`),E=function(y,{statusCode:_,headers:b},E=Date.now()){let k={...y},P=b&&b["x-sentry-rate-limits"],I=b&&b["retry-after"];if(P)for(let y of P.trim().split(",")){let[_,b,,,P]=y.split(":",5),I=parseInt(_,10),D=1e3*(isNaN(I)?60:I);if(b)for(let y of b.split(";"))"metric_bucket"===y&&P&&!P.split(";").includes("custom")||(k[y]=E+D);else k.all=E+D}else I?k.all=E+function(y,_=Date.now()){let b=parseInt(`${y}`,10);if(!isNaN(b))return 1e3*b;let E=Date.parse(`${y}`);return isNaN(E)?6e4:E-_}(I,E):429===_&&(k.all=E+6e4);return k}(E,y),y),y=>{throw s("network_error"),y})).then(y=>y,y=>{if(y instanceof ur)return ep&&e_.error("Skipped sending event because buffer is full."),s("queue_overflow"),Vt({});throw y})},flush:y=>b.drain(y)}}function _r(y,_){if("event"===_||"transaction"===_)return Array.isArray(y)?y[1]:void 0}function br(y,_=function(y){let _=eW[y];if(_)return _;let b=ev[y];if(Ct(b))return eW[y]=b.bind(ev);let E=ev.document;if(E&&"function"==typeof E.createElement)try{let _=E.createElement("iframe");_.hidden=!0,E.head.appendChild(_);let k=_.contentWindow;k&&k[y]&&(b=k[y]),E.head.removeChild(_)}catch(_){eH&&e_.warn(`Could not create sandbox iframe for ${y} check, bailing to window.${y}: `,_)}return b?eW[y]=b.bind(ev):b}("fetch")){let b=0,E=0;return yr(y,function(k){let P=k.body.length;b+=P,E++;let I={body:k.body,method:"POST",referrerPolicy:"origin",headers:y.headers,keepalive:b<=6e4&&E<15,...y.fetchOptions};if(!_)return eW.fetch=void 0,Ut("No fetch implementation available");try{return _(y.url,I).then(y=>(b-=P,E--,{statusCode:y.status,headers:{"x-sentry-rate-limits":y.headers.get("X-Sentry-Rate-Limits"),"retry-after":y.headers.get("Retry-After")}}))}catch(y){return eW.fetch=void 0,b-=P,E--,Ut(y)}})}function Sr(y,_,b,E){let k={filename:y,function:"<anonymous>"===_?"?":_,in_app:!0};return void 0!==b&&(k.lineno=b),void 0!==E&&(k.colno=E),k}let eY=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ez=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,eQ=/\((\S*)(?::(\d+))(?::(\d+))\)/,eK=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,eZ=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,eX=function(...y){let _=y.sort((y,_)=>y[0]-_[0]).map(y=>y[1]);return(y,b=0,E=0)=>{let k=[],P=y.split("\n");for(let y=b;y<P.length;y++){let b=P[y];if(b.length>1024)continue;let I=eA.test(b)?b.replace(eA,"$1"):b;if(!I.match(/\S*Error: /)){for(let y of _){let _=y(I);if(_){k.push(_);break}}if(k.length>=50+E)break}}return function(y){if(!y.length)return[];let _=Array.from(y);return/sentryWrapped/.test(tt(_).function||"")&&_.pop(),_.reverse(),eO.test(tt(_).function||"")&&(_.pop(),eO.test(tt(_).function||"")&&_.pop()),_.slice(0,50).map(y=>({...y,filename:y.filename||tt(_).filename,function:y.function||"?"}))}(k.slice(E))}}([30,y=>{let _=eY.exec(y);if(_){let[,y,b,E]=_;return Sr(y,"?",+b,+E)}let b=ez.exec(y);if(b){if(b[2]&&0===b[2].indexOf("eval")){let y=eQ.exec(b[2]);y&&(b[2]=y[1],b[3]=y[2],b[4]=y[3])}let[y,_]=Cr(b[1]||"?",b[2]);return Sr(_,y,b[3]?+b[3]:void 0,b[4]?+b[4]:void 0)}}],[50,y=>{let _=eK.exec(y);if(_){if(_[3]&&_[3].indexOf(" > eval")>-1){let y=eZ.exec(_[3]);y&&(_[1]=_[1]||"eval",_[3]=y[1],_[4]=y[2],_[5]="")}let y=_[3],b=_[1]||"?";return[b,y]=Cr(b,y),Sr(y,b,_[4]?+_[4]:void 0,_[5]?+_[5]:void 0)}}]),Cr=(y,_)=>{let b=-1!==y.indexOf("safari-extension"),E=-1!==y.indexOf("safari-web-extension");return b||E?[-1!==y.indexOf("@")?y.split("@")[0]:"?",b?`safari-extension:${_}`:`safari-web-extension:${_}`]:[y,_]};var e0="new",e1="loading",e2="loaded",e3="joining-meeting",e4="joined-meeting",e9="left-meeting",e5="error",e8="blocked",e6="off",e7="sendable",te="loading",ti="interrupted",ta="playable",to="unknown",ts="full",tc="lobby",tl="none",tu="base",td="*",th="ejected",tp="nbf-room",tf="nbf-token",tm="exp-room",tv="exp-token",tg="no-room",ty="meeting-full",t_="end-of-life",tb="not-allowed",tS="connection-error",tw="cam-in-use",tE="mic-in-use",tk="cam-mic-in-use",tC="permissions",tT="undefined-mediadevices",tA="not-found",tO="constraints",tM="unknown",tP="iframe-ready-for-launch-config",tI="iframe-launch-config",tD="theme-updated",tj="loading",tL="load-attempt-failed",tR="loaded",tN="started-camera",tx="camera-error",tF="joining-meeting",tq="joined-meeting",tU="left-meeting",tV="participant-joined",t$="participant-updated",tB="participant-left",tJ="participant-counts-updated",tG="access-state-updated",tH="meeting-session-summary-updated",tW="meeting-session-state-updated",tY="meeting-session-data-error",tz="waiting-participant-added",tQ="waiting-participant-updated",tK="waiting-participant-removed",tZ="track-started",tX="track-stopped",t0="transcription-started",t1="transcription-stopped",t2="transcription-error",t3="recording-started",t4="recording-stopped",t9="recording-stats",t5="recording-error",t8="recording-upload-completed",t6="recording-data",t7="app-message",ri="transcription-message",ra="remote-media-player-started",ro="remote-media-player-updated",rs="remote-media-player-stopped",rc="local-screen-share-started",rl="local-screen-share-stopped",ru="local-screen-share-canceled",rd="active-speaker-change",rh="active-speaker-mode-change",rp="network-quality-change",rf="network-connection",rm="cpu-load-change",rv="face-counts-updated",rg="fullscreen",ry="exited-fullscreen",r_="live-streaming-started",rb="live-streaming-updated",rS="live-streaming-stopped",rw="live-streaming-error",rE="lang-updated",rk="receive-settings-updated",rC="input-settings-updated",rT="nonfatal-error",rA="error",rO="iframe-call-message",rM="local-screen-start",rP="daily-method-update-live-streaming-endpoints",rI="transmit-log",rD="daily-custom-track",rj={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},rL={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},rR={PLAY:"play",PAUSE:"pause"},rN=["jpg","png","jpeg"],rx="sip-call-transfer";function Oo(){return!Po()&&"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function Po(){return"undefined"!=typeof navigator&&navigator.product&&"ReactNative"===navigator.product}function Io(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function Lo(){if(Po()||!document)return!1;var y=document.createElement("iframe");return!!y.requestFullscreen||!!y.webkitRequestFullscreen}var rF="none",rq=function(){try{var y,_=document.createElement("canvas"),b=!1;(y=_.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(b=!0,y=_.getContext("webgl2"));var E=null!=y;return _.remove(),E?b?"software":"hardware":rF}catch(y){return rF}}();function jo(){var y=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!Po()&&rq!==rF&&(y?!Vo()&&["Chrome","Firefox"].includes(Uo()):function(){if(Vo())return!1;var y=Uo();if("Safari"===y){var _=qo();if(_.major<15||15===_.major&&_.minor<4)return!1}return"Chrome"===y?Jo().major>=77:"Firefox"===y?Wo().major>=97:["Chrome","Firefox","Safari"].includes(y)}())}function Ro(){if(Po()||Fo()||"undefined"==typeof AudioWorkletNode)return!1;switch(Uo()){case"Chrome":case"Firefox":return!0;case"Safari":var y=Bo();return y.major>17||17===y.major&&y.minor>=4}return!1}function xo(){return Io()&&"undefined"!=typeof MediaStreamTrack&&!function(){var y,_=Uo();if(!Oo())return!0;switch(_){case"Chrome":return(y=Jo()).major&&y.major>0&&y.major<75;case"Firefox":return(y=Wo()).major<91;case"Safari":return(y=qo()).major<13||13===y.major&&y.minor<1;default:return!0}}()}function Fo(){return Oo().match(/Linux; Android/)}function Vo(){var y,_=Oo(),b=_.match(/Mac/)&&(!Po()&&"undefined"!=typeof window&&null!==(y=window)&&void 0!==y&&null!==(y=y.navigator)&&void 0!==y&&y.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(_.match(/Mobi/)||_.match(/Android/)||b)||!!Oo().match(/DailyAnd\//)||void 0}function Uo(){if("undefined"!=typeof window){var y=Oo();return Yo()?"Safari":y.indexOf("Edge")>-1?"Edge":y.match(/Chrome\//)?"Chrome":y.indexOf("Safari")>-1||$o()?"Safari":y.indexOf("Firefox")>-1?"Firefox":y.indexOf("MSIE")>-1||y.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function Bo(){switch(Uo()){case"Chrome":return Jo();case"Safari":return qo();case"Firefox":return Wo();case"Edge":return function(){var y=0,_=0;if("undefined"!=typeof window){var b=Oo().match(/Edge\/(\d+).(\d+)/);if(b)try{y=parseInt(b[1]),_=parseInt(b[2])}catch(y){}}return{major:y,minor:_}}()}}function Jo(){var y=0,_=0,b=0,E=0,k=!1;if("undefined"!=typeof window){var P=Oo(),I=P.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(I)try{y=parseInt(I[1]),_=parseInt(I[2]),b=parseInt(I[3]),E=parseInt(I[4]),k=P.indexOf("OPR/")>-1}catch(y){}}return{major:y,minor:_,build:b,patch:E,opera:k}}function Yo(){return!!Oo().match(/iPad|iPhone|iPod/i)&&Io()}function $o(){return Oo().indexOf("AppleWebKit/605.1.15")>-1}function qo(){var y=0,_=0,b=0;if("undefined"!=typeof window){var E=Oo().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(E)try{y=parseInt(E[1]),_=parseInt(E[2]),b=parseInt(E[4])}catch(y){}else(Yo()||$o())&&(y=14,_=0,b=3)}return{major:y,minor:_,point:b}}function Wo(){var y=0,_=0;if("undefined"!=typeof window){var b=Oo().match(/Firefox\/(\d+).(\d+)/);if(b)try{y=parseInt(b[1]),_=parseInt(b[2])}catch(y){}}return{major:y,minor:_}}var rU=c(function e(){i(this,e)},[{key:"addListenerForMessagesFromCallMachine",value:function(y,_,b){M()}},{key:"addListenerForMessagesFromDailyJs",value:function(y,_,b){M()}},{key:"sendMessageToCallMachine",value:function(y,_,b,E){M()}},{key:"sendMessageToDailyJs",value:function(y,_){M()}},{key:"removeListener",value:function(y){M()}}]);function zo(y,_){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);_&&(E=E.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),b.push.apply(b,E)}return b}function Ho(y){for(var _=1;_<arguments.length;_++){var b=null!=arguments[_]?arguments[_]:{};_%2?zo(Object(b),!0).forEach(function(_){p(y,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):zo(Object(b)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(b,_))})}return y}function Ko(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(y){}return(Ko=function(){return!!y})()}var rV=function(y){function t(){var y,_,b;return i(this,t),_=l(_=t),(y=u(this,Ko()?Reflect.construct(_,[],l(this).constructor):_.apply(this,b)))._wrappedListeners={},y._messageCallbacks={},y}return f(t,y),c(t,[{key:"addListenerForMessagesFromCallMachine",value:function(y,_,b){var E=this,i=function(k){if(k.data&&"iframe-call-message"===k.data.what&&(!k.data.callClientId||k.data.callClientId===_)&&(!k.data.from||"module"!==k.data.from)){var P=Ho({},k.data);if(delete P.from,P.callbackStamp&&E._messageCallbacks[P.callbackStamp]){var I=P.callbackStamp;E._messageCallbacks[I].call(b,P),delete E._messageCallbacks[I]}delete P.what,delete P.callbackStamp,y.call(b,P)}};this._wrappedListeners[y]=i,window.addEventListener("message",i)}},{key:"addListenerForMessagesFromDailyJs",value:function(y,_,b){var r=function(E){var k;if(!(!E.data||E.data.what!==rO||!E.data.action||E.data.from&&"module"!==E.data.from||E.data.callClientId&&_&&E.data.callClientId!==_||null!=E&&null!==(k=E.data)&&void 0!==k&&k.callFrameId)){var P=E.data;y.call(b,P)}};this._wrappedListeners[y]=r,window.addEventListener("message",r)}},{key:"sendMessageToCallMachine",value:function(y,_,b,E){if(!b)throw Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var k=Ho({},y);if(k.what=rO,k.from="module",k.callClientId=b,_){var P=T();this._messageCallbacks[P]=_,k.callbackStamp=P}var I=E?E.contentWindow:window,D=this._callMachineTargetOrigin(E);D&&I.postMessage(k,D)}},{key:"sendMessageToDailyJs",value:function(y,_){y.what=rO,y.callClientId=_,y.from="embedded",window.postMessage(y,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(y){var _=this._wrappedListeners[y];_&&(window.removeEventListener("message",_),delete this._wrappedListeners[y])}},{key:"forwardPackagedMessageToCallMachine",value:function(y,_,b){var E=Ho({},y);E.callClientId=b;var k=_?_.contentWindow:window,P=this._callMachineTargetOrigin(_);P&&k.postMessage(E,P)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(y,_){var n=function(b){!b.data||"iframe-call-message"!==b.data.what||b.data.callClientId&&b.data.callClientId!==_||b.data.from&&"module"===b.data.from||y(b.data)};return this._wrappedListeners[y]=n,window.addEventListener("message",n),y}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(y){var _=this._wrappedListeners[y];_&&(window.removeEventListener("message",_),delete this._wrappedListeners[y])}},{key:"_callMachineTargetOrigin",value:function(y){return y?y.src?new URL(y.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return"file:"===window.location.protocol?"*":window.location.origin}}])}(rU);function Xo(y,_){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);_&&(E=E.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),b.push.apply(b,E)}return b}function Zo(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(y){}return(Zo=function(){return!!y})()}var r$=function(y){function t(){var y,_,b;return i(this,t),_=l(_=t),y=u(this,Zo()?Reflect.construct(_,[],l(this).constructor):_.apply(this,b)),window.callMachineToDailyJsEmitter=window.callMachineToDailyJsEmitter||new ec.EventEmitter,window.dailyJsToCallMachineEmitter=window.dailyJsToCallMachineEmitter||new ec.EventEmitter,y._wrappedListeners={},y._messageCallbacks={},y}return f(t,y),c(t,[{key:"addListenerForMessagesFromCallMachine",value:function(y,_,b){this._addListener(y,window.callMachineToDailyJsEmitter,_,b,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(y,_,b){this._addListener(y,window.dailyJsToCallMachineEmitter,_,b,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(y,_,b){this._sendMessage(y,window.dailyJsToCallMachineEmitter,b,_,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(y,_){this._sendMessage(y,window.callMachineToDailyJsEmitter,_,null,"sending message to daily-js")}},{key:"removeListener",value:function(y){var _=this._wrappedListeners[y];_&&(window.callMachineToDailyJsEmitter.removeListener("message",_),window.dailyJsToCallMachineEmitter.removeListener("message",_),delete this._wrappedListeners[y])}},{key:"_addListener",value:function(y,_,b,E,k){var P=this,a=function(_){if(_.callClientId===b){if(_.callbackStamp&&P._messageCallbacks[_.callbackStamp]){var k=_.callbackStamp;P._messageCallbacks[k].call(E,_),delete P._messageCallbacks[k]}y.call(E,_)}};this._wrappedListeners[y]=a,_.addListener("message",a)}},{key:"_sendMessage",value:function(y,_,b,E,k){var P=function(y){for(var _=1;_<arguments.length;_++){var b=null!=arguments[_]?arguments[_]:{};_%2?Xo(Object(b),!0).forEach(function(_){p(y,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):Xo(Object(b)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(b,_))})}return y}({},y);if(P.callClientId=b,E){var I=T();this._messageCallbacks[I]=E,P.callbackStamp=I}_.emit("message",P)}}])}(rU),rB="replace",rJ="shallow-merge",rG=[rB,rJ],rH=function(){function e(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=y.data,b=y.mergeStrategy,E=void 0===b?rB:b;i(this,e),e._validateMergeStrategy(E),e._validateData(_,E),this.mergeStrategy=E,this.data=_}return c(e,[{key:"isNoOp",value:function(){return e.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(y,_){return 0===Object.keys(y).length&&_===rJ}},{key:"_validateMergeStrategy",value:function(y){if(!rG.includes(y))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(rG,"]"))}},{key:"_validateData",value:function(y,_){if(!function(y){if(null==y||"object"!==o(y))return!1;var _=Object.getPrototypeOf(y);return null==_||_===Object.prototype}(y))throw Error("Meeting session data must be a plain (map-like) object");try{if(b=JSON.stringify(y),_===rB){var b,E=JSON.parse(b);w(E,y)||console.warn("The meeting session data provided will be modified when serialized.",E,y)}else if(_===rJ){for(var k in y)if(Object.hasOwnProperty.call(y,k)&&void 0!==y[k]){var P=JSON.parse(JSON.stringify(y[k]));w(y[k],P)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",P,y[k])}}}catch(y){throw Error("Meeting session data must be serializable to JSON: ".concat(y))}if(b.length>102400)throw Error("Meeting session data is too large (".concat(b.length," characters). Maximum size suppported is ").concat(102400,"."))}}])}();function oa(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(y){}return(oa=function(){return!!y})()}function aa(y){var _="function"==typeof Map?new Map:void 0;return(aa=function(y){if(null===y||!function(y){try{return -1!==Function.toString.call(y).indexOf("[native code]")}catch(_){return"function"==typeof y}}(y))return y;if("function"!=typeof y)throw TypeError("Super expression must either be null or a function");if(void 0!==_){if(_.has(y))return _.get(y);_.set(y,n)}function n(){return function(y,_,b){if(oa())return Reflect.construct.apply(null,arguments);var E=[null];E.push.apply(E,_);var k=new(y.bind.apply(y,E));return b&&d(k,b.prototype),k}(y,arguments,l(this).constructor)}return n.prototype=Object.create(y.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,y)})(y)}function sa(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(y){}return(sa=function(){return!!y})()}function ca(y){var _,b=null===(_=window._daily)||void 0===_?void 0:_.pendings;if(b){var E=b.indexOf(y);-1!==E&&b.splice(E,1)}}var rW=c(function e(y){i(this,e),this._currentLoad=null,this._callClientId=y},[{key:"load",value:function(){var y,_=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=arguments.length>1?arguments[1]:void 0,k=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void E(!0);y=this._callClientId,window._daily.pendings.push(y),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new rY(b,function(){E(!1)},function(y,b){b||ca(_._callClientId),k(y,b)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),ca(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),rY=c(function e(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0;i(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=y,this._successCallback=_,this._failureCallback=b},[{key:"start",value:function(){var y=this;if(!this._currentAttempt){var t=function(_){y._currentAttempt.cancelled||(y._attemptsRemaining--,y._failureCallback(_,y._attemptsRemaining>0),y._attemptsRemaining<=0||setTimeout(function(){y._currentAttempt.cancelled||(y._currentAttempt=new rQ(y._dailyConfig,y._successCallback,t),y._currentAttempt.start())},3e3))};this._currentAttempt=new rQ(this._dailyConfig,this._successCallback,t),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),rz=function(y){function t(){var y,_;return i(this,t),_=arguments,y=l(y=t),u(this,sa()?Reflect.construct(y,_||[],l(this).constructor):y.apply(this,_))}return f(t,y),c(t)}(aa(Error)),rQ=c(function e(y,_,b){i(this,e),this._loadAttemptImpl=Po()||!y.avoidEval?new rK(y,_,b):new rZ(y,_,b)},[{key:"start",value:(V=v(function*(){return this._loadAttemptImpl.start()}),function(){return V.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),rK=c(function e(y,_,b){i(this,e),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache="undefined"!=typeof iOSCallObjectBundleCache&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=y,this._successCallback=_,this._failureCallback=b},[{key:"start",value:(ea=v(function*(){var y=C(this._dailyConfig);(yield this._tryLoadFromIOSCache(y))||this._loadFromNetwork(y)}),function(){return ea.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(ei=v(function*(y){if(!this._iosCache)return!1;try{var _=yield this._iosCache.get(y);return!!this.cancelled||!!_&&(_.code?(Function('"use strict";'+_.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=_.refetchHeaders,!1))}catch(y){return!1}}),function(y){return ei.apply(this,arguments)})},{key:"_loadFromNetwork",value:(et=v(function*(y){var _=this;this._networkTimeout=setTimeout(function(){_._networkTimedOut=!0,_._failureCallback({msg:"Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(y),type:"timeout"})},2e4);try{var b=this._refetchHeaders?{headers:this._refetchHeaders}:{},E=yield fetch(y,b);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new rz;var k=yield this._getBundleCodeFromResponse(y,E);if(this.cancelled)throw new rz;Function('"use strict";'+k)(),this._iosCache&&this._iosCache.set(y,k,E.headers),this.succeeded=!0,this._successCallback()}catch(_){if(clearTimeout(this._networkTimeout),_ instanceof rz||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(y,": ").concat(_),type:_.message})}}),function(y){return et.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(J=v(function*(y,_){if(_.ok)return yield _.text();if(this._iosCache&&304===_.status)return(yield this._iosCache.renew(y,_.headers)).code;throw Error("Received ".concat(_.status," response"))}),function(y,_){return J.apply(this,arguments)})}]),rZ=c(function e(y,_,b){i(this,e),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=y,this._successCallback=_,this._failureCallback=b,this._attemptId=T(),this._networkTimeout=null,this._scriptElement=null},[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var y=C(this._dailyConfig);"object"===("undefined"==typeof document?"undefined":o(document))?this._startLoading(y):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(y){var _=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){_._stopLoading(),_._failureCallback({msg:"Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(y),type:"timeout"})},2e4);var b=document.getElementsByTagName("head")[0],E=document.createElement("script");this._scriptElement=E,E.onload=function(){_._stopLoading(),_.succeeded=!0,_._successCallback()},E.onerror=function(y){_._stopLoading(),_._failureCallback({msg:"Failed to load call object bundle ".concat(y.target.src),type:y.message})},E.src=y,b.appendChild(E)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),ga=function(y,_,b){return!0===_a(y.local,_,b)},ya=function(y,_,b,E){var k=ba(y,_,b,E);return k&&k.pendingTrack},_a=function(y,_,b){if(!y)return!1;var r=function(y){switch(y){case"avatar":return!0;case"staged":return y;default:return!!y}},E=y.public.subscribedTracks;return E&&E[_]?r(-1===["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(b)&&E[_].custom?[!0,"staged"].includes(E[_].custom)?E[_].custom:E[_].custom[b]:E[_][b]):!E||r(E.ALL)},ba=function(y,_,b,E){var k=Object.values(y.streams||{}).filter(function(y){return y.participantId===_&&y.type===b&&y.pendingTrack&&y.pendingTrack.kind===E}).sort(function(y,_){return new Date(_.starttime)-new Date(y.starttime)});return k&&k[0]},Sa=function(y,_){var b=y.local.public.customTracks;if(b&&b[_])return b[_].track};function wa(y,_){for(var b=_.getState(),E=0,k=["cam","screen"];E<k.length;E++)for(var P=k[E],I=0,D=["video","audio"];I<D.length;I++){var j=D[I],L="cam"===P?j:"screen".concat(j.charAt(0).toUpperCase()+j.slice(1)),R=y.tracks[L];if(R){var F=y.local?b.local.streams&&b.local.streams[P]&&b.local.streams[P].stream&&b.local.streams[P].stream["get".concat("video"===j?"Video":"Audio","Tracks")]()[0]:ya(b,y.session_id,P,j);"playable"===R.state&&(R.track=F),R.persistentTrack=F}}}function ka(y,_){try{var b=_.getState();for(var E in y.tracks)if(!Ea(E)){var k=y.tracks[E].kind;if(k){var P=y.tracks[E];if(P){var I=y.local?Sa(b,E):ya(b,y.session_id,E,k);"playable"===P.state&&(y.tracks[E].track=I),P.persistentTrack=I}}else console.error("unknown type for custom track")}}catch(y){console.error(y)}}function Ea(y){return["video","audio","screenVideo","screenAudio"].includes(y)}function Ta(y,_,b){var E=b.getState();if(y.local){if(y.audio)try{y.audioTrack=E.local.streams.cam.stream.getAudioTracks()[0],y.audioTrack||(y.audio=!1)}catch(y){}if(y.video)try{y.videoTrack=E.local.streams.cam.stream.getVideoTracks()[0],y.videoTrack||(y.video=!1)}catch(y){}if(y.screen)try{y.screenVideoTrack=E.local.streams.screen.stream.getVideoTracks()[0],y.screenAudioTrack=E.local.streams.screen.stream.getAudioTracks()[0],y.screenVideoTrack||y.screenAudioTrack||(y.screen=!1)}catch(y){}}else{var k=!0;try{var P=E.participants[y.session_id];P&&P.public&&P.public.rtcType&&"peer-to-peer"===P.public.rtcType.impl&&P.private&&!["connected","completed"].includes(P.private.peeringState)&&(k=!1)}catch(y){console.error(y)}if(!k)return y.audio=!1,y.audioTrack=!1,y.video=!1,y.videoTrack=!1,y.screen=!1,void(y.screenTrack=!1);try{if(E.streams,y.audio&&ga(E,y.session_id,"cam-audio")){var I=ya(E,y.session_id,"cam","audio");I&&(_&&_.audioTrack&&_.audioTrack.id===I.id?y.audioTrack=I:I.muted||(y.audioTrack=I)),y.audioTrack||(y.audio=!1)}if(y.video&&ga(E,y.session_id,"cam-video")){var D=ya(E,y.session_id,"cam","video");D&&(_&&_.videoTrack&&_.videoTrack.id===D.id?y.videoTrack=D:D.muted||(y.videoTrack=D)),y.videoTrack||(y.video=!1)}if(y.screen&&ga(E,y.session_id,"screen-audio")){var j=ya(E,y.session_id,"screen","audio");j&&(_&&_.screenAudioTrack&&_.screenAudioTrack.id===j.id?y.screenAudioTrack=j:j.muted||(y.screenAudioTrack=j))}if(y.screen&&ga(E,y.session_id,"screen-video")){var L=ya(E,y.session_id,"screen","video");L&&(_&&_.screenVideoTrack&&_.screenVideoTrack.id===L.id?y.screenVideoTrack=L:L.muted||(y.screenVideoTrack=L))}y.screenVideoTrack||y.screenAudioTrack||(y.screen=!1)}catch(y){console.error("unexpected error matching up tracks",y)}}}function Ma(y,_){(null==_||_>y.length)&&(_=y.length);for(var b=0,E=Array(_);b<_;b++)E[b]=y[b];return E}var rX=new Map,r0=null;function Oa(y,_){(null==_||_>y.length)&&(_=y.length);for(var b=0,E=Array(_);b<_;b++)E[b]=y[b];return E}var r1=new Map,r2=null;function La(y){Da()?rX.has(y)||(rX.set(y,{}),navigator.mediaDevices.enumerateDevices().then(function(_){var b;rX.has(y)&&(rX.get(y).lastDevicesString=JSON.stringify(_),r0||(b=v(function*(){var y,_=yield navigator.mediaDevices.enumerateDevices(),b=function(y,_){var b="undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(!b){if(Array.isArray(y)||(b=function(y,_){if(y){if("string"==typeof y)return Ma(y,_);var b=({}).toString.call(y).slice(8,-1);return"Object"===b&&y.constructor&&(b=y.constructor.name),"Map"===b||"Set"===b?Array.from(y):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Ma(y,_):void 0}}(y))){b&&(y=b);var E=0,i=function(){};return{s:i,n:function(){return E>=y.length?{done:!0}:{done:!1,value:y[E++]}},e:function(y){throw y},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,P=!0,I=!1;return{s:function(){b=b.call(y)},n:function(){var y=b.next();return P=y.done,y},e:function(y){I=!0,k=y},f:function(){try{P||null==b.return||b.return()}finally{if(I)throw k}}}}(rX.keys());try{for(b.s();!(y=b.n()).done;){var E=y.value,k=JSON.stringify(_);k!==rX.get(E).lastDevicesString&&(rX.get(E).lastDevicesString=k,E(_))}}catch(y){b.e(y)}finally{b.f()}}),r0=function(){return b.apply(this,arguments)},navigator.mediaDevices.addEventListener("devicechange",r0)))}).catch(function(){})):r1.has(y)||(r1.set(y,{}),navigator.mediaDevices.enumerateDevices().then(function(_){r1.has(y)&&(r1.get(y).lastDevicesString=JSON.stringify(_),r2||(r2=setInterval(v(function*(){var y,_=yield navigator.mediaDevices.enumerateDevices(),b=function(y,_){var b="undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(!b){if(Array.isArray(y)||(b=function(y,_){if(y){if("string"==typeof y)return Oa(y,_);var b=({}).toString.call(y).slice(8,-1);return"Object"===b&&y.constructor&&(b=y.constructor.name),"Map"===b||"Set"===b?Array.from(y):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Oa(y,_):void 0}}(y))){b&&(y=b);var E=0,i=function(){};return{s:i,n:function(){return E>=y.length?{done:!0}:{done:!1,value:y[E++]}},e:function(y){throw y},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,P=!0,I=!1;return{s:function(){b=b.call(y)},n:function(){var y=b.next();return P=y.done,y},e:function(y){I=!0,k=y},f:function(){try{P||null==b.return||b.return()}finally{if(I)throw k}}}}(r1.keys());try{for(b.s();!(y=b.n()).done;){var E=y.value,k=JSON.stringify(_);k!==r1.get(E).lastDevicesString&&(r1.get(E).lastDevicesString=k,E(_))}}catch(y){b.e(y)}finally{b.f()}}),3e3)))}))}function Da(){var y;return Po()||void 0!==(null===(y=navigator.mediaDevices)||void 0===y?void 0:y.ondevicechange)}var r3=new Set;function ja(y,_){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);_&&(E=E.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),b.push.apply(b,E)}return b}function Ra(y){for(var _=1;_<arguments.length;_++){var b=null!=arguments[_]?arguments[_]:{};_%2?ja(Object(b),!0).forEach(function(_){p(y,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):ja(Object(b)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(b,_))})}return y}var r4=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),r9=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),r5=Object.values(r4),r8=["v","a","sv","sa","cv","ca"],r6=(Object.freeze(r5.reduce(function(y,_,b){return y[_]=r8[b],y},{})),Object.freeze(r8.reduce(function(y,_,b){return y[_]=r5[b],y},{})),[r4.VIDEO,r4.AUDIO,r4.SCREEN_VIDEO,r4.SCREEN_AUDIO]),r7=Object.values(r9),nt=["p","s","t"],ni=(Object.freeze(r7.reduce(function(y,_,b){return y[_]=nt[b],y},{})),Object.freeze(nt.reduce(function(y,_,b){return y[_]=r7[b],y},{})),function(){function e(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=y.base,b=y.byUserId,E=y.byParticipantId;i(this,e),this.base=_,this.byUserId=b,this.byParticipantId=E}return c(e,[{key:"clone",value:function(){var y=new e;if(this.base instanceof na?y.base=this.base.clone():y.base=this.base,void 0!==this.byUserId)for(var _ in y.byUserId={},this.byUserId){var b=this.byUserId[_];y.byUserId[_]=b instanceof na?b.clone():b}if(void 0!==this.byParticipantId)for(var E in y.byParticipantId={},this.byParticipantId){var k=this.byParticipantId[E];y.byParticipantId[E]=k instanceof na?k.clone():k}return y}},{key:"toJSONObject",value:function(){var y={};if("boolean"==typeof this.base?y.base=this.base:this.base instanceof na&&(y.base=this.base.toJSONObject()),void 0!==this.byUserId)for(var _ in y.byUserId={},this.byUserId){var b=this.byUserId[_];y.byUserId[_]=b instanceof na?b.toJSONObject():b}if(void 0!==this.byParticipantId)for(var E in y.byParticipantId={},this.byParticipantId){var k=this.byParticipantId[E];y.byParticipantId[E]=k instanceof na?k.toJSONObject():k}return y}},{key:"toMinifiedJSONObject",value:function(){var y={};if(void 0!==this.base&&("boolean"==typeof this.base?y.b=this.base:y.b=this.base.toMinifiedJSONObject()),void 0!==this.byUserId)for(var _ in y.u={},this.byUserId){var b=this.byUserId[_];y.u[_]="boolean"==typeof b?b:b.toMinifiedJSONObject()}if(void 0!==this.byParticipantId)for(var E in y.p={},this.byParticipantId){var k=this.byParticipantId[E];y.p[E]="boolean"==typeof k?k:k.toMinifiedJSONObject()}return y}},{key:"normalize",value:function(){return this.base instanceof na&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map(function(y){var _=m(y,2),b=_[0],E=_[1];return[b,E instanceof na?E.normalize():E]}))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map(function(y){var _=m(y,2),b=_[0],E=_[1];return[b,E instanceof na?E.normalize():E]}))),this}}],[{key:"fromJSONObject",value:function(y){var _,b,E;if(void 0!==y.base&&(_="boolean"==typeof y.base?y.base:na.fromJSONObject(y.base)),void 0!==y.byUserId)for(var k in b={},y.byUserId){var P=y.byUserId[k];b[k]="boolean"==typeof P?P:na.fromJSONObject(P)}if(void 0!==y.byParticipantId)for(var I in E={},y.byParticipantId){var D=y.byParticipantId[I];E[I]="boolean"==typeof D?D:na.fromJSONObject(D)}return new e({base:_,byUserId:b,byParticipantId:E})}},{key:"fromMinifiedJSONObject",value:function(y){var _,b,E;if(void 0!==y.b&&(_="boolean"==typeof y.b?y.b:na.fromMinifiedJSONObject(y.b)),void 0!==y.u)for(var k in b={},y.u){var P=y.u[k];b[k]="boolean"==typeof P?P:na.fromMinifiedJSONObject(P)}if(void 0!==y.p)for(var I in E={},y.p){var D=y.p[I];E[I]="boolean"==typeof D?D:na.fromMinifiedJSONObject(D)}return new e({base:_,byUserId:b,byParticipantId:E})}},{key:"validateJSONObject",value:function(y){if("object"!==o(y))return[!1,"canReceive must be an object"];for(var _=["base","byUserId","byParticipantId"],b=0,E=Object.keys(y);b<E.length;b++){var k=E[b];if(!_.includes(k))return[!1,"canReceive can only contain keys (".concat(_.join(", "),")")];if("base"===k){var P=m(na.validateJSONObject(y.base,!0),2),I=P[0],D=P[1];if(!I)return[!1,D]}else{if("object"!==o(y[k]))return[!1,"invalid (non-object) value for field '".concat(k,"' in canReceive")];for(var j=0,L=Object.values(y[k]);j<L.length;j++){var R=L[j],F=m(na.validateJSONObject(R),2),V=F[0],J=F[1];if(!V)return[!1,J]}}}return[!0]}}])}()),na=function(){function e(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=y.video,b=y.audio,E=y.screenVideo,k=y.screenAudio,P=y.customVideo,I=y.customAudio;i(this,e),this.video=_,this.audio=b,this.screenVideo=E,this.screenAudio=k,this.customVideo=P,this.customAudio=I}return c(e,[{key:"clone",value:function(){var y=new e;return void 0!==this.video&&(y.video=this.video),void 0!==this.audio&&(y.audio=this.audio),void 0!==this.screenVideo&&(y.screenVideo=this.screenVideo),void 0!==this.screenAudio&&(y.screenAudio=this.screenAudio),void 0!==this.customVideo&&(y.customVideo=Ra({},this.customVideo)),void 0!==this.customAudio&&(y.customAudio=Ra({},this.customAudio)),y}},{key:"toJSONObject",value:function(){var y={};return void 0!==this.video&&(y.video=this.video),void 0!==this.audio&&(y.audio=this.audio),void 0!==this.screenVideo&&(y.screenVideo=this.screenVideo),void 0!==this.screenAudio&&(y.screenAudio=this.screenAudio),void 0!==this.customVideo&&(y.customVideo=Ra({},this.customVideo)),void 0!==this.customAudio&&(y.customAudio=Ra({},this.customAudio)),y}},{key:"toMinifiedJSONObject",value:function(){var y={};return void 0!==this.video&&(y.v=this.video),void 0!==this.audio&&(y.a=this.audio),void 0!==this.screenVideo&&(y.sv=this.screenVideo),void 0!==this.screenAudio&&(y.sa=this.screenAudio),void 0!==this.customVideo&&(y.cv=Ra({},this.customVideo)),void 0!==this.customAudio&&(y.ca=Ra({},this.customAudio)),y}},{key:"normalize",value:function(){function e(y,_){return y&&1===Object.keys(y).length&&y["*"]===_}return!(!0!==this.video||!0!==this.audio||!0!==this.screenVideo||!0!==this.screenAudio||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(!1!==this.video||!1!==this.audio||!1!==this.screenVideo||!1!==this.screenAudio||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(y){return new e({video:y,audio:y,screenVideo:y,screenAudio:y,customVideo:{"*":y},customAudio:{"*":y}})}},{key:"fromJSONObject",value:function(y){return new e({video:y.video,audio:y.audio,screenVideo:y.screenVideo,screenAudio:y.screenAudio,customVideo:void 0!==y.customVideo?Ra({},y.customVideo):void 0,customAudio:void 0!==y.customAudio?Ra({},y.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(y){return new e({video:y.v,audio:y.a,screenVideo:y.sv,screenAudio:y.sa,customVideo:y.cv,customAudio:y.ca})}},{key:"validateJSONObject",value:function(y,_){if("boolean"==typeof y)return[!0];if("object"!==o(y))return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var b=Object.keys(y),E=0;E<b.length;E++){var k=b[E];if(!r5.includes(k))return[!1,"invalid media type '".concat(k,"' in canReceive")];if(r6.includes(k)){if("boolean"!=typeof y[k])return[!1,"invalid (non-boolean) value for media type '".concat(k,"' in canReceive")]}else{if("object"!==o(y[k]))return[!1,"invalid (non-object) value for media type '".concat(k,"' in canReceive")];for(var P=0,I=Object.values(y[k]);P<I.length;P++)if("boolean"!=typeof I[P])return[!1,"invalid (non-boolean) value for entry within '".concat(k,"' in canReceive")];if(_&&void 0===y[k]["*"])return[!1,'canReceive "base" permission must specify "*" as an entry within \''.concat(k,"'")]}}return _&&b.length!==r5.length?[!1,'canReceive "base" permission must specify all media types: '.concat(r5.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])}(),no=["result"],ns=["preserveIframe"];function za(y,_){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);_&&(E=E.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),b.push.apply(b,E)}return b}function Ha(y){for(var _=1;_<arguments.length;_++){var b=null!=arguments[_]?arguments[_]:{};_%2?za(Object(b),!0).forEach(function(_){p(y,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):za(Object(b)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(b,_))})}return y}function Ka(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(y){}return(Ka=function(){return!!y})()}function Qa(y,_){var b="undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(!b){if(Array.isArray(y)||(b=function(y,_){if(y){if("string"==typeof y)return Xa(y,_);var b=({}).toString.call(y).slice(8,-1);return"Object"===b&&y.constructor&&(b=y.constructor.name),"Map"===b||"Set"===b?Array.from(y):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Xa(y,_):void 0}}(y))||_&&y&&"number"==typeof y.length){b&&(y=b);var E=0,i=function(){};return{s:i,n:function(){return E>=y.length?{done:!0}:{done:!1,value:y[E++]}},e:function(y){throw y},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,P=!0,I=!1;return{s:function(){b=b.call(y)},n:function(){var y=b.next();return P=y.done,y},e:function(y){I=!0,k=y},f:function(){try{P||null==b.return||b.return()}finally{if(I)throw k}}}}function Xa(y,_){(null==_||_>y.length)&&(_=y.length);for(var b=0,E=Array(_);b<_;b++)E[b]=y[b];return E}var nc={},nl="video",nu=Po()?{data:{}}:{data:{},topology:"none"},nd={present:0,hidden:0},nh={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},np=Object.keys(nh),nf=["state","volume","simulcastEncodings"],nm={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},nv={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},ng={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},ny={customIntegrations:{validate:js,help:Ds()},customTrayButtons:{validate:Ns,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(nv))},url:{validate:function(y){return"string"==typeof y},help:"url should be a string"},baseUrl:{validate:function(y){return"string"==typeof y},help:"baseUrl should be a string"},token:{validate:function(y){return"string"==typeof y},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(y,_){try{return _.validateDailyConfig(y),!0}catch(y){console.error("Failed to validate dailyConfig",y)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(y){return Rs(y,nm)},help:"reactNativeConfig should look like ".concat(JSON.stringify(nm),", all fields optional")},lang:{validate:function(y){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(y)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(y){try{return Es(y),!0}catch(y){return console.error(y),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(y,_){var b;if("boolean"==typeof y)return _._preloadCache.allowLocalVideo=y,!0;if(y instanceof MediaStreamTrack)_._sharedTracks.videoTrack=y,b={customTrack:rD};else{if(delete _._sharedTracks.videoTrack,"string"!=typeof y)return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;b={deviceId:y}}return _._updatePreloadCacheInputSettings({video:{settings:b}},!1),!0}},audioSource:{validate:function(y,_){var b;if("boolean"==typeof y)return _._preloadCache.allowLocalAudio=y,!0;if(y instanceof MediaStreamTrack)_._sharedTracks.audioTrack=y,b={customTrack:rD};else{if(delete _._sharedTracks.audioTrack,"string"!=typeof y)return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;b={deviceId:y}}return _._updatePreloadCacheInputSettings({audio:{settings:b}},!1),!0}},subscribeToTracksAutomatically:{validate:function(y,_){return _._preloadCache.subscribeToTracksAutomatically=y,!0}},theme:{validate:function(y){var _=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(y){for(var b=0,E=Object.keys(y);b<E.length;b++){var k=E[b];if(!_.includes(k))return console.error('unsupported color "'.concat(k,'". Valid colors: ').concat(_.join(", "))),!1;if(!y[k].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(k,' theme color should be provided in valid hex color format. Received: "').concat(y[k],'"')),!1}return!0};return"object"===o(y)&&("light"in y&&"dark"in y||"colors"in y)?"light"in y&&"dark"in y?"colors"in y.light?"colors"in y.dark?n(y.light.colors)&&n(y.dark.colors):(console.error('Dark theme is missing "colors" property.',y),!1):(console.error('Light theme is missing "colors" property.',y),!1):n(y.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',y),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(y){if("grid"in y){var _=y.grid;if("maxTilesPerPage"in _){if(!Number.isInteger(_.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(_.maxTilesPerPage,".")),!1;if(_.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in _){if(!Number.isInteger(_.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(_.minTilesPerPage,".")),!1;if(_.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in _&&_.minTilesPerPage>_.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(y){return Ts(y,{allowAllParticipantsKey:!1})},help:Ls({allowAllParticipantsKey:!1})},sendSettings:{validate:function(y,_){return!!function(y,_){try{return _.validateUpdateSendSettings(y),!0}catch(y){return console.error("Failed to validate send settings",y),!1}}(y,_)&&(_._preloadCache.sendSettings=y,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(y,_){var b;return!!Ms(y)&&(_._inputSettings||(_._inputSettings={}),As(y,null===(b=_.properties)||void 0===b?void 0:b.dailyConfig,_._sharedTracks),_._updatePreloadCacheInputSettings(y,!0),!0)},help:Is()},layout:{validate:function(y){return"custom-v1"===y||"browser"===y||"none"===y},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},n_={styles:{validate:function(y){for(var _ in y)if("cam"!==_&&"screen"!==_)return!1;if(y.cam){for(var b in y.cam)if("div"!==b&&"video"!==b)return!1}if(y.screen){for(var E in y.screen)if("div"!==E&&"video"!==E)return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(y,_){if(_._preloadCache.subscribeToTracksAutomatically)return!1;var b=[!0,!1,"staged"];if(b.includes(y)||!Po()&&"avatar"===y)return!0;var E=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],i=function(y){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var k in y)if("custom"===k){if(!b.includes(y[k])&&!i(y[k],!0))return!1}else{var P=!_&&!E.includes(k),I=!b.includes(y[k]);if(P||I)return!1}return!0};return i(y)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(Po()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(y){return!1===y},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(y){for(var _=0,b=Object.entries(y);_<b.length;_++){var E=m(b[_],2),k=E[0],P=E[1];switch(k){case"hasPresence":if("boolean"!=typeof P)return!1;break;case"canSend":if(P instanceof Set||P instanceof Array||Array.isArray(P)){var I,D=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],j=Qa(P);try{for(j.s();!(I=j.n()).done;){var L=I.value;if(!D.includes(L))return!1}}catch(y){j.e(y)}finally{j.f()}}else if("boolean"!=typeof P)return!1;(P instanceof Array||Array.isArray(P))&&(y.canSend=new Set(P));break;case"canReceive":var R=m(ni.validateJSONObject(P),2),F=R[0],V=R[1];if(!F)return console.error(V),!1;break;case"canAdmin":if(P instanceof Set||P instanceof Array||Array.isArray(P)){var J,et=["participants","streaming","transcription"],ei=Qa(P);try{for(ei.s();!(J=ei.n()).done;){var ea=J.value;if(!et.includes(ea))return!1}}catch(y){ei.e(y)}finally{ei.f()}}else if("boolean"!=typeof P)return!1;(P instanceof Array||Array.isArray(P))&&(y.canAdmin=new Set(P));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=(eo=v(function*(y){return new Promise(function(_,b){var E=[];y.forEach(function(k){return Promise.resolve(k).then(function(y){_(y)}).catch(function(_){E.push(_),E.length===y.length&&b(E)})})})}),function(y){return eo.apply(this,arguments)}));var nb=function(y){var _,b,E,k,P,I,D,j,L,R,F,V,J,et,ei,ea,eo,es,ec,eu,ed,ep,ef,em,ev,eg,ey,e_,eb,eS,ew,eE,ek,eT,eA,eO,eM,eP;function t(y){var _,b,E,k,P,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,t),k=l(k=t),p(E=u(this,Ka()?Reflect.construct(k,[],l(this).constructor):k.apply(this,P)),"startListeningForDeviceChanges",function(){La(E.handleDeviceChange)}),p(E,"stopListeningForDeviceChanges",function(){var y;y=E.handleDeviceChange,Da()?rX.has(y)&&(rX.delete(y),0===rX.size&&r0&&(navigator.mediaDevices.removeEventListener("devicechange",r0),r0=null)):r1.has(y)&&(r1.delete(y),0===r1.size&&r2&&(clearInterval(r2),r2=null))}),p(E,"handleDeviceChange",function(y){y=y.map(function(y){return JSON.parse(JSON.stringify(y))}),E.emitDailyJSEvent({action:"available-devices-updated",availableDevices:y})}),p(E,"handleNativeAppStateChange",(_=v(function*(y){if("destroyed"===y)return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield E.destroy());E.disableReactNativeAutoDeviceManagement("video")||("active"===y?E.camUnmutedBeforeLosingNativeActiveState&&E.setLocalVideo(!0):(E.camUnmutedBeforeLosingNativeActiveState=E.localVideo(),E.camUnmutedBeforeLosingNativeActiveState&&E.setLocalVideo(!1)))}),function(y){return _.apply(this,arguments)})),p(E,"handleNativeAudioFocusChange",function(y){E.disableReactNativeAutoDeviceManagement("audio")||(E._hasNativeAudioFocus=y,E.toggleParticipantAudioBasedOnNativeAudioFocus(),E._hasNativeAudioFocus?E.micUnmutedBeforeLosingNativeAudioFocus&&E.setLocalAudio(!0):(E.micUnmutedBeforeLosingNativeAudioFocus=E.localAudio(),E.setLocalAudio(!1)))}),p(E,"handleNativeSystemScreenCaptureStop",function(){E.stopScreenShare()}),!xo()&&!Po())throw Error("WebRTC not supported or suppressed");if(E.strictMode=void 0===I.strictMode||I.strictMode,E.allowMultipleCallInstances=null!==(b=I.allowMultipleCallInstances)&&void 0!==b&&b,Object.keys(nc).length&&(E._logDuplicateInstanceAttempt(),!E.allowMultipleCallInstances)){if(E.strictMode)throw Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),E.callClientId=T(),nc[E.callClientId]=E,window._daily.instances[E.callClientId]={},E._sharedTracks={},window._daily.instances[E.callClientId].tracks=E._sharedTracks,I.dailyJsVersion=t.version(),E._iframe=y,E._callObjectMode="none"===I.layout&&!E._iframe,E._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},void 0!==I.showLocalVideo?E._callObjectMode?console.error("showLocalVideo is not available in call object mode"):E._showLocalVideo=!!I.showLocalVideo:E._showLocalVideo=!0,void 0!==I.showParticipantsBar?E._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):E._showParticipantsBar=!!I.showParticipantsBar:E._showParticipantsBar=!0,void 0!==I.customIntegrations?E._callObjectMode?console.error("customIntegrations is not available in call object mode"):E._customIntegrations=I.customIntegrations:E._customIntegrations={},void 0!==I.customTrayButtons?E._callObjectMode?console.error("customTrayButtons is not available in call object mode"):E._customTrayButtons=I.customTrayButtons:E._customTrayButtons={},void 0!==I.activeSpeakerMode?E._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):E._activeSpeakerMode=!!I.activeSpeakerMode:E._activeSpeakerMode=!1,I.receiveSettings?E._callObjectMode?E._receiveSettings=I.receiveSettings:console.error("receiveSettings is only available in call object mode"):E._receiveSettings={},E.validateProperties(I),E.properties=Ha({},I),E._inputSettings||(E._inputSettings={}),E._callObjectLoader=E._callObjectMode?new rW(E.callClientId):null,E._callState=e0,E._isPreparingToJoin=!1,E._accessState={access:to},E._meetingSessionSummary={},E._finalSummaryOfPrevSession={},E._meetingSessionState=Us(nu,E._callObjectMode),E._nativeInCallAudioMode=nl,E._participants={},E._isScreenSharing=!1,E._participantCounts=nd,E._rmpPlayerState={},E._waitingParticipants={},E._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},E._activeSpeaker={},E._localAudioLevel=0,E._isLocalAudioLevelObserverRunning=!1,E._remoteParticipantsAudioLevel={},E._isRemoteParticipantsAudioLevelObserverRunning=!1,E._maxAppMessageSize=4096,E._messageChannel=Po()?new r$:new rV,E._iframe&&(E._iframe.requestFullscreen?E._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===E._iframe?(E.emitDailyJSEvent({action:rg}),E.sendMessageToCallMachine({action:rg})):(E.emitDailyJSEvent({action:ry}),E.sendMessageToCallMachine({action:ry}))}):E._iframe.webkitRequestFullscreen&&E._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===E._iframe?(E.emitDailyJSEvent({action:rg}),E.sendMessageToCallMachine({action:rg})):(E.emitDailyJSEvent({action:ry}),E.sendMessageToCallMachine({action:ry}))})),Po()){var D=E.nativeUtils();D.addAudioFocusChangeListener&&D.removeAudioFocusChangeListener&&D.addAppStateChangeListener&&D.removeAppStateChangeListener&&D.addSystemScreenCaptureStopListener&&D.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),E._hasNativeAudioFocus=!0,D.addAudioFocusChangeListener(E.handleNativeAudioFocusChange),D.addAppStateChangeListener(E.handleNativeAppStateChange),D.addSystemScreenCaptureStopListener(E.handleNativeSystemScreenCaptureStop)}return E._callObjectMode&&E.startListeningForDeviceChanges(),E._messageChannel.addListenerForMessagesFromCallMachine(E.handleMessageFromCallMachine,E.callClientId,E),E}return f(t,y),c(t,[{key:"destroy",value:(eP=v(function*(){try{yield this.leave()}catch(y){}var y,_=this._iframe;if(_){var b=_.parentElement;b&&b.removeChild(_)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),Po()){var E=this.nativeUtils();E.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),E.removeAppStateChangeListener(this.handleNativeAppStateChange),E.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete nc[this.callClientId],(null===(y=window)||void 0===y||null===(y=y._daily)||void 0===y?void 0:y.instances)&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return eP.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(y){var _=y.bodyClass,b=y.cssFile,E=y.cssText;return ws(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(b),bodyClass:_,cssText:E}),this}},{key:"iframe",value:function(){return ws(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return bs(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return bs(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(y,_){for(var b in _){if(!n_[b])throw Error("unrecognized updateParticipant property ".concat(b));if(n_[b].validate&&!n_[b].validate(_[b],this,this._participants[y]))throw Error(n_[b].help)}}},{key:"updateParticipant",value:function(y,_){return this._participants.local&&this._participants.local.session_id===y&&(y="local"),y&&_&&(this.validateParticipantProperties(y,_),this.sendMessageToCallMachine({action:"update-participant",id:y,properties:_})),this}},{key:"updateParticipants",value:function(y){var _=this._participants.local&&this._participants.local.session_id;for(var b in y)b===_&&(b="local"),b&&y[b]&&this.validateParticipantProperties(b,y[b]);return this.sendMessageToCallMachine({action:"update-participants",participants:y}),this}},{key:"updateWaitingParticipant",value:(eM=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(bs(this._callObjectMode,"updateWaitingParticipant()"),vs(this._callState,"updateWaitingParticipant()"),"string"!=typeof _||"object"!==o(b))throw Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(E,k){y.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:_,updates:b},function(y){y.error&&k(y.error),y.id||k(Error("unknown error in updateWaitingParticipant()")),E({id:y.id})})})}),function(){return eM.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(eO=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(bs(this._callObjectMode,"updateWaitingParticipants()"),vs(this._callState,"updateWaitingParticipants()"),"object"!==o(_))throw Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(b,E){y.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:_},function(y){y.error&&E(y.error),y.ids||E(Error("unknown error in updateWaitingParticipants()")),b({ids:y.ids})})})}),function(){return eO.apply(this,arguments)})},{key:"requestAccess",value:(eA=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=_.access,E=void 0===b?{level:ts}:b,k=_.name,P=void 0===k?"":k;return bs(this._callObjectMode,"requestAccess()"),vs(this._callState,"requestAccess()"),new Promise(function(_,b){y.sendMessageToCallMachine({action:"daily-method-request-access",access:E,name:P},function(y){y.error&&b(y.error),y.access||b(Error("unknown error in requestAccess()")),_({access:y.access,granted:y.granted})})})}),function(){return eA.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"forceDiscardTrack"in _&&(Po()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),_={}):y&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),_={})),this.sendMessageToCallMachine({action:"local-audio",state:y,options:_}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(y){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:y}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(y){return this.sendMessageToCallMachine({action:"local-video",state:y}),this}},{key:"_setAllowLocalAudio",value:function(y){if(this._preloadCache.allowLocalAudio=y,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:y}),this}},{key:"_setAllowLocalVideo",value:function(y){if(this._preloadCache.allowLocalVideo=y,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:y}),this}},{key:"getReceiveSettings",value:(eT=v(function*(y){var _=this,b=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).showInheritedValues,E=void 0!==b&&b;if(bs(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(o(y)){case"string":return new Promise(function(b){_.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:y,showInheritedValues:E},function(y){b(y.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(y){return eT.apply(this,arguments)})},{key:"updateReceiveSettings",value:(ek=v(function*(y){var _=this;if(bs(this._callObjectMode,"updateReceiveSettings()"),!Ts(y,{allowAllParticipantsKey:!0}))throw Error(Ls({allowAllParticipantsKey:!0}));return vs(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(b){_.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:y},function(y){b({receiveSettings:y.receiveSettings})})})}),function(y){return ek.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(y,_){if(y){var b={};if(y.audio){y.audio.settings&&(!Object.keys(y.audio.settings).length&&_||(b.audio={settings:Ha({},y.audio.settings)})),_&&null!==(E=b.audio)&&void 0!==E&&null!==(E=E.settings)&&void 0!==E&&E.customTrack&&(b.audio.settings={customTrack:this._sharedTracks.audioTrack});var E,k,P,I="none"===(null===(k=y.audio.processor)||void 0===k?void 0:k.type)&&(null===(P=y.audio.processor)||void 0===P?void 0:P._isDefaultWhenNone);if(y.audio.processor&&!I){var D=Ha({},y.audio.processor);delete D._isDefaultWhenNone,b.audio=Ha(Ha({},b.audio),{},{processor:D})}}if(y.video){y.video.settings&&(!Object.keys(y.video.settings).length&&_||(b.video={settings:Ha({},y.video.settings)})),_&&null!==(j=b.video)&&void 0!==j&&null!==(j=j.settings)&&void 0!==j&&j.customTrack&&(b.video.settings={customTrack:this._sharedTracks.videoTrack});var j,L,R,F="none"===(null===(L=y.video.processor)||void 0===L?void 0:L.type)&&(null===(R=y.video.processor)||void 0===R?void 0:R._isDefaultWhenNone);if(y.video.processor&&!F){var V=Ha({},y.video.processor);delete V._isDefaultWhenNone,b.video=Ha(Ha({},b.video),{},{processor:V})}}return b}}},{key:"getInputSettings",value:function(){var y=this;return ws(),new Promise(function(_){_(y._getInputSettings())})}},{key:"_getInputSettings",value:function(){var y,_,b,E,k,P,I={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(y=(null===(b=this._inputSettings)||void 0===b?void 0:b.video)||I,_=(null===(E=this._inputSettings)||void 0===E?void 0:E.audio)||I):(y=(null===(k=this._preloadCache)||void 0===k||null===(k=k.inputSettings)||void 0===k?void 0:k.video)||I,_=(null===(P=this._preloadCache)||void 0===P||null===(P=P.inputSettings)||void 0===P?void 0:P.audio)||I);var D={audio:_,video:y};return this._prepInputSettingsForSharing(D,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(y,_){var b,E,k,P,I,D,j=this._inputSettings||{},L={};y.video?(L.video={},y.video.settings?(L.video.settings={},_||y.video.settings.customTrack||null===(k=j.video)||void 0===k||!k.settings?L.video.settings=y.video.settings:L.video.settings=Ha(Ha({},j.video.settings),y.video.settings),Object.keys(L.video.settings).length||delete L.video.settings):null!==(b=j.video)&&void 0!==b&&b.settings&&(L.video.settings=j.video.settings),y.video.processor?L.video.processor=y.video.processor:null!==(E=j.video)&&void 0!==E&&E.processor&&(L.video.processor=j.video.processor)):j.video&&(L.video=j.video),y.audio?(L.audio={},y.audio.settings?(L.audio.settings={},_||y.audio.settings.customTrack||null===(D=j.audio)||void 0===D||!D.settings?L.audio.settings=y.audio.settings:L.audio.settings=Ha(Ha({},j.audio.settings),y.audio.settings),Object.keys(L.audio.settings).length||delete L.audio.settings):null!==(P=j.audio)&&void 0!==P&&P.settings&&(L.audio.settings=j.audio.settings),y.audio.processor?L.audio.processor=y.audio.processor:null!==(I=j.audio)&&void 0!==I&&I.processor&&(L.audio.processor=j.audio.processor)):j.audio&&(L.audio=j.audio),this._maybeUpdateInputSettings(L)}},{key:"_devicesFromInputSettings",value:function(y){var _,b,E=(null==y||null===(_=y.video)||void 0===_||null===(_=_.settings)||void 0===_?void 0:_.deviceId)||null,k=(null==y||null===(b=y.audio)||void 0===b||null===(b=b.settings)||void 0===b?void 0:b.deviceId)||null,P=this._preloadCache.outputDeviceId||null;return{camera:E?{deviceId:E}:{},mic:k?{deviceId:k}:{},speaker:P?{deviceId:P}:{}}}},{key:"updateInputSettings",value:(eE=v(function*(y){var _=this;return ws(),Ms(y)?y.video||y.audio?(As(y,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(y,!0),this._getInputSettings()):new Promise(function(b,E){_.sendMessageToCallMachine({action:"update-input-settings",inputSettings:y},function(k){if(k.error)E(k.error);else{if(k.returnPreloadCache)return _._updatePreloadCacheInputSettings(y,!0),void b(_._getInputSettings());_._maybeUpdateInputSettings(k.inputSettings),b(_._prepInputSettingsForSharing(k.inputSettings,!0))}})})):this._getInputSettings():(console.error(Is()),Promise.reject(Is()))}),function(y){return eE.apply(this,arguments)})},{key:"setBandwidth",value:function(y){var _=y.kbs,b=y.trackConstraints;if(ws(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:_,trackConstraints:b}),this}},{key:"getDailyLang",value:function(){var y=this;if(ws(),this._callMachineInitialized)return new Promise(function(_){y.sendMessageToCallMachine({action:"get-daily-lang"},function(y){delete y.action,delete y.callbackStamp,_(y)})})}},{key:"setDailyLang",value:function(y){return ws(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:y}),this}},{key:"setProxyUrl",value:function(y){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:y}),this}},{key:"setIceConfig",value:function(y){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:y}),this}},{key:"meetingSessionSummary",value:function(){return[e9,e5].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(ew=v(function*(){var y=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),vs(this._callState,"getMeetingSession()"),new Promise(function(_){y.sendMessageToCallMachine({action:"get-meeting-session"},function(y){delete y.action,delete y.callbackStamp,_(y)})})}),function(){return ew.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return vs(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";bs(this._callObjectMode,"setMeetingSessionData()"),vs(this._callState,"setMeetingSessionData");try{new rH({data:y,mergeStrategy:_})}catch(y){throw console.error(y),y}try{this.sendMessageToCallMachine({action:"set-session-data",data:y,mergeStrategy:_})}catch(y){throw Error("Error setting meeting session data: ".concat(y))}}},{key:"setUserName",value:function(y,_){var b=this;return this.properties.userName=y,new Promise(function(E){b.sendMessageToCallMachine({action:"set-user-name",name:null!=y?y:"",thisMeetingOnly:Po()||!!_&&!!_.thisMeetingOnly},function(y){delete y.action,delete y.callbackStamp,E(y)})})}},{key:"setUserData",value:(eS=v(function*(y){var _=this;try{Es(y)}catch(y){throw console.error(y),y}if(this.properties.userData=y,this._callMachineInitialized)return new Promise(function(b){try{_.sendMessageToCallMachine({action:"set-user-data",userData:y},function(y){delete y.action,delete y.callbackStamp,b(y)})}catch(y){throw Error("Error setting user data: ".concat(y))}})}),function(y){return eS.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(y){if(y&&(y<100||"number"!=typeof y))throw Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(y){var _=this;if("undefined"==typeof AudioWorkletNode&&!Po())throw Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(y),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(b,E){_.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:y},function(y){_._isLocalAudioLevelObserverRunning=!y.error,y.error?E({error:y.error}):b()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:y}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(y){var _=this;if(this.validateAudioLevelInterval(y),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(b,E){_.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:y},function(y){_._isRemoteParticipantsAudioLevelObserverRunning=!y.error,y.error?E({error:y.error}):b()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:y}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(eb=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(bs(this._callObjectMode,"startCamera()"),ms(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(_)}catch(y){return Promise.reject(y)}else{if(this._didPreAuth){if(_.url&&_.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(_.token&&_.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(_),this.properties=Ha(Ha({},this.properties),_)}return new Promise(function(_){y._preloadCache.inputSettings=y._prepInputSettingsForSharing(y._inputSettings,!1),y.sendMessageToCallMachine({action:"start-camera",properties:hs(y.properties,y.callClientId),preloadCache:hs(y._preloadCache,y.callClientId)},function(y){_({camera:y.camera,mic:y.mic,speaker:y.speaker})})})}),function(){return eb.apply(this,arguments)})},{key:"validateCustomTrack",value:function(y,_,b){if(b&&b.length>50)throw Error("Custom track `trackName` must not be more than 50 characters");if(_&&"music"!==_&&"speech"!==_&&!(_ instanceof Object))throw Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(b&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(b))throw Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(y instanceof MediaStreamTrack))throw Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{track:track,mode:mode,trackName:trackName,ignoreAudioLevel:ignoreAudioLevel};return ws(),vs(this._callState,"startCustomTrack()"),this.validateCustomTrack(_.track,_.mode,_.trackName),new Promise(function(b,E){y._sharedTracks.customTrack=_.track,_.track=rD,y.sendMessageToCallMachine({action:"start-custom-track",properties:_},function(y){y.error?E({error:y.error}):b(y.mediaTag)})})}},{key:"stopCustomTrack",value:function(y){var _=this;return ws(),vs(this._callState,"stopCustomTrack()"),new Promise(function(b){_.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:y},function(y){b(y.mediaTag)})})}},{key:"setCamera",value:function(y){var _=this;return ks(),ys(this._callMachineInitialized,"setCamera()"),new Promise(function(b){_.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:y},function(y){b({device:y.device})})})}},{key:"setAudioDevice",value:(e_=v(function*(y){return ks(),this.nativeUtils().setAudioDevice(y),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(y){return e_.apply(this,arguments)})},{key:"cycleCamera",value:function(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(b){y.sendMessageToCallMachine({action:"cycle-camera",properties:_},function(y){b({device:y.device})})})}},{key:"cycleMic",value:function(){var y=this;return ws(),new Promise(function(_){y.sendMessageToCallMachine({action:"cycle-mic"},function(y){_({device:y.device})})})}},{key:"getCameraFacingMode",value:function(){var y=this;return ks(),new Promise(function(_){y.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(y){_(y.facingMode)})})}},{key:"setInputDevicesAsync",value:(ey=v(function*(y){var _=this,b=y.audioDeviceId,E=y.videoDeviceId,k=y.audioSource,P=y.videoSource;if(ws(),void 0!==k&&(b=k),void 0!==P&&(E=P),"boolean"==typeof b&&(this._setAllowLocalAudio(b),b=void 0),"boolean"==typeof E&&(this._setAllowLocalVideo(E),E=void 0),!b&&!E)return yield this.getInputDevices();var I={};return b&&(b instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=b,b=rD,I.audio={settings:{customTrack:b}}):(delete this._sharedTracks.audioTrack,I.audio={settings:{deviceId:b}})),E&&(E instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=E,E=rD,I.video={settings:{customTrack:E}}):(delete this._sharedTracks.videoTrack,I.video={settings:{deviceId:E}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(I,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(y){_.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:b,videoDeviceId:E},function(b){if(delete b.action,delete b.callbackStamp,b.returnPreloadCache)return _._updatePreloadCacheInputSettings(I,!1),void y(_._devicesFromInputSettings(_._inputSettings));y(b)})})}),function(y){return ey.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(eg=v(function*(y){var _=this,b=y.outputDeviceId;if(ws(),!b||"string"!=typeof b)throw Error("outputDeviceId must be provided and must be a valid device id");return this._preloadCache.outputDeviceId=b,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(y,E){_.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:b},function(b){if(delete b.action,delete b.callbackStamp,b.error){var k=Error(b.error.message);return k.type=b.error.type,void E(k)}b.returnPreloadCache?y(_._devicesFromInputSettings(_._inputSettings)):y(b)})})}),function(y){return eg.apply(this,arguments)})},{key:"getInputDevices",value:(ev=v(function*(){var y=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(_){y.sendMessageToCallMachine({action:"get-input-devices"},function(b){b.returnPreloadCache?_(y._devicesFromInputSettings(y._inputSettings)):_({camera:b.camera,mic:b.mic,speaker:b.speaker})})})}),function(){return ev.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ks(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(y){if(ks(),[nl,"voice"].includes(y)){if(y!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=y,!this.disableReactNativeAutoDeviceManagement("audio")&&gs(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",y)}},{key:"preAuth",value:(em=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(bs(this._callObjectMode,"preAuth()"),ms(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(_)),!_.url)throw Error("preAuth() requires at least a url to be provided");return this.validateProperties(_),this.properties=Ha(Ha({},this.properties),_),new Promise(function(_,b){y._preloadCache.inputSettings=y._prepInputSettingsForSharing(y._inputSettings,!1),y.sendMessageToCallMachine({action:"daily-method-preauth",properties:hs(y.properties,y.callClientId),preloadCache:hs(y._preloadCache,y.callClientId)},function(E){return E.error?b(E.error):E.access?(y._didPreAuth=!0,void _({access:E.access})):b(Error("unknown error in preAuth()"))})})}),function(){return em.apply(this,arguments)})},{key:"load",value:(ef=v(function*(y){var _=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw Error("Use after destroy");if(y&&(this.validateProperties(y),this.properties=Ha(Ha({},this.properties),y)),!this._callObjectMode&&!this.properties.url)throw Error("can't load iframe meeting because url property isn't set");return this._updateCallState(e1),this.emitDailyJSEvent({action:tj}),this._callObjectMode?new Promise(function(y,b){_._callObjectLoader.cancel();var E=Date.now();_._callObjectLoader.load(_.properties.dailyConfig,function(b){_._bundleLoadTime=b?"no-op":Date.now()-E,_._updateCallState(e2),b&&_.emitDailyJSEvent({action:tR}),y()},function(y,E){if(_.emitDailyJSEvent({action:tL}),!E){_._updateCallState(e5),_.resetMeetingDependentVars();var k={action:rA,errorMsg:y.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:y,bundleUrl:C(_.properties.dailyConfig)}}};_._maybeSendToSentry(k),_.emitDailyJSEvent(k),b(y.msg)}})}):(this._iframe.src=A(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(y,b){_._loadedCallback=function(E){_._callState!==e5?(_._updateCallState(e2),(_.properties.cssFile||_.properties.cssText)&&_.loadCss(_.properties),y()):b(E)}}))}}),function(y){return ef.apply(this,arguments)})},{key:"join",value:(ep=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var b=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(_)}catch(y){return this.updateIsPreparingToJoin(!1),Promise.reject(y)}}else{if(b=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(_.url&&_.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(_.token&&_.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(_.url&&!this._callObjectMode&&_.url&&_.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(_.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(_),this.properties=Ha(Ha({},this.properties),_)}return void 0!==_.showLocalVideo&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!_.showLocalVideo),void 0!==_.showParticipantsBar&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!_.showParticipantsBar),this._callState===e4||this._callState===e3?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(e3,!1),this.emitDailyJSEvent({action:tF}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:hs(this.properties,this.callClientId),preloadCache:hs(this._preloadCache,this.callClientId)}),new Promise(function(_,E){y._joinedCallback=function(k,P){if(y._callState!==e5){if(y._updateCallState(e4),k)for(var I in k){if(y._callObjectMode){var D=y._callMachine().store;wa(k[I],D),ka(k[I],D),Ta(k[I],y._participants[I],D)}y._participants[I]=Ha({},k[I]),y.toggleParticipantAudioBasedOnNativeAudioFocus()}b&&y.loadCss(y.properties),_(k)}else E(P)}}))}),function(){return ep.apply(this,arguments)})},{key:"leave",value:(ed=v(function*(){var y=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(_){y._callState===e9||y._callState===e5?_():y._callObjectLoader&&!y._callObjectLoader.loaded?(y._callObjectLoader.cancel(),y._updateCallState(e9),y.resetMeetingDependentVars(),y.emitDailyJSEvent({action:e9}),_()):(y._resolveLeave=_,y.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return ed.apply(this,arguments)})},{key:"startScreenShare",value:(eu=v(function*(){var y=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ys(this._callMachineInitialized,"startScreenShare()"),_.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",_.screenVideoSendSettings),_.mediaStream&&(this._sharedTracks.screenMediaStream=_.mediaStream,_.mediaStream=rD),"undefined"!=typeof DailyNativeUtils&&void 0!==DailyNativeUtils.isIOS&&DailyNativeUtils.isIOS){var b=this.nativeUtils();if(yield b.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:rT,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});b.setSystemScreenCaptureStartCallback(function(){b.setSystemScreenCaptureStartCallback(null),y.sendMessageToCallMachine({action:rM,captureOptions:_})}),b.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:rM,captureOptions:_})}),function(){return eu.apply(this,arguments)})},{key:"stopScreenShare",value:function(){ys(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=y.type;if(_&&"cloud"!==_&&"raw-tracks"!==_&&"local"!==_)throw Error("invalid type: ".concat(_,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(Ha({action:"local-recording-start"},y))}},{key:"updateRecording",value:function(y){var _=y.layout,b=y.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:void 0===_?{preset:"default"}:_,instanceId:b})}},{key:"stopRecording",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(Ha({action:"local-recording-stop"},y))}},{key:"startLiveStreaming",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(Ha({action:"daily-method-start-live-streaming"},y))}},{key:"updateLiveStreaming",value:function(y){var _=y.layout,b=y.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:void 0===_?{preset:"default"}:_,instanceId:b})}},{key:"addLiveStreamingEndpoints",value:function(y){var _=y.endpoints,b=y.instanceId;this.sendMessageToCallMachine({action:rP,endpointsOp:"add-endpoints",endpoints:_,instanceId:b})}},{key:"removeLiveStreamingEndpoints",value:function(y){var _=y.endpoints,b=y.instanceId;this.sendMessageToCallMachine({action:rP,endpointsOp:"remove-endpoints",endpoints:_,instanceId:b})}},{key:"stopLiveStreaming",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(Ha({action:"daily-method-stop-live-streaming"},y))}},{key:"validateDailyConfig",value:function(y){y.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(y.camSimulcastEncodings)),y.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),Fo()&&y.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(y){if(!(y instanceof Array||Array.isArray(y)))throw Error("encodings must be an Array");if(!Vs(y.length,1,3))throw Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var E=0;E<y.length;E++){var k=y[E];for(var P in this._validateEncodingLayerHasValidProperties(k),k)if(np.includes(P)){if("number"!=typeof k[P])throw Error("".concat(P," must be a number"));if(_){var I=_[P],D=I.min,j=I.max;if(!Vs(k[P],D,j))throw Error("".concat(P," value not in range. valid range: ").concat(D," to ").concat(j))}}else if(!["active","scalabilityMode"].includes(P))throw Error("Invalid key ".concat(P,", valid keys are:")+Object.values(np));if(b&&!k.hasOwnProperty("maxBitrate"))throw Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(ec=v(function*(y){var _=this,b=y.url,E=y.settings,k=void 0===E?{state:rR.PLAY}:E;try{(function(y){if("string"!=typeof y)throw Error('url parameter must be "string" type')})(b),Fs(k),function(y){for(var _ in y)if(!nf.includes(_))throw Error("Invalid key ".concat(_,", valid keys are: ").concat(nf));y.simulcastEncodings&&this.validateSimulcastEncodings(y.simulcastEncodings,nh,!0)}(k)}catch(y){throw console.error("invalid argument Error: ".concat(y)),console.error('startRemoteMediaPlayer arguments must be of the form:\n  { url: "playback url",\n  settings?:\n  {state: "play"|"pause", simulcastEncodings?: [{}] } }'),y}return new Promise(function(y,E){_.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:b,settings:k},function(_){_.error?E({error:_.error,errorMsg:_.errorMsg}):y({session_id:_.session_id,remoteMediaPlayerState:{state:_.state,settings:_.settings}})})})}),function(y){return ec.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(es=v(function*(y){var _=this;if("string"!=typeof y)throw Error(" remotePlayerID must be of type string");return new Promise(function(b,E){_.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:y},function(y){y.error?E({error:y.error,errorMsg:y.errorMsg}):b()})})}),function(y){return es.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(eo=v(function*(y){var _=this,b=y.session_id,E=y.settings;try{Fs(E)}catch(y){throw console.error("invalid argument Error: ".concat(y)),console.error('updateRemoteMediaPlayer arguments must be of the form:\n  session_id: "participant session",\n  { settings?: {state: "play"|"pause"} }'),y}return new Promise(function(y,k){_.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:b,settings:E},function(_){_.error?k({error:_.error,errorMsg:_.errorMsg}):y({session_id:_.session_id,remoteMediaPlayerState:{state:_.state,settings:_.settings}})})})}),function(y){return eo.apply(this,arguments)})},{key:"startTranscription",value:function(y){vs(this._callState,"startTranscription()"),this.sendMessageToCallMachine(Ha({action:"daily-method-start-transcription"},y))}},{key:"updateTranscription",value:function(y){if(vs(this._callState,"updateTranscription()"),!y)throw Error("updateTranscription Error: options is mandatory");if("object"!==o(y))throw Error("updateTranscription Error: options must be object type");if(y.participants&&!Array.isArray(y.participants))throw Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(Ha({action:"daily-method-update-transcription"},y))}},{key:"stopTranscription",value:function(y){if(vs(this._callState,"stopTranscription()"),y&&"object"!==o(y))throw Error("stopTranscription Error: options must be object type");if(y&&!y.instanceId)throw Error('"instanceId" not provided');this.sendMessageToCallMachine(Ha({action:"daily-method-stop-transcription"},y))}},{key:"startDialOut",value:(ea=v(function*(y){var _=this;vs(this._callState,"startDialOut()");var n=function(y){if(y){if(!Array.isArray(y))throw Error("Error starting dial out: audio codec must be an array");if(y.length<=0)throw Error("Error starting dial out: audio codec array specified but empty");y.forEach(function(y){if("string"!=typeof y)throw Error("Error starting dial out: audio codec must be a string");if("OPUS"!==y&&"PCMU"!==y&&"PCMA"!==y&&"G722"!==y)throw Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!y.sipUri&&!y.phoneNumber)throw Error("Error starting dial out: either a sip uri or phone number must be provided");if(y.sipUri&&y.phoneNumber)throw Error("Error starting dial out: only one of sip uri or phone number must be provided");if(y.sipUri){if("string"!=typeof y.sipUri)throw Error("Error starting dial out: sipUri must be a string");if(!y.sipUri.startsWith("sip:"))throw Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(y.video&&"boolean"!=typeof y.video)throw Error("Error starting dial out: video must be a boolean value");!function(y){if(y&&(n(y.audio),y.video)){if(!Array.isArray(y.video))throw Error("Error starting dial out: video codec must be an array");if(y.video.length<=0)throw Error("Error starting dial out: video codec array specified but empty");y.video.forEach(function(y){if("string"!=typeof y)throw Error("Error starting dial out: video codec must be a string");if("H264"!==y&&"VP8"!==y)throw Error("Error starting dial out: video codec must be H264 or VP8")})}}(y.codecs)}if(y.phoneNumber){if("string"!=typeof y.phoneNumber)throw Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(y.phoneNumber))throw Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");y.codecs&&n(y.codecs.audio)}if(y.callerId){if("string"!=typeof y.callerId)throw Error("Error starting dial out: callerId must be a string");if(y.sipUri)throw Error("Error starting dial out: callerId not allowed with sipUri")}if(y.displayName){if("string"!=typeof y.displayName)throw Error("Error starting dial out: displayName must be a string");if(y.displayName.length>=200)throw Error("Error starting dial out: displayName length must be less than 200")}if(y.userId){if("string"!=typeof y.userId)throw Error("Error starting dial out: userId must be a string");if(y.userId.length>36)throw Error("Error starting dial out: userId length must be less than or equal to 36")}if(ps(y),y.permissions&&y.permissions.canReceive){var b=m(ni.validateJSONObject(y.permissions.canReceive),2),E=b[0],k=b[1];if(!E)throw Error(k)}if(y.provider){if("daily"!==y.provider)throw Error("Error: provider can be set only to 'daily', got: ".concat(y.provider));if(y.phoneNumber)throw Error("Error starting dial out: provider valid only for sipUri, not phoneNumber");console.warn("(pre-beta) provider=daily is currently in pre-beta, things might break!")}return new Promise(function(b,E){_.sendMessageToCallMachine(Ha({action:"dialout-start"},y),function(y){y.error?E(y.error):b(y)})})}),function(y){return ea.apply(this,arguments)})},{key:"stopDialOut",value:function(y){var _=this;return vs(this._callState,"stopDialOut()"),new Promise(function(b,E){_.sendMessageToCallMachine(Ha({action:"dialout-stop"},y),function(y){y.error?E(y.error):b(y)})})}},{key:"sipCallTransfer",value:(ei=v(function*(y){var _=this;if(vs(this._callState,"sipCallTransfer()"),!y)throw Error("sipCallTransfer() requires a sessionId and toEndPoint");return y.useSipRefer=!1,xs(y,"sipCallTransfer"),ps(y),new Promise(function(b,E){_.sendMessageToCallMachine(Ha({action:rx},y),function(y){y.error?E(y.error):b(y)})})}),function(y){return ei.apply(this,arguments)})},{key:"sipRefer",value:(et=v(function*(y){var _=this;if(vs(this._callState,"sipRefer()"),!y)throw Error("sessionId and toEndPoint are mandatory parameter");return y.useSipRefer=!0,xs(y,"sipRefer"),new Promise(function(b,E){_.sendMessageToCallMachine(Ha({action:rx},y),function(y){y.error?E(y.error):b(y)})})}),function(y){return et.apply(this,arguments)})},{key:"sendDTMF",value:(J=v(function*(y){var _=this;return vs(this._callState,"sendDTMF()"),function(y){var _=y.sessionId,b=y.tones;if(!_||!b)throw Error("sessionId and tones are mandatory parameter");if("string"!=typeof _||"string"!=typeof b)throw Error("sessionId and tones should be of string type");if(b.length>20)throw Error("tones string must be upto 20 characters");var E=b.match(/[^0-9A-D*#]/g);if(E&&E[0])throw Error("".concat(E[0]," is not valid DTMF tone"))}(y),new Promise(function(b,E){_.sendMessageToCallMachine(Ha({action:"send-dtmf"},y),function(y){y.error?E(y.error):b(y)})})}),function(y){return J.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var y=this;return this._callState!==e4?Promise.resolve(Ha({stats:{latest:{}}},this._network)):new Promise(function(_){y.sendMessageToCallMachine({action:"get-calc-stats"},function(b){_(Ha(Ha({},y._network),{},{stats:b.stats}))})})}},{key:"testWebsocketConnectivity",value:(V=v(function*(){var y=this;if(_s(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(y){return Promise.reject(y)}return new Promise(function(_,b){y.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(y){y.error?b(y.error):_(y.results)})})}),function(){return V.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(y){return y?y instanceof MediaStreamTrack?!!(y&&"live"===y.readyState&&(!y.muted||r3.has(y.id)))||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(F=v(function*(){var y=this;ws(),bs(this._callObjectMode,"testCallQuality()"),ys(this._callMachineInitialized,"testCallQuality()",null,!0),ms(this._callState,this._isPreparingToJoin,"testCallQuality()");var _=this._testCallAlreadyInProgress,n=function(b){_||(y._testCallInProgress=b)};if(n(!0),this.needsLoad())try{var b=this._callState;yield this.load(),this._callState=b}catch(y){return n(!1),Promise.reject(y)}return new Promise(function(_){y.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:y.properties.dailyJsVersion},function(b){var E=b.results,k=E.result,P=r(E,no);if("failed"===k){var I,D=Ha({},P);null!==(I=P.error)&&void 0!==I&&I.details?(P.error.details=JSON.parse(P.error.details),D.error=Ha(Ha({},D.error),{},{details:Ha({},D.error.details)}),D.error.details.duringTest="testCallQuality"):(D.error=D.error?Ha({},D.error):{},D.error.details={duringTest:"testCallQuality"}),y._maybeSendToSentry(D)}n(!1),_(Ha({result:k},P))})})}),function(){return F.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(R=v(function*(y){Po()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),_=yield this.testPeerToPeerCallQuality(y)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),_=yield this.testCallQuality());var _,b={result:_.result,secondsElapsed:_.secondsElapsed};return _.data&&(b.data={maxRTT:_.data.maxRoundTripTime,packetLoss:_.data.avgRecvPacketLoss}),b}),function(y){return R.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(L=v(function*(y){var _=this;if(_s(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(y){return Promise.reject(y)}var b=y.videoTrack,E=y.duration;if(!this._validateVideoTrackForNetworkTests(b))throw Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=b,new Promise(function(y,b){_.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:E},function(_){_.error?b(_.error):y(_.results)})})}),function(y){return L.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){Po()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(j=v(function*(y){var _=this;if(_s(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(y){return Promise.reject(y)}if(!this._validateVideoTrackForNetworkTests(y))throw Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=y,new Promise(function(y,b){_.sendMessageToCallMachine({action:"test-network-connectivity"},function(_){_.error?b(_.error):y(_.results)})})}),function(y){return j.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var y=this;return new Promise(function(_){y._callState===e4?y.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(y){_(y.cpuStats)}):_({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(y){var _;if(!((null===(_=Object.keys(y))||void 0===_?void 0:_.length)>0))throw Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(np))}},{key:"_validateVideoSendSettings",value:function(y,_){var b="screenVideo"===y?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],E="Video send settings should be either an object or one of the supported presets: ".concat(b.join());if("string"==typeof _){if(!b.includes(_))throw Error(E)}else{if("object"!==o(_))throw Error(E);if(!_.maxQuality&&!_.encodings&&void 0===_.allowAdaptiveLayers)throw Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(_.maxQuality&&-1===["low","medium","high"].indexOf(_.maxQuality))throw Error("maxQuality must be either low, medium or high");if(_.encodings){var k=!1;switch(Object.keys(_.encodings).length){case 1:k=!_.encodings.low;break;case 2:k=!_.encodings.low||!_.encodings.medium;break;case 3:k=!_.encodings.low||!_.encodings.medium||!_.encodings.high;break;default:k=!0}if(k)throw Error("Encodings must be defined as: low, low and medium, or low, medium and high.");_.encodings.low&&this._validateEncodingLayerHasValidProperties(_.encodings.low),_.encodings.medium&&this._validateEncodingLayerHasValidProperties(_.encodings.medium),_.encodings.high&&this._validateEncodingLayerHasValidProperties(_.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(y){var _=this;if(!y||0===Object.keys(y).length)throw Error("Send settings must contain at least information for one track!");Object.entries(y).forEach(function(y){var b=m(y,2),E=b[0],k=b[1];_._validateVideoSendSettings(E,k)})}},{key:"updateSendSettings",value:function(y){var _=this;return this.validateUpdateSendSettings(y),this.needsLoad()?(this._preloadCache.sendSettings=y,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(b,E){_.sendMessageToCallMachine({action:"update-send-settings",sendSettings:y},function(y){y.error?E(y.error):b(y.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return ws(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(y){return ws(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:y}),this}},{key:"activeSpeakerMode",value:function(){return ws(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(y){return vs(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=y,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:y}),this}},{key:"enumerateDevices",value:(D=v(function*(){var y=this;if(this._callObjectMode){var _=yield navigator.mediaDevices.enumerateDevices();return"Firefox"===Uo()&&Bo().major>115&&Bo().major<123&&(_=_.filter(function(y){return"audiooutput"!==y.kind})),{devices:_.map(function(y){var _=JSON.parse(JSON.stringify(y));if(!Po()&&"videoinput"===y.kind&&y.getCapabilities){var b,E=y.getCapabilities();_.facing=(null==E||null===(b=E.facingMode)||void 0===b?void 0:b.length)>=1?E.facingMode[0]:void 0}return _})}}return new Promise(function(_){y.sendMessageToCallMachine({action:"enumerate-devices"},function(y){_({devices:y.devices})})})}),function(){return D.apply(this,arguments)})},{key:"sendAppMessage",value:function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";if(vs(this._callState,"sendAppMessage()"),JSON.stringify(y).length>this._maxAppMessageSize)throw Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:y,to:_}),this}},{key:"addFakeParticipant",value:function(y){return ws(),vs(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(Ha({action:"add-fake-participant"},y)),this}},{key:"setShowNamesMode",value:function(y){return Ss(this._callObjectMode,"setShowNamesMode()"),ws(),y&&"always"!==y&&"never"!==y?console.error('setShowNamesMode argument should be "always", "never", or false'):this.sendMessageToCallMachine({action:"set-show-names",mode:y}),this}},{key:"setShowLocalVideo",value:function(){var y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ss(this._callObjectMode,"setShowLocalVideo()"),ws(),vs(this._callState,"setShowLocalVideo()"),"boolean"!=typeof y?console.error("setShowLocalVideo only accepts a boolean value"):(this.sendMessageToCallMachine({action:"set-show-local-video",show:y}),this._showLocalVideo=y),this}},{key:"showLocalVideo",value:function(){return Ss(this._callObjectMode,"showLocalVideo()"),ws(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ss(this._callObjectMode,"setShowParticipantsBar()"),ws(),vs(this._callState,"setShowParticipantsBar()"),"boolean"!=typeof y?console.error("setShowParticipantsBar only accepts a boolean value"):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:y}),this._showParticipantsBar=y),this}},{key:"showParticipantsBar",value:function(){return Ss(this._callObjectMode,"showParticipantsBar()"),ws(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return ws(),Ss(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(y){return ws(),Ss(this._callObjectMode,"setCustomIntegrations()"),vs(this._callState,"setCustomIntegrations()"),js(y)&&(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:y}),this._customIntegrations=y),this}},{key:"startCustomIntegrations",value:function(y){var _=this;if(ws(),Ss(this._callObjectMode,"startCustomIntegrations()"),vs(this._callState,"startCustomIntegrations()"),Array.isArray(y)&&y.some(function(y){return"string"!=typeof y})||!Array.isArray(y)&&"string"!=typeof y)return console.error("startCustomIntegrations() only accepts string | string[]"),this;var b="string"==typeof y?[y]:y,E=b.filter(function(y){return!(y in _._customIntegrations)});return E.length?console.error("Can't find custom integration(s): \"".concat(E.join(", "),'"')):this.sendMessageToCallMachine({action:"start-custom-integrations",ids:b}),this}},{key:"stopCustomIntegrations",value:function(y){var _=this;if(ws(),Ss(this._callObjectMode,"stopCustomIntegrations()"),vs(this._callState,"stopCustomIntegrations()"),Array.isArray(y)&&y.some(function(y){return"string"!=typeof y})||!Array.isArray(y)&&"string"!=typeof y)return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var b="string"==typeof y?[y]:y,E=b.filter(function(y){return!(y in _._customIntegrations)});return E.length?console.error("Can't find custom integration(s): \"".concat(E.join(", "),'"')):this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:b}),this}},{key:"customTrayButtons",value:function(){return Ss(this._callObjectMode,"customTrayButtons()"),ws(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(y){return Ss(this._callObjectMode,"updateCustomTrayButtons()"),ws(),vs(this._callState,"updateCustomTrayButtons()"),Ns(y)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:y}),this._customTrayButtons=y):console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(nv))),this}},{key:"theme",value:function(){return Ss(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(y){var _=this;return Ss(this._callObjectMode,"setTheme()"),new Promise(function(b,E){try{_.validateProperties({theme:y}),_.properties.theme=Ha({},y),_.sendMessageToCallMachine({action:"set-theme",theme:_.properties.theme});try{_.emitDailyJSEvent({action:tD,theme:_.properties.theme})}catch(y){console.log("could not emit 'theme-updated'",y)}b(_.properties.theme)}catch(y){E(y)}})}},{key:"requestFullscreen",value:(I=v(function*(){if(ws(),this._iframe&&!document.fullscreenElement&&Lo())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(y){console.log("could not make video call fullscreen",y)}}),function(){return I.apply(this,arguments)})},{key:"exitFullscreen",value:function(){ws(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(P=v(function*(){var y=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(_){y.sendMessageToCallMachine({action:"get-sidebar-view"},function(y){_(y.view)})})}),function(){return P.apply(this,arguments)})},{key:"setSidebarView",value:function(y){return this._callObjectMode?console.error("setSidebarView is not available in callObject mode"):this.sendMessageToCallMachine({action:"set-sidebar-view",view:y}),this}},{key:"room",value:(k=v(function*(){var y=this,_=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeRoomConfigDefaults,b=void 0===_||_;return this._accessState.access===to||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(_){y.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:b},function(y){delete y.action,delete y.callbackStamp,_(y)})})}),function(){return k.apply(this,arguments)})},{key:"geo",value:(E=v(function*(){try{var y=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield y.json()).geo}}catch(y){return console.error("geo lookup failed",y),{current:""}}}),function(){return E.apply(this,arguments)})},{key:"setNetworkTopology",value:(b=v(function*(y){var _=this;return ws(),vs(this._callState,"setNetworkTopology()"),new Promise(function(b,E){_.sendMessageToCallMachine({action:"set-network-topology",opts:y},function(y){y.error?E({error:y.error}):b({workerId:y.workerId})})})}),function(y){return b.apply(this,arguments)})},{key:"getNetworkTopology",value:(_=v(function*(){var y=this;return new Promise(function(_,b){y.needsLoad()&&_({topology:"none"}),y.sendMessageToCallMachine({action:"get-network-topology"},function(y){y.error?b({error:y.error}):_({topology:y.topology})})})}),function(){return _.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(y){if(ws(),"number"!=typeof y&&!0!==y&&!1!==y)throw Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(y));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:y})}},{key:"on",value:function(y,_){return el().prototype.on.call(this,y,_)}},{key:"once",value:function(y,_){return el().prototype.once.call(this,y,_)}},{key:"off",value:function(y,_){return el().prototype.off.call(this,y,_)}},{key:"validateProperties",value:function(y){var _,b;if(null!=y&&null!==(_=y.dailyConfig)&&void 0!==_&&_.userMediaAudioConstraints){Po()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var E,k,P=y.inputSettings||{};P.audio=(null===(E=y.inputSettings)||void 0===E?void 0:E.audio)||{},P.audio.settings=(null===(k=y.inputSettings)||void 0===k||null===(k=k.audio)||void 0===k?void 0:k.settings)||{},P.audio.settings=Ha(Ha({},P.audio.settings),y.dailyConfig.userMediaAudioConstraints),y.inputSettings=P,delete y.dailyConfig.userMediaAudioConstraints}if(null!=y&&null!==(b=y.dailyConfig)&&void 0!==b&&b.userMediaVideoConstraints){Po()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var I,D,j=y.inputSettings||{};j.video=(null===(I=y.inputSettings)||void 0===I?void 0:I.video)||{},j.video.settings=(null===(D=y.inputSettings)||void 0===D||null===(D=D.video)||void 0===D?void 0:D.settings)||{},j.video.settings=Ha(Ha({},j.video.settings),y.dailyConfig.userMediaVideoConstraints),y.inputSettings=j,delete y.dailyConfig.userMediaVideoConstraints}for(var L in y)if(ny[L]){if(ny[L].validate&&!ny[L].validate(y[L],this))throw Error("property '".concat(L,"': ").concat(ny[L].help))}else console.warn("Ignoring unrecognized property '".concat(L,"'")),delete y[L]}},{key:"assembleMeetingUrl",value:function(){var y,_,b=Ha(Ha({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:null!==(y=this.properties.dailyConfig)&&void 0!==y&&y.proxyUrl?encodeURIComponent(null===(_=this.properties.dailyConfig)||void 0===_?void 0:_.proxyUrl):void 0}),E=b.url.match(/\?/)?"&":"?";return b.url+E+Object.keys(ny).filter(function(y){return ny[y].queryString&&void 0!==b[y]}).map(function(y){return"".concat(ny[y].queryString,"=").concat(b[y])}).join("&")}},{key:"needsLoad",value:function(){return[e0,e1,e9,e5].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(y,_){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(y,_,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(y){this._messageChannel.forwardPackagedMessageToCallMachine(y,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(y){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(y,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(y){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(y)}},{key:"handleMessageFromCallMachine",value:function(y){switch(y.action){case tP:this.sendMessageToCallMachine(Ha({action:tI},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var _={action:rI,level:"log",code:1011,stats:{event:"bundle load",time:"no-op"===this._bundleLoadTime?0:this._bundleLoadTime,preLoaded:"no-op"===this._bundleLoadTime,url:C(this.properties.dailyConfig)}};this.sendMessageToCallMachine(_),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case tR:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(y);break;case tq:var b,E=Ha({},y);delete E.internal,this._maxAppMessageSize=(null===(b=y.internal)||void 0===b?void 0:b._maxAppMessageSize)||4096,this._joinedCallback&&(this._joinedCallback(y.participants),this._joinedCallback=null),this.emitDailyJSEvent(E);break;case tV:case t$:if(this._callState===e9)return;if(y.participant&&y.participant.session_id){var k=y.participant.local?"local":y.participant.session_id;if(this._callObjectMode){var P=this._callMachine().store;wa(y.participant,P),ka(y.participant,P),Ta(y.participant,this._participants[k],P)}try{this.maybeParticipantTracksStopped(this._participants[k],y.participant),this.maybeParticipantTracksStarted(this._participants[k],y.participant),this.maybeEventRecordingStopped(this._participants[k],y.participant),this.maybeEventRecordingStarted(this._participants[k],y.participant)}catch(y){console.error("track events error",y)}this.compareEqualForParticipantUpdateEvent(y.participant,this._participants[k])||(this._participants[k]=Ha({},y.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(y))}break;case tB:if(y.participant&&y.participant.session_id){var I=this._participants[y.participant.session_id];I&&this.maybeParticipantTracksStopped(I,null),delete this._participants[y.participant.session_id],this.emitDailyJSEvent(y)}break;case tJ:w(this._participantCounts,y.participantCounts)||(this._participantCounts=y.participantCounts,this.emitDailyJSEvent(y));break;case tG:var D={access:y.access};y.awaitingAccess&&(D.awaitingAccess=y.awaitingAccess),w(this._accessState,D)||(this._accessState=D,this.emitDailyJSEvent(y));break;case tH:if(y.meetingSession){this._meetingSessionSummary=y.meetingSession,this.emitDailyJSEvent(y);var j=Ha(Ha({},y),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(j)}break;case rA:this._iframe&&!y.preserveIframe&&(this._iframe.src=""),this._updateCallState(e5),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(y.errorMsg),this._loadedCallback=null),y.preserveIframe;var L,R=r(y,ns);null!=R&&null!==(L=R.error)&&void 0!==L&&L.details&&(R.error.details=JSON.parse(R.error.details)),this._maybeSendToSentry(y),this._joinedCallback&&(this._joinedCallback(null,R),this._joinedCallback=null),this.emitDailyJSEvent(R);break;case tU:this._callState!==e5&&this._updateCallState(e9),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(y);break;case"selected-devices-updated":y.devices&&this.emitDailyJSEvent(y);break;case rp:var F=y.state,V=y.threshold,J=y.quality,et=F.state,ei=F.reasons;et===this._network.networkState&&w(ei,this._network.networkStateReasons)&&V===this._network.threshold&&J===this._network.quality||(this._network.networkState=et,this._network.networkStateReasons=ei,this._network.quality=J,this._network.threshold=V,y.networkState=et,ei.length&&(y.networkStateReasons=ei),delete y.state,this.emitDailyJSEvent(y));break;case rm:y&&y.cpuLoadState&&this.emitDailyJSEvent(y);break;case rv:y&&void 0!==y.faceCounts&&this.emitDailyJSEvent(y);break;case rd:var ea=y.activeSpeaker;this._activeSpeaker.peerId!==ea.peerId&&(this._activeSpeaker.peerId=ea.peerId,this.emitDailyJSEvent({action:y.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var eo=y.show;this._showLocalVideo=eo,this.emitDailyJSEvent({action:y.action,show:eo});break;case rh:var es=y.enabled;this._activeSpeakerMode!==es&&(this._activeSpeakerMode=es,this.emitDailyJSEvent({action:y.action,enabled:this._activeSpeakerMode}));break;case tz:case tQ:case tK:this._waitingParticipants=y.allWaitingParticipants,this.emitDailyJSEvent({action:y.action,participant:y.participant});break;case rk:w(this._receiveSettings,y.receiveSettings)||(this._receiveSettings=y.receiveSettings,this.emitDailyJSEvent({action:y.action,receiveSettings:y.receiveSettings}));break;case rC:this._maybeUpdateInputSettings(y.inputSettings);break;case"send-settings-updated":w(this._sendSettings,y.sendSettings)||(this._sendSettings=y.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:y.action,sendSettings:y.sendSettings}));break;case"local-audio-level":this._localAudioLevel=y.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(y);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=y.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(y);break;case ra:var ec=y.session_id;this._rmpPlayerState[ec]=y.playerState,this.emitDailyJSEvent(y);break;case rs:delete this._rmpPlayerState[y.session_id],this.emitDailyJSEvent(y);break;case ro:var el=y.session_id,eu=this._rmpPlayerState[el];eu&&this.compareEqualForRMPUpdateEvent(eu,y.remoteMediaPlayerState)||(this._rmpPlayerState[el]=y.remoteMediaPlayerState,this.emitDailyJSEvent(y));break;case"custom-button-click":case"sidebar-view-changed":case"pip-started":case"pip-stopped":this.emitDailyJSEvent(y);break;case tW:var ed=this._meetingSessionState.topology!==(y.meetingSessionState&&y.meetingSessionState.topology);this._meetingSessionState=Us(y.meetingSessionState,this._callObjectMode),(this._callObjectMode||ed)&&this.emitDailyJSEvent(y);break;case rc:this._isScreenSharing=!0,this.emitDailyJSEvent(y);break;case rl:case ru:this._isScreenSharing=!1,this.emitDailyJSEvent(y);break;case t3:case t4:case t9:case t5:case t8:case t0:case t1:case t2:case tN:case tx:case t7:case ri:case"test-completed":case rf:case t6:case r_:case rb:case rS:case rw:case rT:case rE:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(y);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(y,_){var b="record";y&&(_.local||!1!==_[b]||y[b]===_[b]||this.emitDailyJSEvent({action:t4}))}},{key:"maybeEventRecordingStarted",value:function(y,_){var b="record";y&&(_.local||!0!==_[b]||y[b]===_[b]||this.emitDailyJSEvent({action:t3}))}},{key:"_trackStatePlayable",value:function(y){return!(!y||y.state!==ta)}},{key:"_trackChanged",value:function(y,_){return(null==y?void 0:y.id)!==(null==_?void 0:_.id)}},{key:"maybeEventTrackStopped",value:function(y,_,b){var E,k,P=null!==(E=null==_?void 0:_.tracks[y])&&void 0!==E?E:null,I=null!==(k=null==b?void 0:b.tracks[y])&&void 0!==k?k:null,D=null==P?void 0:P.track;if(D){var j=this._trackStatePlayable(P),L=this._trackStatePlayable(I),R=this._trackChanged(D,null==I?void 0:I.track);j&&(L&&!R||this.emitDailyJSEvent({action:tX,track:D,participant:null!=b?b:_,type:y}))}}},{key:"maybeEventTrackStarted",value:function(y,_,b){var E,k,P=null!==(E=null==_?void 0:_.tracks[y])&&void 0!==E?E:null,I=null!==(k=null==b?void 0:b.tracks[y])&&void 0!==k?k:null,D=null==I?void 0:I.track;if(D){var j=this._trackStatePlayable(P),L=this._trackStatePlayable(I),R=this._trackChanged(null==P?void 0:P.track,D);L&&(j&&!R||this.emitDailyJSEvent({action:tZ,track:D,participant:b,type:y}))}}},{key:"maybeParticipantTracksStopped",value:function(y,_){if(y)for(var b in y.tracks)this.maybeEventTrackStopped(b,y,_)}},{key:"maybeParticipantTracksStarted",value:function(y,_){if(_)for(var b in _.tracks)this.maybeEventTrackStarted(b,y,_)}},{key:"compareEqualForRMPUpdateEvent",value:function(y,_){var b,E;return y.state===_.state&&(null===(b=y.settings)||void 0===b?void 0:b.volume)===(null===(E=_.settings)||void 0===E?void 0:E.volume)}},{key:"emitDailyJSEvent",value:function(y){try{y.callClientId=this.callClientId,this.emit(y.action,y)}catch(_){console.log("could not emit",y,_)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(y,_){return!(!w(y,_)||y.videoTrack&&_.videoTrack&&(y.videoTrack.id!==_.videoTrack.id||y.videoTrack.muted!==_.videoTrack.muted||y.videoTrack.enabled!==_.videoTrack.enabled)||y.audioTrack&&_.audioTrack&&(y.audioTrack.id!==_.audioTrack.id||y.audioTrack.muted!==_.audioTrack.muted||y.audioTrack.enabled!==_.audioTrack.enabled))}},{key:"nativeUtils",value:function(){return Po()?"undefined"==typeof DailyNativeUtils?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(y){this._updateCallState(this._callState,y)}},{key:"_updateCallState",value:function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._isPreparingToJoin;if(y!==this._callState||_!==this._isPreparingToJoin){var b=this._callState,E=this._isPreparingToJoin;this._callState=y,this._isPreparingToJoin=_;var k=this._callState===e4;this.updateShowAndroidOngoingMeetingNotification(k);var P=gs(b,E),I=gs(this._callState,this._isPreparingToJoin);P!==I&&(this.updateKeepDeviceAwake(I),this.updateDeviceAudioMode(I),this.updateNoOpRecordingEnsuringBackgroundContinuity(I))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=nd,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:to},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=Us(nu,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=4096,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(y){Po()&&this.nativeUtils().setKeepDeviceAwake(y,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(y){if(Po()&&!this.disableReactNativeAutoDeviceManagement("audio")){var _=y?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(_)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(y){if(Po()&&this.nativeUtils().setShowOngoingMeetingNotification){var _,b,E,k;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var P=this.properties.reactNativeConfig.androidInCallNotification;_=P.title,b=P.subtitle,E=P.iconName,k=P.disableForCustomOverride}k&&(y=!1),this.nativeUtils().setShowOngoingMeetingNotification(y,_,b,E,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(y){Po()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(y)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var y;if(Po()){var _=null===(y=this._callMachine())||void 0===y||null===(y=y.store)||void 0===y?void 0:y.getState();for(var b in null==_?void 0:_.streams){var E=_.streams[b];E&&E.pendingTrack&&"audio"===E.pendingTrack.kind&&(E.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(y){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[y]}},{key:"absoluteUrl",value:function(y){if(void 0!==y){var _=document.createElement("a");return _.href=y,_.href}}},{key:"sayHello",value:function(){var y="hello, world.";return console.log(y),y}},{key:"_logUseAfterDestroy",value:function(){var y=Object.values(nc)[0];if(this.needsLoad()){if(y&&!y.needsLoad()){var _={action:rI,level:"error",code:this.strictMode?9995:9997};y.sendMessageToCallMachine(_)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.")}else{var b={action:rI,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(b,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var y=0,_=Object.values(nc);y<_.length;y++){var b=_[y];b._callMachineInitialized?(b.sendMessageToCallMachine({action:rI,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),b._delayDuplicateInstanceLog=!1):b._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(y){if(!(null!==(E=y.error)&&void 0!==E&&E.type&&(![tS,t_,tg].includes(y.error.type)||y.error.type===tg&&y.error.msg.includes("deleted")))){var _=null!==(k=this.properties)&&void 0!==k&&k.url?new URL(this.properties.url):void 0,b="production";_&&_.host.includes(".staging.daily")&&(b="staging");var E,k,P,I,D,j,L,R,F,V=new hr({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:br,stackParser:eX,integrations:Kn({}).filter(function(y){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(y.name)}),environment:b}),J=new eC;if(J.setClient(V),V.init(),this.session_id&&J.setExtra("sessionId",this.session_id),this.properties){var et=Ha({},this.properties);et.userName=et.userName?"[Filtered]":void 0,et.userData=et.userData?"[Filtered]":void 0,et.token=et.token?"[Filtered]":void 0,J.setExtra("properties",et)}if(_){var ei=_.searchParams.get("domain");if(!ei){var ea=_.host.match(/(.*?)\./);ei=ea&&ea[1]||""}ei&&J.setTag("domain",ei)}y.error&&(J.setTag("fatalErrorType",y.error.type),J.setExtra("errorDetails",y.error.details),(null===(D=y.error.details)||void 0===D?void 0:D.uri)&&J.setTag("serverAddress",y.error.details.uri),(null===(j=y.error.details)||void 0===j?void 0:j.workerGroup)&&J.setTag("workerGroup",y.error.details.workerGroup),(null===(L=y.error.details)||void 0===L?void 0:L.geoGroup)&&J.setTag("geoGroup",y.error.details.geoGroup),(null===(R=y.error.details)||void 0===R?void 0:R.on)&&J.setTag("connectionAttempt",y.error.details.on),null!==(F=y.error.details)&&void 0!==F&&F.bundleUrl&&(J.setTag("bundleUrl",y.error.details.bundleUrl),J.setTag("bundleError",y.error.details.sourceError.type))),J.setTags({callMode:this._callObjectMode?Po()?"reactNative":null!==(P=this.properties)&&void 0!==P&&null!==(P=P.dailyConfig)&&void 0!==P&&null!==(P=P.callMode)&&void 0!==P&&P.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:t.version()});var eo=(null===(I=y.error)||void 0===I?void 0:I.msg)||y.errorMsg;J.captureException(Error(eo))}}},{key:"_callMachine",value:function(){var y;return null===(y=window._daily)||void 0===y||null===(y=y.instances)||void 0===y||null===(y=y[this.callClientId])||void 0===y?void 0:y.callMachine}},{key:"_maybeUpdateInputSettings",value:function(y){if(!w(this._inputSettings,y)){var _=this._getInputSettings();this._inputSettings=y;var b=this._getInputSettings();w(_,b)||this.emitDailyJSEvent({action:rC,inputSettings:b})}}}],[{key:"supportedBrowser",value:function(){if(Po())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var y=eh().getParser(Oo());return{supported:!!xo(),mobile:"mobile"===y.getPlatformType(),name:y.getBrowserName(),version:y.getBrowserVersion(),supportsFullscreen:!!Lo(),supportsScreenShare:!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&(function(y,_){if(!y||!_)return!0;switch(y){case"Chrome":return _.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(13===_.major&&0===_.minor&&0===_.point);case"Firefox":return _.major>=67}return!0}(Uo(),Bo())||Po())),supportsSfu:!!xo(),supportsVideoProcessing:jo(),supportsAudioProcessing:Ro()}}},{key:"version",value:function(){return"0.85.0"}},{key:"createCallObject",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y.layout="none",new t(null,y)}},{key:"wrap",value:function(y){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ws(),!y||!y.contentWindow||"string"!=typeof y.src)throw Error("DailyIframe::Wrap needs an iframe-like first argument");return _.layout||(_.customLayout?_.layout="custom-v1":_.layout="browser"),new t(y,_)}},{key:"createFrame",value:function(y,_){ws(),y&&_?(b=y,E=_):y&&y.append?(b=y,E={}):(b=document.body,E=y||{});var b,E,k=E.iframeStyle;k||(k=b===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var P=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?P.allow="microphone, camera":P.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",P.style.visibility="hidden",b.appendChild(P),P.style.visibility=null,Object.keys(k).forEach(function(y){return P.style[y]=k[y]}),E.layout||(E.customLayout?E.layout="custom-v1":E.layout="browser");try{return new t(P,E)}catch(y){throw b.removeChild(P),y}}},{key:"createTransparentFrame",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ws();var _=document.createElement("iframe");return _.allow="microphone; camera; autoplay",_.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: 0;\n      pointer-events: none;\n    ",document.body.appendChild(_),y.layout||(y.layout="custom-v1"),t.wrap(_,y)}},{key:"getCallInstance",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return y?nc[y]:Object.values(nc)[0]}}])}(el());function ps(y){if(y.extension){if("string"!=typeof y.extension)throw Error("Error starting dial out: extension must be a string");if(y.extension.length>20)throw Error("Error starting dial out: extension length must be less than or equal to 20")}if(y.waitBeforeExtensionDialSec){if("number"!=typeof y.waitBeforeExtensionDialSec)throw Error("Error starting dial out: waitBeforeExtensionDialSec must be a number");if(y.waitBeforeExtensionDialSec>60)throw Error("Error starting dial out: waitBeforeExtensionDialSec must be less than or equal to 60");if(!y.extension)throw Error("Error starting dial out: waitBeforeExtensionDialSec requires a phoneNumber and extension")}}function hs(y,_){var b={};for(var E in y)if(y[E]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",E),b[E]=rD;else if("dailyConfig"===E){if(y[E].modifyLocalSdpHook){var k=window._daily.instances[_].customCallbacks||{};k.modifyLocalSdpHook=y[E].modifyLocalSdpHook,window._daily.instances[_].customCallbacks=k,delete y[E].modifyLocalSdpHook}if(y[E].modifyRemoteSdpHook){var P=window._daily.instances[_].customCallbacks||{};P.modifyRemoteSdpHook=y[E].modifyRemoteSdpHook,window._daily.instances[_].customCallbacks=P,delete y[E].modifyRemoteSdpHook}b[E]=y[E]}else b[E]=y[E];return b}function vs(y){var _=arguments.length>2?arguments[2]:void 0;if(y!==e4){var b="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," only supported after join.");throw _&&(b+=" ".concat(_)),console.error(b),Error(b)}}function gs(y,_){return[e3,e4].includes(y)||_}function ms(y,_){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"This daily-js method",E=arguments.length>3?arguments[3]:void 0;if(gs(y,_)){var k="".concat(b," not supported after joining a meeting.");throw E&&(k+=" ".concat(E)),console.error(k),Error(k)}}function ys(y){var _=arguments.length>2?arguments[2]:void 0;if(!y){var b="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method",arguments.length>3&&void 0!==arguments[3]&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw _&&(b+=" ".concat(_)),console.error(b),Error(b)}}function _s(y){if(y){var _="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(_),Error(_)}}function bs(y){if(!y){var _="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(_),Error(_)}}function Ss(y){if(y){var _="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(_),Error(_)}}function ws(){if(Po())throw Error("This daily-js method is not currently supported in React Native")}function ks(){if(!Po())throw Error("This daily-js method is only supported in React Native")}function Es(y){var _;if(void 0===y)return!0;if("string"==typeof y)_=y;else try{_=JSON.stringify(y),w(JSON.parse(_),y)||console.warn("The userData provided will be modified when serialized.")}catch(y){throw Error("userData must be serializable to JSON: ".concat(y))}if(_.length>4096)throw Error("userData is too large (".concat(_.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Ts(y,_){for(var b=_.allowAllParticipantsKey,i=function(y){return!!(void 0===y.layer||Number.isInteger(y.layer)&&y.layer>=0||"inherit"===y.layer)},E=0,k=Object.entries(y);E<k.length;E++){var P=m(k[E],2),I=P[0],D=P[1];if(!function(y){var _=["local"];return b||_.push("*"),y&&!_.includes(y)}(I)||!D||D.video&&!i(D.video)||D.screenVideo&&!i(D.screenVideo))return!1}return!0}function Ms(y){if("object"!==o(y))return!1;for(var _=0,b=Object.entries(y);_<b.length;_++){var E=m(b[_],2),k=E[0],P=E[1];switch(k){case"video":if("object"!==o(P))return!1;for(var I=0,D=Object.entries(P);I<D.length;I++){var j=m(D[I],2),L=j[0],R=j[1];switch(L){case"processor":if(!Os(R))return!1;break;case"settings":if(!Ps(R))return!1;break;default:return!1}}break;case"audio":if("object"!==o(P))return!1;for(var F=0,V=Object.entries(P);F<V.length;F++){var J=m(V[F],2),et=J[0],ei=J[1];switch(et){case"processor":if(!Cs(ei))return!1;break;case"settings":if(!Ps(ei))return!1;break;default:return!1}}break;default:return!1}}return!0}function As(y,_,b){var E,k=[];y.video&&y.video.processor&&(jo(null!==(E=null==_?void 0:_.useLegacyVideoProcessor)&&void 0!==E&&E)||(y.video.settings?delete y.video.processor:delete y.video,k.push("video"))),y.audio&&y.audio.processor&&(Ro()||(y.audio.settings?delete y.audio.processor:delete y.audio,k.push("audio"))),k.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(k.join(", "))),y.audio&&y.audio.settings&&(y.audio.settings.customTrack?(b.audioTrack=y.audio.settings.customTrack,y.audio.settings={customTrack:rD}):delete b.audioTrack),y.video&&y.video.settings&&(y.video.settings.customTrack?(b.videoTrack=y.video.settings.customTrack,y.video.settings={customTrack:rD}):delete b.videoTrack)}function Cs(y){if(Po())return console.warn("Video processing is not yet supported in React Native"),!1;var _,b=["type"];return!(!y||"object"!==o(y)||(Object.keys(y).filter(function(y){return!b.includes(y)}).forEach(function(_){console.warn("invalid key inputSettings -> audio -> processor : ".concat(_)),delete y[_]}),"string"!=typeof(_=y.type)||!Object.values(rL).includes(_)&&(console.error("inputSettings audio processor type invalid"),1)))}function Os(y){if(Po())return console.warn("Video processing is not yet supported in React Native"),!1;var _,b=["type","config"];return!!y&&"object"===o(y)&&"string"==typeof(_=y.type)&&(!!Object.values(rj).includes(_)||(console.error("inputSettings video processor type invalid"),!1))&&(!y.config||"object"===o(y.config)&&!!function(y,_){var b,E=Object.keys(_);if(0===E.length)return!0;var k="invalid object in inputSettings -> video -> processor -> config";switch(y){case rj.BGBLUR:return E.length>1||"strength"!==E[0]?(console.error(k),!1):!("number"!=typeof _.strength||_.strength<=0||_.strength>1||isNaN(_.strength))||(console.error("".concat(k,"; expected: {0 < strength <= 1}, got: ").concat(_.strength)),!1);case rj.BGIMAGE:return!(void 0!==_.source&&!("default"===_.source?(_.type="default",!0):_.source instanceof ArrayBuffer||(O(_.source)?(_.type="url",!!function(y){var _=new URL(y),b=_.pathname;if("data:"===_.protocol)try{var E=b.substring(b.indexOf(":")+1,b.indexOf(";")).split("/")[1];return rN.includes(E)}catch(y){return console.error("failed to deduce blob content type",y),!1}var k=b.split(".").at(-1).toLowerCase().trim();return rN.includes(k)}(_.source)||(console.error("invalid image type; supported types: [".concat(rN.join(", "),"]")),!1)):isNaN(b=Number(_.source))||!Number.isInteger(b)||b<=0||b>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(_.type="daily-preselect",!0))));default:return!0}}(y.type,y.config))&&(Object.keys(y).filter(function(y){return!b.includes(y)}).forEach(function(_){console.warn("invalid key inputSettings -> video -> processor : ".concat(_)),delete y[_]}),!0)}function Ps(y){return"object"===o(y)&&(!y.customTrack||y.customTrack instanceof MediaStreamTrack)}function Is(){var y=Object.values(rj).join(" | "),_=Object.values(rL).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(y," ], config?: {} } }, audio?: { processor: {type: [ ").concat(_," ] } } }")}function Ls(y){var _=y.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(tu).concat(_?' | "'.concat(td,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function Ds(){return"customIntegrations should be an object of type ".concat(JSON.stringify(ng),".")}function Ns(y){if(y&&"object"!==o(y)||Array.isArray(y))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(nv),".")),!1;if(y)for(var _=0,b=Object.entries(y);_<b.length;_++)for(var E=m(b[_],1)[0],k=0,P=Object.entries(y[E]);k<P.length;k++){var I=m(P[k],2),D=I[0],j=I[1],L=nv.id[D];if(!L)return console.error("customTrayButton does not support key ".concat(D)),!1;switch(D){case"iconPath":case"iconPathDarkMode":if(!O(j))return console.error("customTrayButton ".concat(D," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(j))return console.error("customTrayButton ".concat(D," should be ").concat(L,". Got: ").concat(j)),!1;break;default:if(o(j)!==L)return console.error("customTrayButton ".concat(D," should be a ").concat(L,".")),!1}}return!0}function js(y){if(!y||y&&"object"!==o(y)||Array.isArray(y))return console.error(Ds()),!1;for(var t=function(y){return"".concat(y," should be ").concat(ng.id[y])},n=function(y,_){return console.error("customIntegration ".concat(y,": ").concat(_))},_=0,b=Object.entries(y);_<b.length;_++){var E=m(b[_],1)[0];if(!("label"in y[E]))return n(E,"label is required"),!1;if(!("location"in y[E]))return n(E,"location is required"),!1;if(!("src"in y[E])&&!("srcdoc"in y[E]))return n(E,"src or srcdoc is required"),!1;for(var k=0,P=Object.entries(y[E]);k<P.length;k++){var I=m(P[k],2),D=I[0],j=I[1];switch(D){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if("string"!=typeof j)return n(E,t(D)),!1;break;case"iconURL":if(!O(j))return n(E,"".concat(D," should be a url")),!1;break;case"src":if("srcdoc"in y[E])return n(E,"cannot have both src and srcdoc"),!1;if(!O(j))return n(E,'src "'.concat(j,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in y[E])return n(E,"cannot have both src and srcdoc"),!1;if("string"!=typeof j)return n(E,t(D)),!1;break;case"location":if(!["main","sidebar"].includes(j))return n(E,t(D)),!1;break;case"controlledBy":if("*"!==j&&"owners"!==j&&(!Array.isArray(j)||j.some(function(y){return"string"!=typeof y})))return n(E,t(D)),!1;break;case"shared":if((!Array.isArray(j)||j.some(function(y){return"string"!=typeof y}))&&"owners"!==j&&"boolean"!=typeof j)return n(E,t(D)),!1;break;default:if(!ng.id[D])return console.error("customIntegration does not support key ".concat(D)),!1}}}return!0}function Rs(y,_){if(void 0===_)return!1;switch(o(_)){case"string":return o(y)===_;case"object":if("object"!==o(y))return!1;for(var b in y)if(!Rs(y[b],_[b]))return!1;return!0;default:return!1}}function xs(y,_){var b=y.sessionId,E=y.toEndPoint,k=y.callerId,P=y.useSipRefer;if(!b||!E)throw Error("".concat(_,"() requires a sessionId and toEndPoint"));if("string"!=typeof b||"string"!=typeof E)throw Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(P&&!E.startsWith("sip:"))throw Error('"toEndPoint" must be a "sip" address');if(!E.startsWith("sip:")&&!E.startsWith("+"))throw Error("toEndPoint: ".concat(E,' must starts with either "sip:" or "+"'));if(k&&"string"!=typeof k)throw Error("callerId must be of type string");if(k&&!E.startsWith("+"))throw Error("callerId is only valid when transferring to a PSTN number")}function Fs(y){if("object"!==o(y))throw Error('RemoteMediaPlayerSettings: must be "object" type');if(y.state&&!Object.values(rR).includes(y.state))throw Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(rR));if(y.volume){if("number"!=typeof y.volume)throw Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(y.volume<0||y.volume>2)throw Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Vs(y,_,b){return!("number"!=typeof y||y<_||y>b)}function Us(y,_){return y&&!_&&delete y.data,y}}},_={};function n(b){var E=_[b];if(void 0!==E)return E.exports;var k=_[b]={exports:{}};return y[b].call(k.exports,k,k.exports,n),k.exports}return n.n=function(y){var _=y&&y.__esModule?function(){return y.default}:function(){return y};return n.d(_,{a:_}),_},n.d=function(y,_){for(var b in _)n.o(_,b)&&!n.o(y,b)&&Object.defineProperty(y,b,{enumerable:!0,get:_[b]})},n.o=function(y,_){return Object.prototype.hasOwnProperty.call(y,_)},n.r=function(y){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},n(781)}(),globalThis&&globalThis.Daily&&(globalThis.DailyIframe=globalThis.Daily)},202:(y,_)=>{"use strict";var b;Object.defineProperty(_,"__esModule",{value:!0}),_.Api=_.HttpClient=_.ContentType=void 0,function(y){y.Json="application/json",y.JsonApi="application/vnd.api+json",y.FormData="multipart/form-data",y.UrlEncoded="application/x-www-form-urlencoded",y.Text="text/plain"}(b||(_.ContentType=b={}));let HttpClient=class HttpClient{baseUrl="https://api.vapi.ai";securityData=null;securityWorker;abortControllers=new Map;customFetch=(...y)=>fetch(...y);baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"};constructor(y={}){Object.assign(this,y)}setSecurityData=y=>{this.securityData=y};encodeQueryParam(y,_){let b=encodeURIComponent(y);return`${b}=${encodeURIComponent("number"==typeof _?_:`${_}`)}`}addQueryParam(y,_){return this.encodeQueryParam(_,y[_])}addArrayQueryParam(y,_){let b=y[_];return b.map(y=>this.encodeQueryParam(_,y)).join("&")}toQueryString(y){let _=y||{},b=Object.keys(_).filter(y=>void 0!==_[y]);return b.map(y=>Array.isArray(_[y])?this.addArrayQueryParam(_,y):this.addQueryParam(_,y)).join("&")}addQueryParams(y){let _=this.toQueryString(y);return _?`?${_}`:""}contentFormatters={[b.Json]:y=>null!==y&&("object"==typeof y||"string"==typeof y)?JSON.stringify(y):y,[b.JsonApi]:y=>null!==y&&("object"==typeof y||"string"==typeof y)?JSON.stringify(y):y,[b.Text]:y=>null!==y&&"string"!=typeof y?JSON.stringify(y):y,[b.FormData]:y=>y instanceof FormData?y:Object.keys(y||{}).reduce((_,b)=>{let E=y[b];return _.append(b,E instanceof Blob?E:"object"==typeof E&&null!==E?JSON.stringify(E):`${E}`),_},new FormData),[b.UrlEncoded]:y=>this.toQueryString(y)};mergeRequestParams(y,_){return{...this.baseApiParams,...y,..._||{},headers:{...this.baseApiParams.headers||{},...y.headers||{},..._&&_.headers||{}}}}createAbortSignal=y=>{if(this.abortControllers.has(y)){let _=this.abortControllers.get(y);return _?_.signal:void 0}let _=new AbortController;return this.abortControllers.set(y,_),_.signal};abortRequest=y=>{let _=this.abortControllers.get(y);_&&(_.abort(),this.abortControllers.delete(y))};request=async({body:y,secure:_,path:E,type:k,query:P,format:I,baseUrl:D,cancelToken:j,...L})=>{let R=("boolean"==typeof _?_:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},F=this.mergeRequestParams(L,R),V=P&&this.toQueryString(P),J=this.contentFormatters[k||b.Json],et=I||F.format;return this.customFetch(`${D||this.baseUrl||""}${E}${V?`?${V}`:""}`,{...F,headers:{...F.headers||{},...k&&k!==b.FormData?{"Content-Type":k}:{}},signal:(j?this.createAbortSignal(j):F.signal)||null,body:null==y?null:J(y)}).then(async y=>{y.data=null,y.error=null;let _=et?y.clone():y,b=et?await _[et]().then(_=>(y.ok?y.data=_:y.error=_,y)).catch(_=>(y.error=_,y)):y;if(j&&this.abortControllers.delete(j),!y.ok)throw b;return b})}};_.HttpClient=HttpClient;let Api=class Api extends HttpClient{assistant={assistantControllerCreate:(y,_={})=>this.request({path:"/assistant",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),assistantControllerFindAll:(y,_={})=>this.request({path:"/assistant",method:"GET",query:y,secure:!0,format:"json",..._}),assistantControllerFindOne:(y,_={})=>this.request({path:`/assistant/${y}`,method:"GET",secure:!0,format:"json",..._}),assistantControllerUpdate:(y,_,E={})=>this.request({path:`/assistant/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),assistantControllerReplace:(y,_,E={})=>this.request({path:`/assistant/${y}`,method:"PUT",body:_,secure:!0,type:b.Json,format:"json",...E}),assistantControllerRemove:(y,_={})=>this.request({path:`/assistant/${y}`,method:"DELETE",secure:!0,format:"json",..._}),assistantControllerFindVersions:(y,_,b={})=>this.request({path:`/assistant/${y}/version`,method:"GET",query:_,secure:!0,format:"json",...b})};v2={assistantControllerFindAllPaginated:(y,_={})=>this.request({path:"/v2/assistant",method:"GET",query:y,secure:!0,format:"json",..._}),callControllerCallsExport:(y,_={})=>this.request({path:"/v2/call/export",method:"GET",query:y,secure:!0,..._}),callControllerFindAllPaginated:(y,_={})=>this.request({path:"/v2/call",method:"GET",query:y,secure:!0,format:"json",..._}),callControllerFindAllMetadataPaginated:(y,_={})=>this.request({path:"/v2/call/metadata",method:"GET",query:y,secure:!0,format:"json",..._}),phoneNumberControllerFindAllPaginated:(y,_={})=>this.request({path:"/v2/phone-number",method:"GET",query:y,secure:!0,format:"json",..._})};squad={squadControllerCreate:(y,_={})=>this.request({path:"/squad",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),squadControllerFindAll:(y,_={})=>this.request({path:"/squad",method:"GET",query:y,secure:!0,format:"json",..._}),squadControllerFindOne:(y,_={})=>this.request({path:`/squad/${y}`,method:"GET",secure:!0,format:"json",..._}),squadControllerUpdate:(y,_,E={})=>this.request({path:`/squad/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),squadControllerRemove:(y,_={})=>this.request({path:`/squad/${y}`,method:"DELETE",secure:!0,format:"json",..._})};workflow={workflowControllerFindAll:(y={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...y}),workflowControllerCreate:(y,_={})=>this.request({path:"/workflow",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),workflowControllerFindOne:(y,_={})=>this.request({path:`/workflow/${y}`,method:"GET",secure:!0,format:"json",..._}),workflowControllerDelete:(y,_={})=>this.request({path:`/workflow/${y}`,method:"DELETE",secure:!0,format:"json",..._}),workflowControllerUpdate:(y,_,E={})=>this.request({path:`/workflow/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E})};call={callControllerCreate:(y,_={})=>this.request({path:"/call",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),callControllerFindAll:(y,_={})=>this.request({path:"/call",method:"GET",query:y,secure:!0,format:"json",..._}),callControllerFindOne:(y,_={})=>this.request({path:`/call/${y}`,method:"GET",secure:!0,format:"json",..._}),callControllerUpdate:(y,_,E={})=>this.request({path:`/call/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),callControllerDeleteCallData:(y,_,E={})=>this.request({path:`/call/${y}`,method:"DELETE",body:_,secure:!0,type:b.Json,format:"json",...E}),callControllerCreatePhoneCall:(y,_={})=>this.request({path:"/call/phone",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),callControllerCreateWebCall:(y,_={})=>this.request({path:"/call/web",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._})};chat={chatControllerListChats:(y,_={})=>this.request({path:"/chat",method:"GET",query:y,secure:!0,format:"json",..._}),chatControllerCreateChat:(y,_={})=>this.request({path:"/chat",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),chatControllerGetChat:(y,_={})=>this.request({path:`/chat/${y}`,method:"GET",secure:!0,format:"json",..._}),chatControllerDeleteChat:(y,_={})=>this.request({path:`/chat/${y}`,method:"DELETE",secure:!0,format:"json",..._}),chatControllerCreateOpenAiChat:(y,_={})=>this.request({path:"/chat/responses",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),chatControllerCreateWebChat:(y,_={})=>this.request({path:"/chat/web",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),chatControllerCreateOpenAiWebChat:(y,_={})=>this.request({path:"/chat/web/responses",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._})};campaign={campaignControllerCreate:(y,_={})=>this.request({path:"/campaign",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),campaignControllerFindAll:(y,_={})=>this.request({path:"/campaign",method:"GET",query:y,secure:!0,format:"json",..._}),campaignControllerFindOne:(y,_={})=>this.request({path:`/campaign/${y}`,method:"GET",secure:!0,format:"json",..._}),campaignControllerUpdate:(y,_,E={})=>this.request({path:`/campaign/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),campaignControllerRemove:(y,_={})=>this.request({path:`/campaign/${y}`,method:"DELETE",secure:!0,format:"json",..._})};session={sessionControllerCreate:(y,_={})=>this.request({path:"/session",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),sessionControllerFindAllPaginated:(y,_={})=>this.request({path:"/session",method:"GET",query:y,secure:!0,format:"json",..._}),sessionControllerFindOne:(y,_={})=>this.request({path:`/session/${y}`,method:"GET",secure:!0,format:"json",..._}),sessionControllerUpdate:(y,_,E={})=>this.request({path:`/session/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),sessionControllerRemove:(y,_={})=>this.request({path:`/session/${y}`,method:"DELETE",secure:!0,format:"json",..._})};phoneNumber={phoneNumberControllerImportTwilio:(y,_={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),phoneNumberControllerImportVonage:(y,_={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),phoneNumberControllerCreate:(y,_={})=>this.request({path:"/phone-number",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),phoneNumberControllerFindAll:(y,_={})=>this.request({path:"/phone-number",method:"GET",query:y,secure:!0,format:"json",..._}),phoneNumberControllerFindOne:(y,_={})=>this.request({path:`/phone-number/${y}`,method:"GET",secure:!0,format:"json",..._}),phoneNumberControllerUpdate:(y,_,E={})=>this.request({path:`/phone-number/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),phoneNumberControllerRemove:(y,_={})=>this.request({path:`/phone-number/${y}`,method:"DELETE",secure:!0,format:"json",..._})};tool={toolControllerCreate:(y,_={})=>this.request({path:"/tool",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),toolControllerFindAll:(y,_={})=>this.request({path:"/tool",method:"GET",query:y,secure:!0,format:"json",..._}),toolControllerFindOne:(y,_={})=>this.request({path:`/tool/${y}`,method:"GET",secure:!0,format:"json",..._}),toolControllerUpdate:(y,_,E={})=>this.request({path:`/tool/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),toolControllerRemove:(y,_={})=>this.request({path:`/tool/${y}`,method:"DELETE",secure:!0,format:"json",..._})};file={fileControllerCreateDeprecated:(y,_={})=>this.request({path:"/file/upload",method:"POST",body:y,secure:!0,type:b.FormData,format:"json",..._}),fileControllerCreate:(y,_={})=>this.request({path:"/file",method:"POST",body:y,secure:!0,type:b.FormData,format:"json",..._}),fileControllerFindAll:(y={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...y}),fileControllerFindOne:(y,_={})=>this.request({path:`/file/${y}`,method:"GET",secure:!0,format:"json",..._}),fileControllerUpdate:(y,_,E={})=>this.request({path:`/file/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),fileControllerRemove:(y,_={})=>this.request({path:`/file/${y}`,method:"DELETE",secure:!0,format:"json",..._})};knowledgeBase={knowledgeBaseControllerCreate:(y,_={})=>this.request({path:"/knowledge-base",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),knowledgeBaseControllerFindAll:(y,_={})=>this.request({path:"/knowledge-base",method:"GET",query:y,secure:!0,format:"json",..._}),knowledgeBaseControllerFindOne:(y,_={})=>this.request({path:`/knowledge-base/${y}`,method:"GET",secure:!0,format:"json",..._}),knowledgeBaseControllerUpdate:(y,_,E={})=>this.request({path:`/knowledge-base/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),knowledgeBaseControllerRemove:(y,_={})=>this.request({path:`/knowledge-base/${y}`,method:"DELETE",secure:!0,format:"json",..._})};structuredOutput={structuredOutputControllerFindAll:(y,_={})=>this.request({path:"/structured-output",method:"GET",query:y,secure:!0,format:"json",..._}),structuredOutputControllerCreate:(y,_={})=>this.request({path:"/structured-output",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),structuredOutputControllerFindOne:(y,_={})=>this.request({path:`/structured-output/${y}`,method:"GET",secure:!0,format:"json",..._}),structuredOutputControllerUpdate:(y,_,E,k={})=>this.request({path:`/structured-output/${y}`,method:"PATCH",query:_,body:E,secure:!0,type:b.Json,format:"json",...k}),structuredOutputControllerRemove:(y,_={})=>this.request({path:`/structured-output/${y}`,method:"DELETE",secure:!0,format:"json",..._}),structuredOutputControllerRun:(y,_={})=>this.request({path:"/structured-output/run",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._})};testSuite={testSuiteControllerFindAllPaginated:(y,_={})=>this.request({path:"/test-suite",method:"GET",query:y,secure:!0,format:"json",..._}),testSuiteControllerCreate:(y,_={})=>this.request({path:"/test-suite",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),testSuiteControllerFindOne:(y,_={})=>this.request({path:`/test-suite/${y}`,method:"GET",secure:!0,format:"json",..._}),testSuiteControllerUpdate:(y,_,E={})=>this.request({path:`/test-suite/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),testSuiteControllerRemove:(y,_={})=>this.request({path:`/test-suite/${y}`,method:"DELETE",secure:!0,format:"json",..._}),testSuiteTestControllerFindAllPaginated:(y,_,b={})=>this.request({path:`/test-suite/${y}/test`,method:"GET",query:_,secure:!0,format:"json",...b}),testSuiteTestControllerCreate:(y,_,E={})=>this.request({path:`/test-suite/${y}/test`,method:"POST",body:_,secure:!0,type:b.Json,format:"json",...E}),testSuiteTestControllerFindOne:(y,_,b={})=>this.request({path:`/test-suite/${y}/test/${_}`,method:"GET",secure:!0,format:"json",...b}),testSuiteTestControllerUpdate:(y,_,E,k={})=>this.request({path:`/test-suite/${y}/test/${_}`,method:"PATCH",body:E,secure:!0,type:b.Json,format:"json",...k}),testSuiteTestControllerRemove:(y,_,b={})=>this.request({path:`/test-suite/${y}/test/${_}`,method:"DELETE",secure:!0,format:"json",...b}),testSuiteRunControllerFindAllPaginated:(y,_,b={})=>this.request({path:`/test-suite/${y}/run`,method:"GET",query:_,secure:!0,format:"json",...b}),testSuiteRunControllerCreate:(y,_,E={})=>this.request({path:`/test-suite/${y}/run`,method:"POST",body:_,secure:!0,type:b.Json,format:"json",...E}),testSuiteRunControllerFindOne:(y,_,b={})=>this.request({path:`/test-suite/${y}/run/${_}`,method:"GET",secure:!0,format:"json",...b}),testSuiteRunControllerUpdate:(y,_,E,k={})=>this.request({path:`/test-suite/${y}/run/${_}`,method:"PATCH",body:E,secure:!0,type:b.Json,format:"json",...k}),testSuiteRunControllerRemove:(y,_,b={})=>this.request({path:`/test-suite/${y}/run/${_}`,method:"DELETE",secure:!0,format:"json",...b})};reporting={insightControllerCreate:(y,_={})=>this.request({path:"/reporting/insight",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),insightControllerFindAll:(y,_={})=>this.request({path:"/reporting/insight",method:"GET",query:y,secure:!0,format:"json",..._}),insightControllerUpdate:(y,_,E={})=>this.request({path:`/reporting/insight/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),insightControllerFindOne:(y,_={})=>this.request({path:`/reporting/insight/${y}`,method:"GET",secure:!0,format:"json",..._}),insightControllerRemove:(y,_={})=>this.request({path:`/reporting/insight/${y}`,method:"DELETE",secure:!0,format:"json",..._}),insightControllerRun:(y,_,E={})=>this.request({path:`/reporting/insight/${y}/run`,method:"POST",body:_,secure:!0,type:b.Json,format:"json",...E}),insightControllerPreview:(y,_={})=>this.request({path:"/reporting/insight/preview",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._})};eval={evalControllerCreate:(y,_={})=>this.request({path:"/eval",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),evalControllerGetPaginated:(y,_={})=>this.request({path:"/eval",method:"GET",query:y,secure:!0,format:"json",..._}),evalControllerUpdate:(y,_,E={})=>this.request({path:`/eval/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),evalControllerRemove:(y,_={})=>this.request({path:`/eval/${y}`,method:"DELETE",secure:!0,format:"json",..._}),evalControllerGet:(y,_={})=>this.request({path:`/eval/${y}`,method:"GET",secure:!0,format:"json",..._}),evalControllerRemoveRun:(y,_={})=>this.request({path:`/eval/run/${y}`,method:"DELETE",secure:!0,format:"json",..._}),evalControllerGetRun:(y,_={})=>this.request({path:`/eval/run/${y}`,method:"GET",secure:!0,format:"json",..._}),evalControllerRun:(y,_={})=>this.request({path:"/eval/run",method:"POST",body:y,secure:!0,type:b.Json,..._}),evalControllerGetRunsPaginated:(y,_={})=>this.request({path:"/eval/run",method:"GET",query:y,secure:!0,format:"json",..._})};observability={scorecardControllerGet:(y,_={})=>this.request({path:`/observability/scorecard/${y}`,method:"GET",secure:!0,format:"json",..._}),scorecardControllerUpdate:(y,_,E={})=>this.request({path:`/observability/scorecard/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),scorecardControllerRemove:(y,_={})=>this.request({path:`/observability/scorecard/${y}`,method:"DELETE",secure:!0,format:"json",..._}),scorecardControllerGetPaginated:(y,_={})=>this.request({path:"/observability/scorecard",method:"GET",query:y,secure:!0,format:"json",..._}),scorecardControllerCreate:(y,_={})=>this.request({path:"/observability/scorecard",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._})};org={orgControllerCreate:(y,_={})=>this.request({path:"/org",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),orgControllerFindAll:(y={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...y}),orgControllerFeatureFlagEnabled:(y,_={})=>this.request({path:"/org/feature-flag",method:"GET",query:y,secure:!0,format:"json",..._}),orgControllerFindOne:(y,_={})=>this.request({path:`/org/${y}`,method:"GET",secure:!0,format:"json",..._}),orgControllerUpdate:(y,_,E={})=>this.request({path:`/org/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),orgControllerDeleteOrg:(y,_={})=>this.request({path:`/org/${y}`,method:"DELETE",secure:!0,..._}),orgControllerFindAllUsers:(y,_={})=>this.request({path:`/org/${y}/user`,method:"GET",secure:!0,format:"json",..._}),orgControllerOrgLeave:(y,_={})=>this.request({path:`/org/${y}/leave`,method:"DELETE",secure:!0,..._}),orgControllerOrgRemoveUser:(y,_,b={})=>this.request({path:`/org/${y}/member/${_}/leave`,method:"DELETE",secure:!0,...b}),orgControllerUsersInvite:(y,_,E={})=>this.request({path:`/org/${y}/invite`,method:"POST",body:_,secure:!0,type:b.Json,...E}),orgControllerUserUpdate:(y,_,E={})=>this.request({path:`/org/${y}/role`,method:"PATCH",body:_,secure:!0,type:b.Json,...E}),orgControllerOrgToken:(y,_={})=>this.request({path:`/org/${y}/auth`,method:"GET",secure:!0,format:"json",..._})};token={tokenControllerCreate:(y,_={})=>this.request({path:"/token",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),tokenControllerFindAll:(y,_={})=>this.request({path:"/token",method:"GET",query:y,secure:!0,format:"json",..._}),tokenControllerFindOne:(y,_={})=>this.request({path:`/token/${y}`,method:"GET",secure:!0,format:"json",..._}),tokenControllerUpdate:(y,_,E={})=>this.request({path:`/token/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),tokenControllerRemove:(y,_={})=>this.request({path:`/token/${y}`,method:"DELETE",secure:!0,format:"json",..._})};credential={credentialControllerCreate:(y,_={})=>this.request({path:"/credential",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),credentialControllerFindAll:(y,_={})=>this.request({path:"/credential",method:"GET",query:y,secure:!0,format:"json",..._}),credentialControllerFindOne:(y,_={})=>this.request({path:`/credential/${y}`,method:"GET",secure:!0,format:"json",..._}),credentialControllerUpdate:(y,_,E={})=>this.request({path:`/credential/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),credentialControllerRemove:(y,_={})=>this.request({path:`/credential/${y}`,method:"DELETE",secure:!0,format:"json",..._})};template={templateControllerCreate:(y,_={})=>this.request({path:"/template",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),templateControllerFindAll:(y,_={})=>this.request({path:"/template",method:"GET",query:y,secure:!0,format:"json",..._}),templateControllerFindAllPinned:(y={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...y}),templateControllerFindOne:(y,_={})=>this.request({path:`/template/${y}`,method:"GET",secure:!0,format:"json",..._}),templateControllerUpdate:(y,_,E={})=>this.request({path:`/template/${y}`,method:"PATCH",body:_,secure:!0,type:b.Json,format:"json",...E}),templateControllerRemove:(y,_={})=>this.request({path:`/template/${y}`,method:"DELETE",secure:!0,format:"json",..._})};voiceLibrary={voiceLibraryControllerVoiceGetByProvider:(y,_,b={})=>this.request({path:`/voice-library/${y}`,method:"GET",query:_,secure:!0,format:"json",...b}),voiceLibraryControllerVoiceGetAccentsByProvider:(y,_={})=>this.request({path:`/voice-library/${y}/accents`,method:"GET",secure:!0,format:"json",..._}),voiceLibraryControllerVoiceLibrarySyncByProvider:(y,_={})=>this.request({path:`/voice-library/sync/${y}`,method:"POST",secure:!0,format:"json",..._}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(y,_={})=>this.request({path:"/voice-library/sync",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(y,_={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:y,secure:!0,type:b.Json,..._})};provider={providerResourceControllerCreateProviderResource:(y,_,b={})=>this.request({path:`/provider/${y}/${_}`,method:"POST",secure:!0,format:"json",...b}),providerResourceControllerGetProviderResourcesPaginated:(y,_,b,E={})=>this.request({path:`/provider/${y}/${_}`,method:"GET",query:b,secure:!0,format:"json",...E}),providerResourceControllerGetProviderResource:(y,_,b,E={})=>this.request({path:`/provider/${y}/${_}/${b}`,method:"GET",secure:!0,format:"json",...E}),providerResourceControllerDeleteProviderResource:(y,_,b,E={})=>this.request({path:`/provider/${y}/${_}/${b}`,method:"DELETE",secure:!0,format:"json",...E}),providerResourceControllerUpdateProviderResource:(y,_,b,E={})=>this.request({path:`/provider/${y}/${_}/${b}`,method:"PATCH",secure:!0,format:"json",...E}),providerControllerGetWorkflows:(y,_,b={})=>this.request({path:`/${y}/workflows`,method:"GET",query:_,secure:!0,format:"json",...b}),providerControllerGetWorkflowTriggerHook:(y,_,b={})=>this.request({path:`/${y}/workflows/${_}/hooks`,method:"GET",secure:!0,format:"json",...b}),providerControllerGetLocations:(y,_={})=>this.request({path:`/${y}/locations`,method:"GET",secure:!0,format:"json",..._}),voiceProviderControllerSearchVoices:(y,_,b={})=>this.request({path:`/${y}/voices/search`,method:"GET",query:_,secure:!0,format:"json",...b}),voiceProviderControllerSearchVoice:(y,_,b={})=>this.request({path:`/${y}/voice/search`,method:"GET",query:_,secure:!0,format:"json",...b}),voiceProviderControllerAddVoices:(y,_,E={})=>this.request({path:`/${y}/voices/add`,method:"POST",body:_,secure:!0,type:b.Json,format:"json",...E}),voiceProviderControllerAddVoice:(y,_,E={})=>this.request({path:`/${y}/voice/add`,method:"POST",body:_,secure:!0,type:b.Json,format:"json",...E})};v11Labs={voiceProviderControllerCloneVoices:(y,_={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:y,secure:!0,type:b.FormData,..._})};analytics={analyticsControllerQuery:(y,_={})=>this.request({path:"/analytics",method:"POST",body:y,secure:!0,type:b.Json,format:"json",..._})}};_.Api=Api},526:(y,_,b)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.client=void 0;let E=b(202),k=new E.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async y=>{if(y)return{headers:{Authorization:`Bearer ${y}`}}}});_.client=k},9048:(y,_)=>{"use strict";function createSafeDailyConfig(y){if(!y)return{};let{alwaysIncludeMicInPermissionPrompt:_,...b}=y;return!1===_?(console.warn("[Vapi] alwaysIncludeMicInPermissionPrompt:false detected. This can cause Chrome 140+ issues. Removing the property."),b):y}function safeSetLocalAudio(y,_){if(!y)throw Error("Call object is not available.");y.setLocalAudio(_)}async function safeSetInputDevicesAsync(y,_){if(!y)throw Error("Call object is not available.");if("audioSource"in _&&!1===_.audioSource){console.warn("[Vapi] setInputDevicesAsync with audioSource:false detected. This can cause Chrome 140+ issues. Using default device instead.");let{audioSource:b,...E}=_;await y.setInputDevicesAsync(E);return}await y.setInputDevicesAsync(_)}function createSafeDailyFactoryOptions(y){return y?!1===y.audioSource?(console.warn("[Vapi] audioSource:false detected in factory options. This can cause Chrome 140+ issues. Defaulting to true."),{...y,audioSource:!0}):y:{}}Object.defineProperty(_,"__esModule",{value:!0}),_.createSafeDailyConfig=createSafeDailyConfig,_.safeSetLocalAudio=safeSetLocalAudio,_.safeSetInputDevicesAsync=safeSetInputDevicesAsync,_.createSafeDailyFactoryOptions=createSafeDailyFactoryOptions},804:function(y,_,b){"use strict";var E=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(_,"__esModule",{value:!0});let k=E(b(958)),P=E(b(2361)),I=b(526),D=b(9048);function serializeError(y){if(null==y)return{message:"Unknown error (null or undefined)"};if(y instanceof Error){let _={message:y.message,name:y.name,stack:y.stack};return void 0!==y.code&&(_.code=y.code),void 0!==y.cause&&(_.cause=String(y.cause)),void 0!==y.reason&&(_.reason=y.reason),void 0!==y.details&&(_.details=y.details),void 0!==y.errorMsg&&(_.errorMsg=y.errorMsg),void 0!==y.error&&"string"==typeof y.error&&(_.errorDetail=y.error),_}return"string"==typeof y?{message:y}:"object"==typeof y?{message:y.message||y.error||JSON.stringify(y),...y}:{message:String(y)}}async function startAudioPlayer(y,_){y.muted=!1,y.autoplay=!0,null!=_&&(y.srcObject=new MediaStream([_]),await y.play())}async function buildAudioPlayer(y,_){let b=document.createElement("audio");return b.dataset.participantId=_,document.body.appendChild(b),await startAudioPlayer(b,y),b}function destroyAudioPlayer(y){let _=document.querySelector(`audio[data-participant-id="${y}"]`);_?.remove()}function subscribeToTracks(y,_,b,E){y.participant.local||_.updateParticipant(y.participant.session_id,{setSubscribedTracks:{audio:!0,video:b||E}})}let VapiEventEmitter=class VapiEventEmitter extends P.default{on(y,_){return super.on(y,_),this}once(y,_){return super.once(y,_),this}emit(y,..._){return super.emit(y,..._)}removeListener(y,_){return super.removeListener(y,_),this}removeAllListeners(y){return super.removeAllListeners(y),this}};let Vapi=class Vapi extends VapiEventEmitter{started=!1;call=null;speakingTimeout=null;dailyCallConfig={};dailyCallObject={};hasEmittedCallEndedStatus=!1;constructor(y,_,b,E){super(),I.client.baseUrl=_??"https://api.vapi.ai",I.client.setSecurityData(y),this.dailyCallConfig=(0,D.createSafeDailyConfig)(b),this.dailyCallObject=(0,D.createSafeDailyFactoryOptions)(E)}async cleanup(){this.started=!1,this.hasEmittedCallEndedStatus=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}isMobileDevice(){if("undefined"==typeof navigator)return!1;let y=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(y.toLowerCase())}async sleep(y){return new Promise(_=>setTimeout(_,y))}async start(y,_,b,E,P,j){let L=Date.now();if(!y&&!b&&!E){let y=Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",error:serializeError(y),timestamp:new Date().toISOString()}),y}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!y,hasSquad:!!b,hasWorkflow:!!E}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});let R=Date.now(),F=(await I.client.call.callControllerCreateWebCall({assistant:"string"==typeof y?void 0:y,assistantId:"string"==typeof y?y:void 0,assistantOverrides:_,squad:"string"==typeof b?void 0:b,squadId:"string"==typeof b?b:void 0,workflow:"string"==typeof E?void 0:E,workflowId:"string"==typeof E?E:void 0,workflowOverrides:P,roomDeleteOnUserLeaveEnabled:j?.roomDeleteOnUserLeaveEnabled})).data,V=Date.now()-R;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:V,timestamp:new Date().toISOString(),metadata:{callId:F?.id||"unknown",videoRecordingEnabled:F?.artifactPlan?.videoRecordingEnabled??!1,voiceProvider:F?.assistant?.voice?.provider||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),await this.cleanup());let J=F?.artifactPlan?.videoRecordingEnabled??!1,et=F?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??J,isVideoRecordingEnabled:J,isVideoEnabled:et}});let ei=Date.now();try{this.call=k.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??J,dailyConfig:this.dailyCallConfig});let y=Date.now()-ei;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:y,timestamp:new Date().toISOString()})}catch(b){let y=Date.now()-ei,_=serializeError(b);throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:_.message}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:_,timestamp:new Date().toISOString()}),b}this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),J&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",y=>{this.emit("error",{type:"daily-error",error:serializeError(y),timestamp:new Date().toISOString()}),J&&this.call?.stopRecording()}),this.call.on("camera-error",y=>{this.emit("camera-error",{type:"camera-error",error:serializeError(y),timestamp:new Date().toISOString()})}),this.call.on("network-quality-change",y=>{this.emit("network-quality-change",y)}),this.call.on("network-connection",y=>{this.emit("network-connection",y)}),this.call.on("track-started",async y=>{!y||!y.participant||y.participant?.local||y.participant?.user_name!=="Vapi Speaker"||("video"===y.track.kind&&this.emit("video",y.track),"audio"===y.track.kind&&await buildAudioPlayer(y.track,y.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",y=>{y&&this.call&&subscribeToTracks(y,this.call,J,et)}),this.call.on("participant-updated",y=>{y&&this.emit("daily-participant-updated",y.participant)}),this.call.on("participant-left",y=>{y&&destroyAudioPlayer(y.participant.session_id)});let ea=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:ea}}),ea){let y=Date.now();await this.sleep(1e3);let _=Date.now()-y;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:_,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});let eo=Date.now();try{await this.call.join({url:F.webCallUrl,subscribeToTracksAutomatically:!1});let y=Date.now()-eo;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:y,timestamp:new Date().toISOString()})}catch(b){let y=Date.now()-eo,_=serializeError(b);throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:_.message}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:_,duration:y,timestamp:new Date().toISOString()}),b}if(J){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});let y=new Date().getTime(),_=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});let b=Date.now()-_;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:b,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{let _=(new Date().getTime()-y)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:_}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:_})})}catch(E){let y=Date.now()-_,b=serializeError(E);this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:b.message}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:b,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});let es=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);let y=Date.now()-es;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:y,timestamp:new Date().toISOString()})}catch(b){let y=Date.now()-es,_=serializeError(b);this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:_.message}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:_,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",y=>{y&&this.handleRemoteParticipantsAudioLevel(y)}),this.call.on("app-message",y=>this.onAppMessage(y)),this.call.on("nonfatal-error",y=>{y?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{D.safeSetLocalAudio(this.call,!0)})}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});let ec=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});let y=Date.now()-ec;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:y,timestamp:new Date().toISOString()})}catch(b){let y=Date.now()-ec,_=serializeError(b);this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:_.message}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:_,timestamp:new Date().toISOString()})}let el=Date.now()-L;return this.emit("call-start-success",{totalDuration:el,callId:F?.id||"unknown",timestamp:new Date().toISOString()}),F}catch(P){let _=Date.now()-L,k=serializeError(P);return this.emit("call-start-failed",{stage:"unknown",totalDuration:_,error:k.message,errorStack:k.stack||"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!y,hasSquad:!!b,hasWorkflow:!!E,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:k,totalDuration:_,timestamp:new Date().toISOString(),context:{hasAssistant:!!y,hasSquad:!!b,hasWorkflow:!!E,isMobile:this.isMobileDevice()}}),await this.cleanup(),null}}onAppMessage(y){if(y)try{if("listening"===y.data)return this.emit("call-start");try{let _=JSON.parse(y.data);this.emit("message",_),_&&"type"in _&&"status"in _&&"status-update"===_.type&&"ended"===_.status&&(this.hasEmittedCallEndedStatus=!0)}catch(y){console.log("Error parsing message data: ",y)}}catch(y){console.error(y)}}handleRemoteParticipantsAudioLevel(y){let _=Object.values(y.participantsAudioLevel).reduce((y,_)=>y+_,0);this.emit("volume-level",Math.min(1,_/.15)),_>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}async stop(){this.started=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}send(y){this.call?.sendAppMessage(JSON.stringify(y))}setMuted(y){(0,D.safeSetLocalAudio)(this.call,!y)}isMuted(){return!!this.call&&!1===this.call.localAudio()}say(y,_,b,E){this.send({type:"say",message:y,endCallAfterSpoken:_,interruptionsEnabled:b??!1,interruptAssistantEnabled:E??!1})}end(){this.send({type:"end-call"}),this.stop()}setInputDevicesAsync(y){return(0,D.safeSetInputDevicesAsync)(this.call,y)}async increaseMicLevel(y){if(!this.call)throw Error("Call object is not available.");try{let _=await navigator.mediaDevices.getUserMedia({audio:!0}),b=new AudioContext,E=b.createMediaStreamSource(_),k=b.createGain();k.gain.value=y,E.connect(k);let P=b.createMediaStreamDestination();k.connect(P);let[I]=P.stream.getAudioTracks();await (0,D.safeSetInputDevicesAsync)(this.call,{audioSource:I})}catch(y){console.error("Error adjusting microphone level:",y)}}setOutputDeviceAsync(y){this.call?.setOutputDeviceAsync(y)}getDailyCallObject(){return this.call}startScreenSharing(y,_){this.call?.startScreenShare({displayMediaOptions:y,screenVideoSendSettings:_})}stopScreenSharing(){this.call?.stopScreenShare()}async reconnect(y){let _=Date.now();if(this.started)throw Error("Cannot reconnect while a call is already in progress. Call stop() first.");if(!y.webCallUrl)throw Error("webCallUrl is required for reconnection.");this.emit("call-start-progress",{stage:"reconnect-initialization",status:"started",timestamp:new Date().toISOString(),metadata:{callId:y.id||"unknown",hasVideoRecording:!!y?.artifactPlan?.videoRecordingEnabled,voiceProvider:y?.assistant?.voice?.provider||"unknown"}}),this.started=!0;try{this.call&&(this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"started",timestamp:new Date().toISOString()}),await this.cleanup(),this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"completed",timestamp:new Date().toISOString()}));let b=y?.artifactPlan?.videoRecordingEnabled??!1,E=y?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??b,isVideoRecordingEnabled:b,isVideoEnabled:E}});let P=Date.now();this.call=k.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??b,dailyConfig:this.dailyCallConfig});let I=Date.now()-P;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:I,timestamp:new Date().toISOString()}),this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),b&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",y=>{this.emit("error",{type:"daily-error",error:serializeError(y),timestamp:new Date().toISOString()}),b&&this.call?.stopRecording()}),this.call.on("camera-error",y=>{this.emit("camera-error",{type:"camera-error",error:serializeError(y),timestamp:new Date().toISOString()})}),this.call.on("network-quality-change",y=>{this.emit("network-quality-change",y)}),this.call.on("network-connection",y=>{this.emit("network-connection",y)}),this.call.on("track-started",async y=>{!y||!y.participant||y.participant?.local||y.participant?.user_name!=="Vapi Speaker"||("video"===y.track.kind&&this.emit("video",y.track),"audio"===y.track.kind&&await buildAudioPlayer(y.track,y.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",y=>{y&&this.call&&subscribeToTracks(y,this.call,b,E)}),this.call.on("participant-updated",y=>{y&&this.emit("daily-participant-updated",y.participant)}),this.call.on("participant-left",y=>{y&&destroyAudioPlayer(y.participant.session_id)}),this.call.on("remote-participants-audio-level",y=>{y&&this.handleRemoteParticipantsAudioLevel(y)}),this.call.on("app-message",y=>this.onAppMessage(y)),this.call.on("nonfatal-error",y=>{y?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{D.safeSetLocalAudio(this.call,!0)})});let j=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:j}}),j){let y=Date.now();await this.sleep(1e3);let _=Date.now()-y;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:_,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});let L=Date.now();await this.call.join({url:y.webCallUrl,subscribeToTracksAutomatically:!1});let R=Date.now()-L;if(this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:R,timestamp:new Date().toISOString()}),b){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});let y=Date.now(),_=new Date().getTime();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});let b=Date.now()-y;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:b,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{let y=(new Date().getTime()-_)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:y}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:y})})}catch(E){let _=Date.now()-y,b=serializeError(E);this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:_,timestamp:new Date().toISOString(),metadata:{error:b.message}})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});let F=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);let y=Date.now()-F;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:y,timestamp:new Date().toISOString()})}catch(b){let y=Date.now()-F,_=serializeError(b);this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:_.message}})}this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});let V=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});let y=Date.now()-V;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:y,timestamp:new Date().toISOString()})}catch(b){let y=Date.now()-V,_=serializeError(b);this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:y,timestamp:new Date().toISOString(),metadata:{error:_.message}})}let J=Date.now()-_;this.emit("call-start-success",{totalDuration:J,callId:y?.id||"unknown",timestamp:new Date().toISOString()}),this.emit("call-start")}catch(k){let b=Date.now()-_,E=serializeError(k);throw this.emit("call-start-failed",{stage:"reconnect",totalDuration:b,error:E.message,errorStack:E.stack||"No stack trace available",timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:y?.id||"unknown",hasVideoRecording:!!y?.artifactPlan?.videoRecordingEnabled,voiceProvider:y?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),this.emit("error",{type:"reconnect-error",error:E,totalDuration:b,timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:y?.id||"unknown",hasVideoRecording:!!y?.artifactPlan?.videoRecordingEnabled,voiceProvider:y?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),await this.cleanup(),k}}static async runNetworkTestsStandalone(){console.log("Starting standalone network connectivity tests...");let y={},_=null;try{console.log("Creating temporary call object for testing..."),_=k.default.createCallObject({audioSource:!0,videoSource:!0}),console.log("\n1. Testing network connectivity (TURN server)...");let b=null;try{let E=await navigator.mediaDevices.getUserMedia({video:!0});b=E.getVideoTracks()[0];let k=await _.testNetworkConnectivity(b);y.networkConnectivity=k,console.log("Network connectivity test result:",k)}catch(_){y.networkConnectivity={result:"error",error:_?.toString()},console.error("Network connectivity test error:",_)}finally{b&&b.stop()}console.log("\n2. Testing websocket connectivity...");try{let b=await _.testWebsocketConnectivity();y.websocketConnectivity=b,console.log("Websocket connectivity test result:",b)}catch(_){y.websocketConnectivity={result:"error",error:_?.toString()},console.error("Websocket connectivity test error:",_)}console.log("\n3. Testing call quality...");try{if("function"==typeof _.testCallQuality)try{console.log("Initializing call state with startCamera..."),await _.startCamera();let b=await _.testCallQuality();y.callQuality=b,console.log("Call quality test result:",b)}catch(_){console.error("Failed to start camera for call quality test:",_),y.callQuality={result:"error",error:_?.toString(),message:"Failed to initialize camera for call quality test. Check camera permissions."}}else y.callQuality={result:"not-available",message:"testCallQuality method not available"},console.log("Call quality test not available in current Daily.co version")}catch(_){y.callQuality={result:"error",error:_?.toString()},console.error("Call quality test error:",_)}}catch(_){console.error("Failed to create temporary call object:",_),y.error=_?.toString()}finally{if(_)try{console.log("Cleaning up temporary call object..."),await _.destroy()}catch(y){console.error("Error destroying temporary call object:",y)}}return console.log("\n=== Network Test Summary ==="),console.log("Results:",JSON.stringify(y,null,2)),y}};_.default=Vapi},2125:(y,_,b)=>{"use strict";b.d(_,{Z:()=>createLucideIcon});var E=b(9885);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=y=>y.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=y=>y.replace(/^([A-Z])|[\s-_]+(\w)/g,(y,_,b)=>b?b.toUpperCase():_.toLowerCase()),toPascalCase=y=>{let _=toCamelCase(y);return _.charAt(0).toUpperCase()+_.slice(1)},mergeClasses=(...y)=>y.filter((y,_,b)=>!!y&&""!==y.trim()&&b.indexOf(y)===_).join(" ").trim(),hasA11yProp=y=>{for(let _ in y)if(_.startsWith("aria-")||"role"===_||"title"===_)return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let P=(0,E.forwardRef)(({color:y="currentColor",size:_=24,strokeWidth:b=2,absoluteStrokeWidth:P,className:I="",children:D,iconNode:j,...L},R)=>(0,E.createElement)("svg",{ref:R,...k,width:_,height:_,stroke:y,strokeWidth:P?24*Number(b)/Number(_):b,className:mergeClasses("lucide",I),...!D&&!hasA11yProp(L)&&{"aria-hidden":"true"},...L},[...j.map(([y,_])=>(0,E.createElement)(y,_)),...Array.isArray(D)?D:[D]])),createLucideIcon=(y,_)=>{let b=(0,E.forwardRef)(({className:b,...k},I)=>(0,E.createElement)(P,{ref:I,iconNode:_,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(y))}`,`lucide-${y}`,b),...k}));return b.displayName=toPascalCase(y),b}},169:(y,_,b)=>{"use strict";b.d(_,{Z:()=>k});var E=b(2125);let k=(0,E.Z)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},132:(y,_,b)=>{"use strict";b.d(_,{Z:()=>k});var E=b(2125);let k=(0,E.Z)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},963:(y,_,b)=>{"use strict";b.d(_,{Z:()=>k});var E=b(2125);let k=(0,E.Z)("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]])},644:(y,_,b)=>{"use strict";b.d(_,{Z:()=>k});var E=b(2125);let k=(0,E.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6206:(y,_,b)=>{"use strict";b.d(_,{Z:()=>k});var E=b(2125);let k=(0,E.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},784:(y,_,b)=>{"use strict";y.exports=b(316).vendored["react-ssr"].ReactJsxRuntime}};